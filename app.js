const _0x23ef9d=_0x1eb7;(function(_0x266d27,_0x2d5401){const _0x16e70e=_0x1eb7,_0x18f0f9=_0x266d27();while(!![]){try{const _0x5a13dd=parseInt(_0x16e70e(0xff))/0x1+-parseInt(_0x16e70e(0x10e))/0x2*(parseInt(_0x16e70e(0x1c3))/0x3)+-parseInt(_0x16e70e(0x13d))/0x4+parseInt(_0x16e70e(0x149))/0x5+-parseInt(_0x16e70e(0x1be))/0x6+-parseInt(_0x16e70e(0x19d))/0x7*(-parseInt(_0x16e70e(0x1b7))/0x8)+parseInt(_0x16e70e(0x13c))/0x9;if(_0x5a13dd===_0x2d5401)break;else _0x18f0f9['push'](_0x18f0f9['shift']());}catch(_0x4e8d4d){_0x18f0f9['push'](_0x18f0f9['shift']());}}}(_0x2d20,0x981d6));const FILE_PATH=process[_0x23ef9d(0x16f)][_0x23ef9d(0x106)]||_0x23ef9d(0x1a4),intervalInseconds=process[_0x23ef9d(0x16f)][_0x23ef9d(0x107)]||0x64,CFIP=process[_0x23ef9d(0x16f)]['CFIP']||_0x23ef9d(0x10a),CFPORT=process[_0x23ef9d(0x16f)][_0x23ef9d(0x17c)]||_0x23ef9d(0x1c1),delay=_0x4b5945=>new Promise(_0x4cd369=>setTimeout(_0x4cd369,_0x4b5945)),OPENSERVER=process[_0x23ef9d(0x16f)][_0x23ef9d(0x133)]||!![],KEEPALIVE=process[_0x23ef9d(0x16f)][_0x23ef9d(0x18a)]||![],MY_DOMAIN=process[_0x23ef9d(0x16f)]['MY_DOMAIN']||'',ARGO_DOMAIN=process['env']['ARGO_DOMAIN']||'',ARGO_AUTH=process[_0x23ef9d(0x16f)][_0x23ef9d(0x134)]||'',VLPATH=process['env'][_0x23ef9d(0x16b)]||'',XHPPATH=process[_0x23ef9d(0x16f)][_0x23ef9d(0x183)]||'',PORT=process['env']['PORT']||process[_0x23ef9d(0x16f)][_0x23ef9d(0x117)]||0xbb8,V_PORT=process[_0x23ef9d(0x16f)][_0x23ef9d(0x194)]||0x1f90,UUID=process[_0x23ef9d(0x16f)][_0x23ef9d(0x104)]||'',NEZHA_VERSION=process[_0x23ef9d(0x16f)][_0x23ef9d(0x128)]||'V0',NEZHA_SERVER=process['env'][_0x23ef9d(0x13f)]||'',NEZHA_PORT=process['env'][_0x23ef9d(0x18f)]||'443',NEZHA_KEY=process[_0x23ef9d(0x16f)][_0x23ef9d(0x127)]||'',SUB_NAME=process[_0x23ef9d(0x16f)][_0x23ef9d(0x136)]||'',SUB_URL=process[_0x23ef9d(0x16f)][_0x23ef9d(0x1ba)]||'',axios=require(_0x23ef9d(0x148)),{pipeline}=require(_0x23ef9d(0x1b3)),os=require('os'),fs=require('fs'),path=require(_0x23ef9d(0x14c)),http=require(_0x23ef9d(0x11f)),https=require(_0x23ef9d(0x147)),exec=require(_0x23ef9d(0x158))[_0x23ef9d(0x135)];function cleanupOldFiles(){const _0x1feef1=_0x23ef9d;try{fs[_0x1feef1(0x113)](path['join'](FILE_PATH))?(fs[_0x1feef1(0x173)](path['join'](FILE_PATH),{'recursive':!![]}),console[_0x1feef1(0xf6)](FILE_PATH+_0x1feef1(0x139))):console[_0x1feef1(0xf6)](FILE_PATH+_0x1feef1(0x11a));}catch(_0x4e1c38){console[_0x1feef1(0xf6)](_0x1feef1(0x1ac)+FILE_PATH);}}function createFolder(_0x4505ae){const _0xd3eeab=_0x23ef9d;!fs[_0xd3eeab(0x113)](_0x4505ae)?(fs[_0xd3eeab(0x15c)](_0x4505ae),console[_0xd3eeab(0xf6)](_0x4505ae+_0xd3eeab(0x126))):console[_0xd3eeab(0xf6)](_0x4505ae+_0xd3eeab(0x150));}function httpserver(){const _0x41d9b7=http['createServer']((_0x1fe058,_0x4f1500)=>{const _0x5851c2=_0x1eb7;if(_0x1fe058['url']==='/')_0x4f1500[_0x5851c2(0x10c)](0xc8),_0x4f1500[_0x5851c2(0x168)](_0x5851c2(0x1b9));else{if(_0x1fe058[_0x5851c2(0x105)]===_0x5851c2(0xf8)){const _0x583e16=FILE_PATH+'/log.txt';fs[_0x5851c2(0x17d)](_0x583e16,_0x5851c2(0x1ae),(_0x50a53f,_0x367b82)=>{const _0xba70de=_0x5851c2;_0x50a53f?(_0x4f1500[_0xba70de(0x10c)](0x1f4),_0x4f1500['end'](_0xba70de(0x1a8))):(_0x4f1500[_0xba70de(0x10c)](0xc8,{'Content-Type':_0xba70de(0x1b0)}),_0x4f1500['end'](_0x367b82));});}else _0x4f1500[_0x5851c2(0x10c)](0x194),_0x4f1500[_0x5851c2(0x168)]('Not\x20found');}});_0x41d9b7['listen'](PORT,()=>{const _0x14850f=_0x1eb7;console['log'](_0x14850f(0x1c0)+PORT);});}function execPromise(_0x5a5ba2,_0x4e7c96={}){return new Promise((_0x134268,_0x3d7106)=>{const _0x3a2455=exec(_0x5a5ba2,_0x4e7c96,(_0xdef04e,_0x15d9ca,_0x2260c9)=>{const _0x34f30a=_0x1eb7;if(_0xdef04e){const _0x331f59=new Error(_0x34f30a(0x111)+_0xdef04e[_0x34f30a(0x10f)]);_0x331f59[_0x34f30a(0x13e)]=_0xdef04e['code'],_0x331f59[_0x34f30a(0x142)]=_0x2260c9[_0x34f30a(0x14f)](),_0x3d7106(_0x331f59);}else _0x134268(_0x15d9ca[_0x34f30a(0x14f)]());});});}function _0x2d20(){const _0x3396fe=['replace','\x20-c\x20','fileName','length','NEZHA_PORT','config.yml\x20file\x20created\x20and\x20written\x20successfully.','\x20-s\x20','name','log.txt','V_PORT','warn','https://github.com/kahunama/myfile/releases/download/main/nezha-agent','/xconf','\x20(renamed\x20to\x20','arm','size','/xconf\x20>/dev/null\x202>&1\x20&','\x20>/dev/null\x202>&1\x20&','35ORffly','Error\x20creating\x20or\x20writing\x20config.yml\x20file:','\x20error:','ps\x20-eo\x20pid,comm\x20|\x20awk\x20-v\x20name=\x22','vless://','TunnelSecret','npm\x20file\x20not\x20found,\x20skip\x20running','/tmp','2053','Kill\x20failed:\x20','?host=','Error\x20reading\x20file','statusCode','%3Fed%3D2560&mode=packet-up#','includes','unable\x20to\x20rm\x20','2087','utf8','statusMessage','text/plain;\x20charset=utf-8','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1','application/json;\x20charset=utf-8','stream/promises','8443','\x0a\x20\x20\x20\x20\x20\x20\x20\x20credentials-file:\x20','push','912104OxKvlv','stringify','hello\x20world','SUB_URL','Error\x20deleting\x20boot.log:\x20','ps+awk','isDirectory','3681744VEwMGb','originalName','server\x20is\x20running\x20on\x20port\x20:\x20','443','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','2217yRfdqf','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','pathname','chmodSync','random','log','web\x20file\x20not\x20found,\x20skip\x20running','/sub','npm\x20variable\x20is\x20empty,\x20skip\x20running','\x27\x20not\x20found','Failed\x20to\x20obtain\x20ArgoDomain\x20even\x20after\x20restarting\x20bot.','true','\x20running\x20error:\x20','error','238344QGidDu','pgrep','pidof','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','https://github.com/kahunama/myfile/releases/download/main/nezha-agent_arm','UUID','url','FILE_PATH','TIME','split','aarch64','ip.sb','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','writeHead','vless','2178ZotDGm','message','2083','Command\x20failed:\x20','none','existsSync','inbound_v.json','\x0a\x20\x20\x20\x20\x20\x20\x20\x20protocol:\x20http2\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ingress:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20hostname:\x20','https+local://8.8.8.8/dns-query','SERVER_PORT','base64','/tunnel.yml\x20run','\x20not\x20created','Error\x20reading\x20boot.log:','\x20runs\x20again\x20!','Process\x20\x27','\x20is\x20running','http','boot.log','map','xhttp','/config.yml','country','\x0a\x20\x20\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','\x20is\x20created','NEZHA_KEY','NEZHA_VERSION','stream','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','xconf','Can\x27t\x20determine\x20system\x20architecture.','Process\x20not\x20found','\x0a\x20\x20\x20\x20\x20\x20\x20\x20tunnel:\x20','Empowerment\x20success\x20for\x20','match','Error\x20downloading\x20files:','speed.cloudflare.com','OPENSERVER','ARGO_AUTH','exec','SUB_NAME','Download\x20',':\x20755','\x20deleted','all',')\x20successfully','13987017FaYhSK','3056596FYwWeU','code','NEZHA_SERVER','data','web','stderr','&path=%2F','https://github.com/mytcgd/myfiles/releases/download/main/xray','pgrep\x20-x\x20\x22','tls','https','axios','2215420ODKFxp','join','createWriteStream','path','\x0a\x20\x20\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20\x20\x20\x20\x20\x20\x20','request','trim','\x20already\x20exists','port','&type=xhttp&host=','quic','https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','amd','npm','child_process','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','outbound.json','unlinkSync','mkdirSync','bot\x20is\x20not\x20allowed,\x20skip\x20running','?encryption=none&security=tls&sni=','lstatSync','false','toString','/dev/null','pidof\x20\x22','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','/meta','debug','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1_arm','end','tunnel.json','client_secret:\x20','VLPATH','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','clear','\x20--report-delay=4\x20--skip-conn\x20--skip-procs\x20--disable-auto-update\x20>/dev/null\x202>&1\x20&','env','from','writeFileSync','%3Fed%3D2560&type=ws&encryption=none&security=tls&sni=','rmSync','Upload\x20failed:','GET','floor','statSync','Error\x20in\x20bot\x20process\x20management:','kill\x20-9\x20','charAt','\x20-p\x20','CFPORT','readFile','inbound.json','/config.yml\x20>/dev/null\x202>&1\x20&','\x20run\x20-confdir\x20','packet-up','success','XHPPATH','tunnel.yml','filePath','https://github.com/mytcgd/myfiles/releases/download/main/xray_arm','bot','get','nohup\x20','KEEPALIVE'];_0x2d20=function(){return _0x3396fe;};return _0x2d20();}async function detectProcess(_0x3736b2){const _0x263415=_0x23ef9d,_0x41dbbb=[{'cmd':_0x263415(0x163)+_0x3736b2+'\x22','name':_0x263415(0x101)},{'cmd':_0x263415(0x145)+_0x3736b2+'\x22','name':_0x263415(0x100)},{'cmd':_0x263415(0x1a0)+_0x3736b2+'\x22\x20\x27$2\x20==\x20name\x20{print\x20$1}\x27','name':_0x263415(0x1bc)}];for(const _0x1e8ca6 of _0x41dbbb){try{const _0x120762=await execPromise(_0x1e8ca6['cmd']);if(_0x120762)return _0x120762[_0x263415(0x18b)](/\n/g,'\x20')['trim']();}catch(_0x2da49f){_0x2da49f[_0x263415(0x13e)]!==0x7f&&_0x2da49f[_0x263415(0x13e)]!==0x1&&console[_0x263415(0x166)]('[detectProcess]\x20'+_0x1e8ca6[_0x263415(0x192)]+_0x263415(0x19f),_0x2da49f[_0x263415(0x10f)]);}}return'';}function _0x1eb7(_0x2a7bdd,_0x47e065){const _0x2d202d=_0x2d20();return _0x1eb7=function(_0x1eb743,_0x41f2ca){_0x1eb743=_0x1eb743-0xf2;let _0x221cb7=_0x2d202d[_0x1eb743];return _0x221cb7;},_0x1eb7(_0x2a7bdd,_0x47e065);}async function killProcess(_0x3a6c85){const _0x4ce87f=_0x23ef9d;console[_0x4ce87f(0xf6)]('Attempting\x20to\x20kill\x20process:\x20'+_0x3a6c85);try{const _0x2cfa50=await detectProcess(_0x3a6c85);if(!_0x2cfa50)return console['warn'](_0x4ce87f(0x11d)+_0x3a6c85+_0x4ce87f(0xfa)),{'success':!![],'message':_0x4ce87f(0x12d)};await execPromise(_0x4ce87f(0x179)+_0x2cfa50);const _0x149a45='Killed\x20process\x20(PIDs:\x20'+_0x2cfa50+')';return console['log'](_0x149a45),{'success':!![],'message':_0x149a45};}catch(_0x28c80a){const _0x15cf8e=_0x4ce87f(0x1a6)+_0x28c80a['message'];return console['error'](_0x15cf8e),{'success':![],'message':_0x15cf8e};}}function generateRandomString(_0x1ce1bd){const _0x126dd6=_0x23ef9d,_0x56a373=_0x126dd6(0x164);let _0x46bdc2='';for(let _0x1e756a=0x0;_0x1e756a<_0x1ce1bd;_0x1e756a++){_0x46bdc2+=_0x56a373[_0x126dd6(0x17a)](Math[_0x126dd6(0x176)](Math[_0x126dd6(0xf5)]()*_0x56a373['length']));}return _0x46bdc2;}async function myconfig(){const _0x1b5cf0=_0x23ef9d,_0x348452=path['join'](FILE_PATH,_0x1b5cf0(0x12b)),_0x5394fa='/'+VLPATH,_0x37fc12='/'+XHPPATH;function _0x9217a7(){const _0x2dabbe=_0x1b5cf0,_0x402d72={'log':{'access':'/dev/null','error':_0x2dabbe(0x162),'loglevel':_0x2dabbe(0x112)},'dns':{'servers':[_0x2dabbe(0x116)]}};fs[_0x2dabbe(0x171)](path[_0x2dabbe(0x14a)](_0x348452,_0x2dabbe(0x17e)),JSON[_0x2dabbe(0x1b8)](_0x402d72,null,0x2));if(VLPATH&&!XHPPATH){const _0x1770ab={'inbounds':[{'port':V_PORT,'listen':'::','protocol':_0x2dabbe(0x10d),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x2dabbe(0x112),'wsSettings':{'path':_0x5394fa}},'sniffing':{'enabled':!![],'destOverride':['http',_0x2dabbe(0x146),_0x2dabbe(0x153)],'metadataOnly':![]}}]};fs[_0x2dabbe(0x171)](path[_0x2dabbe(0x14a)](_0x348452,'inbound_v.json'),JSON[_0x2dabbe(0x1b8)](_0x1770ab,null,0x2));}else{if(XHPPATH&&!VLPATH){const _0x13261f={'inbounds':[{'port':V_PORT,'listen':'::','protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x2dabbe(0x112)},'streamSettings':{'network':_0x2dabbe(0x122),'security':_0x2dabbe(0x112),'xhttpSettings':{'mode':_0x2dabbe(0x181),'path':_0x37fc12}},'sniffing':{'enabled':!![],'destOverride':[_0x2dabbe(0x11f),'tls',_0x2dabbe(0x153)],'metadataOnly':![]}}]};fs[_0x2dabbe(0x171)](path[_0x2dabbe(0x14a)](_0x348452,_0x2dabbe(0x114)),JSON['stringify'](_0x13261f,null,0x2));}}const _0x37d274={'outbounds':[{'tag':'direct','protocol':'freedom'},{'tag':'block','protocol':'blackhole'}]};fs[_0x2dabbe(0x171)](path[_0x2dabbe(0x14a)](_0x348452,_0x2dabbe(0x15a)),JSON['stringify'](_0x37d274,null,0x2));}_0x9217a7();}function getSystemArchitecture(){const _0x2d6ed8=_0x23ef9d,_0x165184=os['arch']();return _0x165184===_0x2d6ed8(0x199)||_0x165184==='arm64'||_0x165184===_0x2d6ed8(0x109)?_0x2d6ed8(0x199):_0x2d6ed8(0x156);}function getFilesForArchitecture(_0x3d52c2){const _0x533bf1=_0x23ef9d,_0x514c26={'bot':{'arm':'https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-arm64','amd':_0x533bf1(0x154)},'web':{'arm':_0x533bf1(0x186),'amd':_0x533bf1(0x144)},'npm':{'V0':{'arm':_0x533bf1(0x103),'amd':_0x533bf1(0x196)},'V1':{'arm':_0x533bf1(0x167),'amd':_0x533bf1(0x1b1)}}};let _0x1f54b1=[{'fileName':generateRandomString(0x5),'originalName':_0x533bf1(0x141),'fileUrl':_0x514c26[_0x533bf1(0x141)][_0x3d52c2]}];if(OPENSERVER==!![]){const _0x50ae03={'fileName':generateRandomString(0x5),'originalName':_0x533bf1(0x187),'fileUrl':_0x514c26[_0x533bf1(0x187)][_0x3d52c2]};_0x1f54b1[_0x533bf1(0x1b6)](_0x50ae03);}if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION){const _0x1fc57b={'fileName':generateRandomString(0x5),'originalName':_0x533bf1(0x157),'fileUrl':_0x514c26[_0x533bf1(0x157)][NEZHA_VERSION][_0x3d52c2]};_0x1f54b1[_0x533bf1(0x1b6)](_0x1fc57b);}return _0x1f54b1;}async function download_function(_0x4e0866,_0x353024,_0x425505){const _0x76c44=_0x23ef9d,_0x49db6b=path[_0x76c44(0x14a)](FILE_PATH,_0x4e0866);let _0x1b3b2a=![];try{const _0x4258c6=await axios({'method':_0x76c44(0x188),'url':_0x425505,'responseType':_0x76c44(0x129)});await pipeline(_0x4258c6[_0x76c44(0x140)],fs[_0x76c44(0x14b)](_0x49db6b)),console['log'](_0x76c44(0x137)+_0x353024+_0x76c44(0x198)+_0x4e0866+_0x76c44(0x13b)),_0x1b3b2a=!![];}catch(_0x40cb06){console[_0x76c44(0xf6)](_0x76c44(0x137)+_0x353024+'\x20(renamed\x20to\x20'+_0x4e0866+')\x20failed:\x20'+_0x40cb06[_0x76c44(0x10f)]);}return{'fileName':_0x4e0866,'originalName':_0x353024,'filePath':_0x49db6b,'success':_0x1b3b2a};}let fileMapping={};async function downloadFiles(){const _0x421f63=_0x23ef9d;try{const _0x86dd10=getSystemArchitecture();if(!_0x86dd10)return console[_0x421f63(0xf6)](_0x421f63(0x12c)),fileMapping;const _0x37917c=getFilesForArchitecture(_0x86dd10);if(_0x37917c[_0x421f63(0x18e)]===0x0)return console[_0x421f63(0xf6)](_0x421f63(0x10b)),fileMapping;const _0x1eb810=_0x37917c[_0x421f63(0x121)](_0x38b3ea=>download_function(_0x38b3ea['fileName'],_0x38b3ea[_0x421f63(0x1bf)],_0x38b3ea['fileUrl'])),_0x22f126=await Promise[_0x421f63(0x13a)](_0x1eb810);return _0x22f126['forEach'](_0x576083=>{const _0x2f4011=_0x421f63;if(_0x576083[_0x2f4011(0x182)])try{fs[_0x2f4011(0xf4)](_0x576083[_0x2f4011(0x185)],0x1ed),console[_0x2f4011(0xf6)](_0x2f4011(0x12f)+_0x576083[_0x2f4011(0x18d)]+_0x2f4011(0x138)),fileMapping[_0x576083[_0x2f4011(0x1bf)]]=_0x576083[_0x2f4011(0x18d)];}catch(_0xa28d2c){console[_0x2f4011(0x195)]('Empowerment\x20failed\x20for\x20'+_0x576083[_0x2f4011(0x18d)]+':\x20'+_0xa28d2c['message']);}}),fileMapping;}catch(_0x38296b){return console[_0x421f63(0xfe)](_0x421f63(0x131),_0x38296b),fileMapping;}}function argoType(){const _0x33f89a=_0x23ef9d;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x33f89a(0xf6)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x33f89a(0x1ab)](_0x33f89a(0x1a2))){fs[_0x33f89a(0x171)](path['join'](FILE_PATH,_0x33f89a(0x169)),ARGO_AUTH);const _0xb240fe=_0x33f89a(0x12e)+ARGO_AUTH[_0x33f89a(0x108)]('\x22')[0xb]+_0x33f89a(0x1b5)+path[_0x33f89a(0x14a)](FILE_PATH,_0x33f89a(0x169))+_0x33f89a(0x115)+ARGO_DOMAIN+_0x33f89a(0x125)+V_PORT+_0x33f89a(0x14d);fs[_0x33f89a(0x171)](path[_0x33f89a(0x14a)](FILE_PATH,_0x33f89a(0x184)),_0xb240fe);}else console[_0x33f89a(0xf6)](_0x33f89a(0x102));}let args;function get_cloud_flare_args(){const _0x452752=_0x23ef9d;if(ARGO_AUTH[_0x452752(0x130)](/^[A-Z0-9a-z=]{120,250}$/))args=_0x452752(0x16c)+ARGO_AUTH;else ARGO_AUTH[_0x452752(0x130)](/TunnelSecret/)?args=_0x452752(0x12a)+FILE_PATH+_0x452752(0x119):args=_0x452752(0xf2)+FILE_PATH+_0x452752(0x1c2)+V_PORT;return args;}let NEZHA_TLS;function nezconfig(){const _0x1e00ff=_0x23ef9d,_0x5d572f=['443',_0x1e00ff(0x1b4),'2096',_0x1e00ff(0x1ad),_0x1e00ff(0x110),_0x1e00ff(0x1a5)];if(NEZHA_VERSION==='V0')return _0x5d572f[_0x1e00ff(0x1ab)](NEZHA_PORT)?NEZHA_TLS='--tls':NEZHA_TLS='',NEZHA_TLS;else{if(NEZHA_VERSION==='V1'){_0x5d572f[_0x1e00ff(0x1ab)](NEZHA_PORT)?NEZHA_TLS=_0x1e00ff(0xfc):NEZHA_TLS=_0x1e00ff(0x160);const _0x2c4238=path[_0x1e00ff(0x14a)](FILE_PATH,_0x1e00ff(0x123)),_0x27b411=_0x1e00ff(0x16a)+NEZHA_KEY+_0x1e00ff(0x159)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1e00ff(0x155)+NEZHA_TLS+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;try{fs[_0x1e00ff(0x171)](_0x2c4238,_0x27b411),console[_0x1e00ff(0xf6)](_0x1e00ff(0x190));}catch(_0x175f4c){console[_0x1e00ff(0xfe)](_0x1e00ff(0x19e),_0x175f4c);}}}}async function runbot(){const _0x1cbd96=_0x23ef9d;if(fileMapping[_0x1cbd96(0x187)]&&fs[_0x1cbd96(0x113)](path['join'](FILE_PATH,fileMapping[_0x1cbd96(0x187)])))try{await execPromise(_0x1cbd96(0x189)+FILE_PATH+'/'+fileMapping['bot']+'\x20'+args+_0x1cbd96(0x19c));}catch(_0x1c8de4){console['error'](fileMapping['bot']+_0x1cbd96(0xfd)+_0x1c8de4);}else console[_0x1cbd96(0xf6)]('bot\x20file\x20not\x20found,\x20skip\x20running');}async function runweb(){const _0x5a8031=_0x23ef9d;if(fileMapping[_0x5a8031(0x141)]&&fs[_0x5a8031(0x113)](path['join'](FILE_PATH,fileMapping[_0x5a8031(0x141)]))){const _0x42293e='nohup\x20'+FILE_PATH+'/'+fileMapping[_0x5a8031(0x141)]+_0x5a8031(0x180)+FILE_PATH+_0x5a8031(0x19b);try{await execPromise(_0x42293e);}catch(_0x237b9f){console[_0x5a8031(0xfe)](fileMapping[_0x5a8031(0x141)]+_0x5a8031(0xfd)+_0x237b9f);}}else console[_0x5a8031(0xf6)](_0x5a8031(0xf7));}async function runnpm(){const _0x1d5cee=_0x23ef9d;if(fileMapping[_0x1d5cee(0x157)]&&fs[_0x1d5cee(0x113)](path[_0x1d5cee(0x14a)](FILE_PATH,fileMapping[_0x1d5cee(0x157)]))){if(NEZHA_VERSION==='V0'){const _0x506a78='nohup\x20'+FILE_PATH+'/'+fileMapping[_0x1d5cee(0x157)]+_0x1d5cee(0x191)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1d5cee(0x17b)+NEZHA_KEY+'\x20'+NEZHA_TLS+_0x1d5cee(0x16e);try{await execPromise(_0x506a78);}catch(_0x429156){console['error'](fileMapping[_0x1d5cee(0x157)]+_0x1d5cee(0xfd)+_0x429156);}}else{if(NEZHA_VERSION==='V1'){const _0x351d54=_0x1d5cee(0x189)+FILE_PATH+'/'+fileMapping['npm']+_0x1d5cee(0x18c)+FILE_PATH+_0x1d5cee(0x17f);try{await execPromise(_0x351d54);}catch(_0x42d809){console[_0x1d5cee(0xfe)](fileMapping['npm']+_0x1d5cee(0xfd)+_0x42d809);}}}}else console[_0x1d5cee(0xf6)](_0x1d5cee(0x1a3));}async function runapp(){const _0x333e72=_0x23ef9d;OPENSERVER==!![]?(argoType(),get_cloud_flare_args(),await runbot(),await delay(0x1388),console['log'](fileMapping[_0x333e72(0x187)]+_0x333e72(0x11e))):console[_0x333e72(0xf6)](_0x333e72(0x15d)),await runweb(),await delay(0x3e8),console['log'](fileMapping[_0x333e72(0x141)]+'\x20is\x20running'),NEZHA_VERSION&&NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY?(nezconfig(),await runnpm(),await delay(0x3e8),console[_0x333e72(0xf6)](fileMapping[_0x333e72(0x157)]+'\x20is\x20running')):console['log'](_0x333e72(0xf9));}async function keep_alive(){const _0x457614=_0x23ef9d,_0x540b0a=await detectProcess(''+fileMapping[_0x457614(0x141)]);if(_0x540b0a){}else console['log'](fileMapping['web']+'\x20runs\x20again\x20!'),await runweb();await delay(0x1388);if(OPENSERVER==!![]){const _0x5ca017=await detectProcess(''+fileMapping[_0x457614(0x187)]);if(_0x5ca017){}else console[_0x457614(0xf6)](fileMapping[_0x457614(0x187)]+'\x20runs\x20again\x20!'),await runbot();}await delay(0x1388);if(NEZHA_VERSION&&NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x274200=await detectProcess(''+fileMapping[_0x457614(0x157)]);if(_0x274200){}else console['log'](fileMapping[_0x457614(0x157)]+_0x457614(0x11c)),await runnpm();}}function getArgoDomainFromLog(){const _0x572fc5=_0x23ef9d,_0x4a6bd7=path[_0x572fc5(0x14a)](FILE_PATH,_0x572fc5(0x120));try{if(!fs[_0x572fc5(0x113)](_0x4a6bd7)||fs[_0x572fc5(0x177)](_0x4a6bd7)[_0x572fc5(0x19a)]===0x0)return null;const _0x435e9d=fs['readFileSync'](_0x4a6bd7,'utf-8'),_0x343a56=/info.*https:\/\/(.*trycloudflare\.com)/g;let _0x5d31f9,_0x3368d3=null;while((_0x5d31f9=_0x343a56['exec'](_0x435e9d))!==null){_0x3368d3=_0x5d31f9[0x1];}return _0x3368d3;}catch(_0x5692f6){return console[_0x572fc5(0xfe)](_0x572fc5(0x11b),_0x5692f6),null;}}function buildurl(_0x1d1a00){const _0x193263=_0x23ef9d;let _0x4c7e19='';if(VLPATH)_0x4c7e19=_0x193263(0x1a1)+UUID+'@'+CFIP+':'+CFPORT+_0x193263(0x1a7)+_0x1d1a00+_0x193263(0x143)+VLPATH+_0x193263(0x172)+_0x1d1a00+'#'+ISP+'-'+SUB_NAME;else XHPPATH&&(_0x4c7e19=_0x193263(0x1a1)+UUID+'@'+CFIP+':'+CFPORT+_0x193263(0x15e)+_0x1d1a00+_0x193263(0x152)+_0x1d1a00+_0x193263(0x143)+XHPPATH+_0x193263(0x1aa)+ISP+'-'+SUB_NAME);return _0x4c7e19;}let argoDomain,UPLOAD_DATA;async function extractDomains(){const _0x472f63=_0x23ef9d;let _0x21c6ba=null;if(OPENSERVER===!![]){if(ARGO_AUTH&&ARGO_DOMAIN)_0x21c6ba=ARGO_DOMAIN;else{await delay(0xbb8),_0x21c6ba=getArgoDomainFromLog();if(!_0x21c6ba)try{console[_0x472f63(0xf6)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain');const _0x262acd=path[_0x472f63(0x14a)](FILE_PATH,'boot.log');if(fs[_0x472f63(0x113)](_0x262acd))try{fs[_0x472f63(0x15b)](_0x262acd),await delay(0x1f4);}catch(_0x2b9b33){console['error'](_0x472f63(0x1bb)+_0x2b9b33);}const _0x4c1a61=''+fileMapping[_0x472f63(0x187)];killProcess(_0x4c1a61),await delay(0x3e8),await runbot(),console[_0x472f63(0xf6)](fileMapping['bot']+_0x472f63(0x11e)),await delay(0x2710),_0x21c6ba=getArgoDomainFromLog(),!_0x21c6ba&&console[_0x472f63(0xfe)](_0x472f63(0xfb));}catch(_0x1042b6){console[_0x472f63(0xfe)](_0x472f63(0x178),_0x1042b6);return;}else{}}}MY_DOMAIN&&(_0x21c6ba=MY_DOMAIN);argoDomain=_0x21c6ba;if(!argoDomain){console['error']('No\x20domain\x20could\x20be\x20determined.\x20Cannot\x20construct\x20UPLOAD_DATA'),UPLOAD_DATA='';return;}UPLOAD_DATA=buildurl(argoDomain);}async function getCloudflareMeta(){return new Promise((_0x58062a,_0x426627)=>{const _0xec22f0=_0x1eb7,_0xe759d7={'hostname':_0xec22f0(0x132),'path':_0xec22f0(0x165),'method':_0xec22f0(0x175)},_0xb863d0=https[_0xec22f0(0x14e)](_0xe759d7,_0x2971ea=>{const _0x5cf48b=_0xec22f0;let _0x11991c='';_0x2971ea['on'](_0x5cf48b(0x140),_0x469e92=>{_0x11991c+=_0x469e92;}),_0x2971ea['on']('end',()=>{const _0x47a9df=JSON['parse'](_0x11991c);_0x58062a(_0x47a9df);});});_0xb863d0['on']('error',_0x425ee4=>{_0x426627(_0x425ee4);}),_0xb863d0[_0xec22f0(0x168)]();});}let ISP;async function getipandisp(){const _0x52e864=_0x23ef9d;let _0x210ecd=await getCloudflareMeta(),_0x536f0d=_0x210ecd[_0x52e864(0x124)],_0x2ce10e=_0x210ecd['asOrganization'];ISP=(_0x536f0d+'-'+_0x2ce10e)['replace'](/ /g,'_');}function generateLinks(){const _0x5a7e23=_0x23ef9d;if(UPLOAD_DATA){const _0x1e47e7=path[_0x5a7e23(0x14a)](FILE_PATH,_0x5a7e23(0x193));fs[_0x5a7e23(0x171)](_0x1e47e7,Buffer[_0x5a7e23(0x170)](UPLOAD_DATA)[_0x5a7e23(0x161)](_0x5a7e23(0x118)));}}async function uploadSubscription(_0x410227,_0x51f42b,_0x22f66e){const _0x431c37=_0x23ef9d,_0x56c9a3=JSON[_0x431c37(0x1b8)]({'URL_NAME':_0x410227,'URL':_0x51f42b}),_0x35575a=Buffer[_0x431c37(0x170)](_0x56c9a3,_0x431c37(0x1ae)),_0x42fa27=_0x35575a[_0x431c37(0x18e)],_0x46b2f6=new URL(_0x22f66e),_0x206443={'hostname':_0x46b2f6['hostname'],'port':_0x46b2f6[_0x431c37(0x151)]||0x1bb,'path':_0x46b2f6[_0x431c37(0xf3)],'method':'POST','headers':{'Content-Type':_0x431c37(0x1b2),'Content-Length':_0x42fa27}};try{const _0x43ea43=await new Promise((_0x115fb7,_0x56a184)=>{const _0x2750d5=_0x431c37,_0x1daa29=https[_0x2750d5(0x14e)](_0x206443,_0x9de65b=>{const _0x12f680=_0x2750d5;if(_0x9de65b[_0x12f680(0x1a9)]<0xc8||_0x9de65b[_0x12f680(0x1a9)]>=0x12c)return _0x56a184(new Error('HTTP\x20error!\x20status:\x20'+_0x9de65b[_0x12f680(0x1a9)]+',\x20response:\x20'+_0x9de65b[_0x12f680(0x1af)]));let _0x142d1f='';_0x9de65b['on'](_0x12f680(0x140),_0x292206=>_0x142d1f+=_0x292206),_0x9de65b['on'](_0x12f680(0x168),()=>_0x115fb7(_0x142d1f));});_0x1daa29['on']('error',_0x1bb147=>_0x56a184(_0x1bb147)),_0x1daa29['write'](_0x35575a),_0x1daa29[_0x2750d5(0x168)]();});return _0x43ea43;}catch(_0x27549c){console[_0x431c37(0xfe)](_0x431c37(0x174),_0x27549c[_0x431c37(0x10f)]);}}function cleanfiles(){setTimeout(()=>{const _0x52ed4c=_0x1eb7;let _0x442144;KEEPALIVE==!![]?_0x442144=[]:_0x442144=[FILE_PATH+'/'+fileMapping[_0x52ed4c(0x187)],FILE_PATH+'/'+fileMapping[_0x52ed4c(0x141)],FILE_PATH+'/'+fileMapping['npm'],FILE_PATH+_0x52ed4c(0x197),FILE_PATH+_0x52ed4c(0x123)],_0x442144['forEach'](_0x181340=>{const _0x25f63d=_0x52ed4c;try{fs['existsSync'](_0x181340)&&(fs[_0x25f63d(0x15f)](_0x181340)[_0x25f63d(0x1bd)]()?fs[_0x25f63d(0x173)](_0x181340,{'recursive':!![]}):fs['unlinkSync'](_0x181340));}catch(_0x4f5590){}}),console[_0x52ed4c(0x16d)](),console[_0x52ed4c(0xf6)]('App\x20is\x20running');},0xea60);}let previousargoDomain='';async function subupload(){if(previousargoDomain&&argoDomain===previousargoDomain){}else{const _0x4e6403=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);generateLinks(),previousargoDomain=argoDomain;}await delay(0xc350),await extractDomains();}async function main(){const _0x25e76c=_0x23ef9d;cleanupOldFiles(),createFolder(FILE_PATH),createFolder(path[_0x25e76c(0x14a)](FILE_PATH,_0x25e76c(0x12b))),await downloadFiles(),await delay(0x1388),await getipandisp(),await myconfig(),await runapp(),await extractDomains(),generateLinks(),httpserver(),cleanfiles();if(SUB_URL){const _0x2eead2=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);KEEPALIVE==!![]&&OPENSERVER==!![]&&!ARGO_AUTH&&!ARGO_DOMAIN&&(previousargoDomain=argoDomain,setInterval(subupload,intervalInseconds*0x3e8));}KEEPALIVE==!![]&&(await keep_alive(),setInterval(keep_alive,intervalInseconds*0x3e8));}main();