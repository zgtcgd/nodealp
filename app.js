const _0x1435ad=_0x4c27;(function(_0xa79c47,_0x475961){const _0x1f07c1=_0x4c27,_0x15d9ef=_0xa79c47();while(!![]){try{const _0x50c1c8=-parseInt(_0x1f07c1(0x109))/0x1*(parseInt(_0x1f07c1(0xe9))/0x2)+-parseInt(_0x1f07c1(0x154))/0x3*(parseInt(_0x1f07c1(0x10b))/0x4)+-parseInt(_0x1f07c1(0x1a4))/0x5*(parseInt(_0x1f07c1(0x177))/0x6)+parseInt(_0x1f07c1(0x161))/0x7*(parseInt(_0x1f07c1(0x18d))/0x8)+-parseInt(_0x1f07c1(0x168))/0x9+-parseInt(_0x1f07c1(0x193))/0xa*(-parseInt(_0x1f07c1(0x15e))/0xb)+parseInt(_0x1f07c1(0x124))/0xc*(parseInt(_0x1f07c1(0x11c))/0xd);if(_0x50c1c8===_0x475961)break;else _0x15d9ef['push'](_0x15d9ef['shift']());}catch(_0x34e11b){_0x15d9ef['push'](_0x15d9ef['shift']());}}}(_0x3e60,0x60fc3));const FILE_PATH=process[_0x1435ad(0x176)][_0x1435ad(0xea)]||_0x1435ad(0x160),intervalInseconds=process['env']['TIME']||0x64,CFIP=process[_0x1435ad(0x176)][_0x1435ad(0x165)]||'ip.sb',CFPORT=process[_0x1435ad(0x176)][_0x1435ad(0x13f)]||_0x1435ad(0x150),delay=_0x1bc792=>new Promise(_0x37dded=>setTimeout(_0x37dded,_0x1bc792)),OPENSERVER=process[_0x1435ad(0x176)][_0x1435ad(0x145)]||!![],KEEPALIVE=process[_0x1435ad(0x176)][_0x1435ad(0x11e)]||![],MY_DOMAIN=process[_0x1435ad(0x176)][_0x1435ad(0xf3)]||'',ARGO_DOMAIN=process[_0x1435ad(0x176)][_0x1435ad(0x19c)]||'',ARGO_AUTH=process[_0x1435ad(0x176)]['ARGO_AUTH']||'',VLPATH=process['env'][_0x1435ad(0x128)]||'',XHPPATH=process[_0x1435ad(0x176)][_0x1435ad(0x11f)]||'',PORT=process[_0x1435ad(0x176)][_0x1435ad(0x174)]||process['env'][_0x1435ad(0xe7)]||0xbb8,V_PORT=process[_0x1435ad(0x176)][_0x1435ad(0x169)]||0x1f90,UUID=process['env'][_0x1435ad(0x122)]||'',NEZHA_VERSION=process[_0x1435ad(0x176)][_0x1435ad(0x108)]||'V0',NEZHA_SERVER=process[_0x1435ad(0x176)][_0x1435ad(0x144)]||'',NEZHA_PORT=process[_0x1435ad(0x176)][_0x1435ad(0x19f)]||'443',NEZHA_KEY=process[_0x1435ad(0x176)]['NEZHA_KEY']||'',SUB_NAME=process['env'][_0x1435ad(0x139)]||'',SUB_URL=process[_0x1435ad(0x176)][_0x1435ad(0xf2)]||'',axios=require(_0x1435ad(0xfa)),{pipeline}=require(_0x1435ad(0x19e)),os=require('os'),fs=require('fs'),path=require('path'),http=require(_0x1435ad(0x187)),https=require('https'),exec=require('child_process')[_0x1435ad(0xf9)];function cleanupOldFiles(){const _0x5b0fda=_0x1435ad;try{fs[_0x5b0fda(0x114)](path['join'](FILE_PATH))?(fs[_0x5b0fda(0x102)](path[_0x5b0fda(0x135)](FILE_PATH),{'recursive':!![]}),console[_0x5b0fda(0x11b)](FILE_PATH+_0x5b0fda(0x11d))):console[_0x5b0fda(0x11b)](FILE_PATH+_0x5b0fda(0x192));}catch(_0x371740){console[_0x5b0fda(0x11b)](_0x5b0fda(0x152)+FILE_PATH);}}function createFolder(_0x3f4f02){const _0x34dcaf=_0x1435ad;!fs[_0x34dcaf(0x114)](_0x3f4f02)?(fs[_0x34dcaf(0x126)](_0x3f4f02),console[_0x34dcaf(0x11b)](_0x3f4f02+'\x20is\x20created')):console['log'](_0x3f4f02+_0x34dcaf(0xfc));}function httpserver(){const _0x2e5bd2=_0x1435ad,_0x4db35c=http['createServer']((_0x2b39a0,_0x51c662)=>{const _0x18e93c=_0x4c27;if(_0x2b39a0['url']==='/')_0x51c662['writeHead'](0xc8),_0x51c662['end'](_0x18e93c(0x111));else{if(_0x2b39a0[_0x18e93c(0x180)]===_0x18e93c(0x12d)){const _0x16293c=FILE_PATH+_0x18e93c(0x185);fs[_0x18e93c(0x10e)](_0x16293c,_0x18e93c(0xec),(_0x345e35,_0x4ccfda)=>{const _0x3573ac=_0x18e93c;_0x345e35?(_0x51c662['writeHead'](0x1f4),_0x51c662['end'](_0x3573ac(0x15b))):(_0x51c662[_0x3573ac(0x16b)](0xc8,{'Content-Type':_0x3573ac(0x17b)}),_0x51c662['end'](_0x4ccfda));});}else _0x51c662['writeHead'](0x194),_0x51c662[_0x18e93c(0x163)]('Not\x20found');}});_0x4db35c[_0x2e5bd2(0x14d)](PORT,()=>{const _0x2acc34=_0x2e5bd2;console[_0x2acc34(0x11b)]('server\x20is\x20running\x20on\x20port\x20:\x20'+PORT);});}function execPromise(_0x4c833a,_0x8c476b={}){return new Promise((_0x436f51,_0x544a70)=>{const _0x2b7bb8=exec(_0x4c833a,_0x8c476b,(_0x44eb04,_0x3edfb7,_0xb544c8)=>{const _0x278244=_0x4c27;if(_0x44eb04){const _0x3ee580=new Error('Command\x20failed:\x20'+_0x44eb04[_0x278244(0x14e)]);_0x3ee580[_0x278244(0xff)]=_0x44eb04['code'],_0x3ee580[_0x278244(0x186)]=_0xb544c8[_0x278244(0x12c)](),_0x544a70(_0x3ee580);}else _0x436f51(_0x3edfb7['trim']());});});}async function detectProcess(_0x1688a1){const _0x3c3778=_0x1435ad,_0x10c425=[{'cmd':'pidof\x20\x22'+_0x1688a1+'\x22','name':_0x3c3778(0x125)},{'cmd':_0x3c3778(0x189)+_0x1688a1+'\x22','name':'pgrep'},{'cmd':_0x3c3778(0x14b)+_0x1688a1+'\x22\x20\x27$2\x20==\x20name\x20{print\x20$1}\x27','name':_0x3c3778(0x178)}];for(const _0x43d721 of _0x10c425){try{const _0x1eb305=await execPromise(_0x43d721[_0x3c3778(0x12b)]);if(_0x1eb305)return _0x1eb305[_0x3c3778(0x107)](/\n/g,'\x20')[_0x3c3778(0x12c)]();}catch(_0xc7bab8){_0xc7bab8[_0x3c3778(0xff)]!==0x7f&&_0xc7bab8[_0x3c3778(0xff)]!==0x1&&console[_0x3c3778(0x15f)](_0x3c3778(0x13e)+_0x43d721[_0x3c3778(0x151)]+_0x3c3778(0xfe),_0xc7bab8['message']);}}return'';}async function killProcess(_0x70711b){const _0x5990ce=_0x1435ad;console['log'](_0x5990ce(0x19a)+_0x70711b);try{const _0x1b4cb8=await detectProcess(_0x70711b);if(!_0x1b4cb8)return console[_0x5990ce(0x198)](_0x5990ce(0x173)+_0x70711b+'\x27\x20not\x20found'),{'success':!![],'message':_0x5990ce(0x16a)};await execPromise(_0x5990ce(0x17e)+_0x1b4cb8);const _0x3372ce=_0x5990ce(0xe6)+_0x1b4cb8+')';return console[_0x5990ce(0x11b)](_0x3372ce),{'success':!![],'message':_0x3372ce};}catch(_0x3618b4){const _0x5f245b=_0x5990ce(0x14f)+_0x3618b4[_0x5990ce(0x14e)];return console['error'](_0x5f245b),{'success':![],'message':_0x5f245b};}}function generateRandomString(_0x242d8d){const _0x1816af=_0x1435ad,_0x4fd7ee=_0x1816af(0x138);let _0x1c0b28='';for(let _0x485c9b=0x0;_0x485c9b<_0x242d8d;_0x485c9b++){_0x1c0b28+=_0x4fd7ee[_0x1816af(0x118)](Math['floor'](Math['random']()*_0x4fd7ee[_0x1816af(0x142)]));}return _0x1c0b28;}async function myconfig(){const _0x58b8cc=_0x1435ad,_0x28cb15=path[_0x58b8cc(0x135)](FILE_PATH,_0x58b8cc(0x119)),_0x4df3dc='/'+VLPATH,_0x453ec5='/'+XHPPATH;function _0x378298(){const _0x2e5f89=_0x58b8cc,_0xec731d={'log':{'access':_0x2e5f89(0x1a1),'error':_0x2e5f89(0x1a1),'loglevel':_0x2e5f89(0x149)},'dns':{'servers':['https+local://8.8.8.8/dns-query']}};fs[_0x2e5f89(0xed)](path[_0x2e5f89(0x135)](_0x28cb15,_0x2e5f89(0xfd)),JSON['stringify'](_0xec731d,null,0x2));if(VLPATH&&!XHPPATH){const _0x794a57={'inbounds':[{'port':V_PORT,'listen':'::','protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x2e5f89(0x149),'wsSettings':{'path':_0x4df3dc}},'sniffing':{'enabled':!![],'destOverride':[_0x2e5f89(0x187),_0x2e5f89(0x12f),_0x2e5f89(0x184)],'metadataOnly':![]}}]};fs[_0x2e5f89(0xed)](path[_0x2e5f89(0x135)](_0x28cb15,_0x2e5f89(0x15d)),JSON['stringify'](_0x794a57,null,0x2));}else{if(XHPPATH&&!VLPATH){const _0x4d80b9={'inbounds':[{'port':V_PORT,'listen':'::','protocol':_0x2e5f89(0x157),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x2e5f89(0x1a0),'security':_0x2e5f89(0x149),'xhttpSettings':{'mode':'packet-up','path':_0x453ec5}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x2e5f89(0x184)],'metadataOnly':![]}}]};fs[_0x2e5f89(0xed)](path[_0x2e5f89(0x135)](_0x28cb15,_0x2e5f89(0x15d)),JSON[_0x2e5f89(0x17d)](_0x4d80b9,null,0x2));}}const _0x174277={'outbounds':[{'tag':_0x2e5f89(0x171),'protocol':_0x2e5f89(0x16f)},{'tag':'block','protocol':_0x2e5f89(0x129)}]};fs[_0x2e5f89(0xed)](path['join'](_0x28cb15,_0x2e5f89(0x1a6)),JSON[_0x2e5f89(0x17d)](_0x174277,null,0x2));}_0x378298();}function getSystemArchitecture(){const _0x5aef1b=_0x1435ad,_0x21447b=os[_0x5aef1b(0x156)]();return _0x21447b===_0x5aef1b(0x104)||_0x21447b===_0x5aef1b(0x16d)||_0x21447b===_0x5aef1b(0x105)?'arm':_0x5aef1b(0x110);}function getFilesForArchitecture(_0x2b4f90){const _0x4241b3=_0x1435ad,_0x30148c={'bot':{'arm':'https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-arm64','amd':'https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64'},'web':{'arm':_0x4241b3(0x194),'amd':_0x4241b3(0x10a)},'npm':{'V0':{'arm':_0x4241b3(0x159),'amd':'https://github.com/kahunama/myfile/releases/download/main/nezha-agent'},'V1':{'arm':_0x4241b3(0x179),'amd':'https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1'}}};let _0x377be9=[{'fileName':generateRandomString(0x5),'originalName':'web','fileUrl':_0x30148c['web'][_0x2b4f90]}];if(OPENSERVER==!![]){const _0x10e515={'fileName':generateRandomString(0x5),'originalName':'bot','fileUrl':_0x30148c['bot'][_0x2b4f90]};_0x377be9[_0x4241b3(0x143)](_0x10e515);}if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION){const _0x35febc={'fileName':generateRandomString(0x5),'originalName':_0x4241b3(0x136),'fileUrl':_0x30148c[_0x4241b3(0x136)][NEZHA_VERSION][_0x2b4f90]};_0x377be9[_0x4241b3(0x143)](_0x35febc);}return _0x377be9;}async function download_function(_0x1b4bbc,_0xf2cfe,_0x77d4be){const _0x595226=_0x1435ad,_0x5e9702=path['join'](FILE_PATH,_0x1b4bbc);let _0x427b93=![];try{const _0x468966=await axios({'method':'get','url':_0x77d4be,'responseType':_0x595226(0x137)});await pipeline(_0x468966['data'],fs[_0x595226(0x13c)](_0x5e9702)),console[_0x595226(0x11b)]('Download\x20'+_0xf2cfe+'\x20(renamed\x20to\x20'+_0x1b4bbc+_0x595226(0x162)),_0x427b93=!![];}catch(_0x447e91){console[_0x595226(0x11b)](_0x595226(0x19b)+_0xf2cfe+_0x595226(0x197)+_0x1b4bbc+_0x595226(0x170)+_0x447e91[_0x595226(0x14e)]);}return{'fileName':_0x1b4bbc,'originalName':_0xf2cfe,'filePath':_0x5e9702,'success':_0x427b93};}let fileMapping={};async function downloadFiles(){const _0x2eb7a9=_0x1435ad;try{const _0x2380fc=getSystemArchitecture();if(!_0x2380fc)return console['log'](_0x2eb7a9(0x133)),fileMapping;const _0xcc4787=getFilesForArchitecture(_0x2380fc);if(_0xcc4787['length']===0x0)return console[_0x2eb7a9(0x11b)](_0x2eb7a9(0xf7)),fileMapping;const _0x30e527=_0xcc4787[_0x2eb7a9(0x164)](_0x3c103d=>download_function(_0x3c103d[_0x2eb7a9(0x120)],_0x3c103d[_0x2eb7a9(0x172)],_0x3c103d['fileUrl'])),_0x536a6f=await Promise[_0x2eb7a9(0x148)](_0x30e527);return _0x536a6f[_0x2eb7a9(0x113)](_0x46f295=>{const _0x44c4fa=_0x2eb7a9;if(_0x46f295[_0x44c4fa(0x181)])try{fs[_0x44c4fa(0x106)](_0x46f295['filePath'],0x1ed),console[_0x44c4fa(0x11b)](_0x44c4fa(0x18e)+_0x46f295[_0x44c4fa(0x120)]+_0x44c4fa(0x140)),fileMapping[_0x46f295[_0x44c4fa(0x172)]]=_0x46f295[_0x44c4fa(0x120)];}catch(_0x221263){console[_0x44c4fa(0x198)](_0x44c4fa(0x101)+_0x46f295[_0x44c4fa(0x120)]+':\x20'+_0x221263['message']);}}),fileMapping;}catch(_0x21aab8){return console[_0x2eb7a9(0x123)](_0x2eb7a9(0x13a),_0x21aab8),fileMapping;}}function argoType(){const _0x26b665=_0x1435ad;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x26b665(0x11b)](_0x26b665(0x103));return;}if(ARGO_AUTH['includes'](_0x26b665(0xf6))){fs[_0x26b665(0xed)](path['join'](FILE_PATH,_0x26b665(0x100)),ARGO_AUTH);const _0x32bb08='\x0a\x20\x20\x20\x20\x20\x20\x20\x20tunnel:\x20'+ARGO_AUTH[_0x26b665(0x199)]('\x22')[0xb]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20credentials-file:\x20'+path[_0x26b665(0x135)](FILE_PATH,_0x26b665(0x100))+_0x26b665(0x175)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+V_PORT+_0x26b665(0x167);fs['writeFileSync'](path['join'](FILE_PATH,'tunnel.yml'),_0x32bb08);}else console[_0x26b665(0x11b)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}let args;function get_cloud_flare_args(){const _0x34e9dd=_0x1435ad;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))args=_0x34e9dd(0x17a)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?args=_0x34e9dd(0xf5)+FILE_PATH+'/tunnel.yml\x20run':args='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x34e9dd(0x146)+V_PORT;return args;}let NEZHA_TLS;function nezconfig(){const _0x3a7983=_0x1435ad,_0x2baced=[_0x3a7983(0x150),_0x3a7983(0x153),_0x3a7983(0x12a),'2087',_0x3a7983(0x112),_0x3a7983(0x18b)];if(NEZHA_VERSION==='V0')return _0x2baced[_0x3a7983(0x19d)](NEZHA_PORT)?NEZHA_TLS=_0x3a7983(0x10d):NEZHA_TLS='',NEZHA_TLS;else{if(NEZHA_VERSION==='V1'){_0x2baced[_0x3a7983(0x19d)](NEZHA_PORT)?NEZHA_TLS='true':NEZHA_TLS=_0x3a7983(0x18f);const _0x1194fc=path[_0x3a7983(0x135)](FILE_PATH,'/config.yml'),_0x251865='client_secret:\x20'+NEZHA_KEY+_0x3a7983(0x115)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3a7983(0x17c)+NEZHA_TLS+_0x3a7983(0x13b)+UUID;try{fs[_0x3a7983(0xed)](_0x1194fc,_0x251865),console[_0x3a7983(0x11b)](_0x3a7983(0x14a));}catch(_0x405f8e){console['error'](_0x3a7983(0x15c),_0x405f8e);}}}}async function runbot(){const _0x1481cc=_0x1435ad;if(fileMapping[_0x1481cc(0x10f)]&&fs[_0x1481cc(0x114)](path[_0x1481cc(0x135)](FILE_PATH,fileMapping['bot'])))try{await execPromise(_0x1481cc(0x158)+FILE_PATH+'/'+fileMapping['bot']+'\x20'+args+_0x1481cc(0x182));}catch(_0x2cb2eb){console[_0x1481cc(0x123)](fileMapping[_0x1481cc(0x10f)]+'\x20running\x20error:\x20'+_0x2cb2eb);}else console[_0x1481cc(0x11b)](_0x1481cc(0x121));}async function runweb(){const _0x304813=_0x1435ad;if(fileMapping['web']&&fs['existsSync'](path['join'](FILE_PATH,fileMapping[_0x304813(0xef)]))){const _0xfe664d=_0x304813(0x158)+FILE_PATH+'/'+fileMapping[_0x304813(0xef)]+'\x20run\x20-confdir\x20'+FILE_PATH+'/xconf\x20>/dev/null\x202>&1\x20&';try{await execPromise(_0xfe664d);}catch(_0x309def){console['error'](fileMapping[_0x304813(0xef)]+'\x20running\x20error:\x20'+_0x309def);}}else console[_0x304813(0x11b)](_0x304813(0x196));}async function runnpm(){const _0x3eddf7=_0x1435ad;if(fileMapping[_0x3eddf7(0x136)]&&fs[_0x3eddf7(0x114)](path[_0x3eddf7(0x135)](FILE_PATH,fileMapping[_0x3eddf7(0x136)]))){if(NEZHA_VERSION==='V0'){const _0x4ab0ad=_0x3eddf7(0x158)+FILE_PATH+'/'+fileMapping[_0x3eddf7(0x136)]+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x3eddf7(0x191)+NEZHA_KEY+'\x20'+NEZHA_TLS+'\x20--report-delay=4\x20--skip-conn\x20--skip-procs\x20--disable-auto-update\x20>/dev/null\x202>&1\x20&';try{await execPromise(_0x4ab0ad);}catch(_0x1deffa){console[_0x3eddf7(0x123)](fileMapping[_0x3eddf7(0x136)]+_0x3eddf7(0x1a2)+_0x1deffa);}}else{if(NEZHA_VERSION==='V1'){const _0x1a9943=_0x3eddf7(0x158)+FILE_PATH+'/'+fileMapping[_0x3eddf7(0x136)]+'\x20-c\x20'+FILE_PATH+_0x3eddf7(0x16c);try{await execPromise(_0x1a9943);}catch(_0x220d04){console['error'](fileMapping['npm']+'\x20running\x20error:\x20'+_0x220d04);}}}}else console[_0x3eddf7(0x11b)](_0x3eddf7(0xe8));}async function runapp(){const _0x493ba5=_0x1435ad;OPENSERVER==!![]?(argoType(),get_cloud_flare_args(),await runbot(),await delay(0x1388),console[_0x493ba5(0x11b)](fileMapping[_0x493ba5(0x10f)]+'\x20is\x20running')):console[_0x493ba5(0x11b)](_0x493ba5(0xe5)),await runweb(),await delay(0x3e8),console[_0x493ba5(0x11b)](fileMapping[_0x493ba5(0xef)]+_0x493ba5(0xe4)),NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY?(nezconfig(),await runnpm(),await delay(0x3e8),console[_0x493ba5(0x11b)](fileMapping[_0x493ba5(0x136)]+_0x493ba5(0xe4))):console['log'](_0x493ba5(0x155));}async function keep_alive(){const _0x59da4c=_0x1435ad,_0x3b70ee=await detectProcess(''+fileMapping[_0x59da4c(0xef)]);if(_0x3b70ee){}else console['log'](fileMapping['web']+_0x59da4c(0x18a)),await runweb();await delay(0x1388);if(OPENSERVER==!![]){const _0x32b63d=await detectProcess(''+fileMapping['bot']);if(_0x32b63d){}else console[_0x59da4c(0x11b)](fileMapping[_0x59da4c(0x10f)]+_0x59da4c(0x18a)),await runbot();}await delay(0x1388);if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4174af=await detectProcess(''+fileMapping['npm']);if(_0x4174af){}else console['log'](fileMapping[_0x59da4c(0x136)]+_0x59da4c(0x18a)),await runnpm();}}async function getArgoDomainFromLog(){const _0x43fad7=_0x1435ad,_0xf1a287=path[_0x43fad7(0x135)](FILE_PATH,_0x43fad7(0x15a));try{if(!fs[_0x43fad7(0x114)](_0xf1a287)||fs[_0x43fad7(0x18c)](_0xf1a287)[_0x43fad7(0x1a5)]===0x0)return null;const _0x54309c=fs[_0x43fad7(0xf1)](_0xf1a287,_0x43fad7(0x127)),_0x112f33=/info.*https:\/\/(.*trycloudflare\.com)/g;let _0x488de4,_0xf13d38=null;while((_0x488de4=_0x112f33[_0x43fad7(0xf9)](_0x54309c))!==null){_0xf13d38=_0x488de4[0x1];}return _0xf13d38;}catch(_0x46b1c9){return console['error']('Error\x20reading\x20boot.log:',_0x46b1c9),null;}}function _0x3e60(){const _0x31d6be=['NEZHA_VERSION','377617GbjVaa','https://github.com/mytcgd/myfiles/releases/download/main/xray','70256FOzMii','data','--tls','readFile','bot','amd','hello\x20world','2083','forEach','existsSync','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','?encryption=none&security=tls&sni=','from','charAt','xconf','No\x20domain\x20could\x20be\x20determined.\x20Cannot\x20construct\x20UPLOAD_DATA','log','23282207MbLUsH','\x20deleted','KEEPALIVE','XHPPATH','fileName','bot\x20file\x20not\x20found,\x20skip\x20running','UUID','error','12wCCUMC','pidof','mkdirSync','utf-8','VLPATH','blackhole','2096','cmd','trim','/sub','log.txt','tls','port','&path=%2F','asOrganization','Can\x27t\x20determine\x20system\x20architecture.','write','join','npm','stream','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','SUB_NAME','Error\x20downloading\x20files:','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','createWriteStream','lstatSync','[detectProcess]\x20','CFPORT',':\x20755','statusCode','length','push','NEZHA_SERVER','OPENSERVER','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','/xconf','all','none','config.yml\x20file\x20created\x20and\x20written\x20successfully.','ps\x20-eo\x20pid,comm\x20|\x20awk\x20-v\x20name=\x22','clear','listen','message','Kill\x20failed:\x20','443','name','unable\x20to\x20rm\x20','8443','87mZfGjJ','npm\x20variable\x20is\x20empty,\x20skip\x20running','arch','vless','nohup\x20','https://github.com/kahunama/myfile/releases/download/main/nezha-agent_arm','boot.log','Error\x20reading\x20file','Error\x20creating\x20or\x20writing\x20config.yml\x20file:','inbound_v.json','1947OfbFWn','debug','/tmp','119jATECA',')\x20successfully','end','map','CFIP','hostname','\x0a\x20\x20\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20\x20\x20\x20\x20\x20\x20','6679485IsBVYn','V_PORT','Process\x20not\x20found','writeHead','/config.yml\x20>/dev/null\x202>&1\x20&','arm64','%3Fed%3D2560&type=ws&encryption=none&security=tls&sni=','freedom',')\x20failed:\x20','direct','originalName','Process\x20\x27','PORT','\x0a\x20\x20\x20\x20\x20\x20\x20\x20protocol:\x20http2\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ingress:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20hostname:\x20','env','99558RGorKF','ps+awk','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1_arm','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','text/plain;\x20charset=utf-8','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','stringify','kill\x20-9\x20','upload\x20failed','url','success','\x20>/dev/null\x202>&1\x20&','isDirectory','quic','/log.txt','stderr','http','?host=','pgrep\x20-x\x20\x22','\x20runs\x20again\x20!','2053','statSync','192352YREmTG','Empowerment\x20success\x20for\x20','false','country','\x20-p\x20','\x20not\x20created','26770vuiPIB','https://github.com/mytcgd/myfiles/releases/download/main/xray_arm','request','web\x20file\x20not\x20found,\x20skip\x20running','\x20(renamed\x20to\x20','warn','split','Attempting\x20to\x20kill\x20process:\x20','Download\x20','ARGO_DOMAIN','includes','stream/promises','NEZHA_PORT','xhttp','/dev/null','\x20running\x20error:\x20','speed.cloudflare.com','195Qtnkvw','size','outbound.json','base64','\x20is\x20running','bot\x20is\x20not\x20allowed,\x20skip\x20running','Killed\x20process\x20(PIDs:\x20','SERVER_PORT','npm\x20file\x20not\x20found,\x20skip\x20running','2wZFlnS','FILE_PATH','/config.yml','utf8','writeFileSync','parse','web','vless://','readFileSync','SUB_URL','MY_DOMAIN','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','TunnelSecret','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','/meta','exec','axios','App\x20is\x20running','\x20already\x20exists','inbound.json','\x20error:','code','tunnel.json','Empowerment\x20failed\x20for\x20','rmSync','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','arm','aarch64','chmodSync','replace'];_0x3e60=function(){return _0x31d6be;};return _0x3e60();}async function manageBotProcess(){const _0x8f7b3a=_0x1435ad;console['log'](_0x8f7b3a(0xf4));const _0x207280=path['join'](FILE_PATH,_0x8f7b3a(0x15a));if(fs['existsSync'](_0x207280))try{fs['unlinkSync'](_0x207280),await delay(0x1f4);}catch(_0x5156be){console['error']('Error\x20deleting\x20boot.log:\x20'+_0x5156be);}const _0x1a0b76=''+fileMapping[_0x8f7b3a(0x10f)];killProcess(_0x1a0b76),await delay(0x3e8);const _0x11d812='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+_0x207280+'\x20--loglevel\x20info\x20--url\x20http://localhost:'+V_PORT,_0x5d05c1='nohup\x20'+FILE_PATH+'/'+fileMapping[_0x8f7b3a(0x10f)]+'\x20'+_0x11d812+_0x8f7b3a(0x182);try{await execPromise(_0x5d05c1),console[_0x8f7b3a(0x11b)](fileMapping['bot']+_0x8f7b3a(0xe4));}catch(_0x1ae647){console[_0x8f7b3a(0x123)](fileMapping[_0x8f7b3a(0x10f)]+_0x8f7b3a(0x1a2)+_0x1ae647);}}function buildurl(_0x5c3178){const _0x2699a8=_0x1435ad;let _0x1712d8;if(VLPATH)_0x1712d8=_0x2699a8(0xf0)+UUID+'@'+CFIP+':'+CFPORT+_0x2699a8(0x188)+_0x5c3178+_0x2699a8(0x131)+VLPATH+_0x2699a8(0x16e)+_0x5c3178+'#'+ISP+'-'+SUB_NAME;else XHPPATH&&(_0x1712d8=_0x2699a8(0xf0)+UUID+'@'+CFIP+':'+CFPORT+_0x2699a8(0x116)+_0x5c3178+'&type=xhttp&host='+_0x5c3178+_0x2699a8(0x131)+XHPPATH+'%3Fed%3D2560&mode=packet-up#'+ISP+'-'+SUB_NAME);return _0x1712d8;}let argoDomain,UPLOAD_DATA;async function extractDomains(){const _0x4225fc=_0x1435ad;let _0x9b3863=null;if(OPENSERVER===!![]){if(ARGO_AUTH&&ARGO_DOMAIN)_0x9b3863=ARGO_DOMAIN;else{await delay(0xbb8),_0x9b3863=await getArgoDomainFromLog();if(!_0x9b3863)try{await manageBotProcess(),await delay(0x2710),_0x9b3863=await getArgoDomainFromLog(),!_0x9b3863&&console[_0x4225fc(0x123)]('Failed\x20to\x20obtain\x20ArgoDomain\x20even\x20after\x20restarting\x20bot.');}catch(_0x5b27ee){console[_0x4225fc(0x123)]('Error\x20in\x20bot\x20process\x20management:',_0x5b27ee);return;}else{}}}MY_DOMAIN&&(_0x9b3863=MY_DOMAIN);argoDomain=_0x9b3863;if(!argoDomain){console[_0x4225fc(0x123)](_0x4225fc(0x11a)),UPLOAD_DATA='';return;}UPLOAD_DATA=buildurl(argoDomain);}function _0x4c27(_0x3a327c,_0x307529){const _0x3e6046=_0x3e60();return _0x4c27=function(_0x4c27db,_0x1e5ba1){_0x4c27db=_0x4c27db-0xe4;let _0x1c280f=_0x3e6046[_0x4c27db];return _0x1c280f;},_0x4c27(_0x3a327c,_0x307529);}async function getCloudflareMeta(){return new Promise((_0x5a6d7c,_0x3c64b9)=>{const _0x18ff76=_0x4c27,_0x3b516f={'hostname':_0x18ff76(0x1a3),'path':_0x18ff76(0xf8),'method':'GET'},_0xe78b8=https[_0x18ff76(0x195)](_0x3b516f,_0x3d599f=>{const _0x543de7=_0x18ff76;let _0x321bd8='';_0x3d599f['on'](_0x543de7(0x10c),_0x4ac611=>{_0x321bd8+=_0x4ac611;}),_0x3d599f['on'](_0x543de7(0x163),()=>{const _0x4f79c8=_0x543de7,_0x3fa8c1=JSON[_0x4f79c8(0xee)](_0x321bd8);_0x5a6d7c(_0x3fa8c1);});});_0xe78b8['on']('error',_0x1a957b=>{_0x3c64b9(_0x1a957b);}),_0xe78b8['end']();});}let ISP;async function getipandisp(){const _0x4b2522=_0x1435ad;let _0x2960fc=await getCloudflareMeta(),_0x1afa83=_0x2960fc[_0x4b2522(0x190)],_0x454fcc=_0x2960fc[_0x4b2522(0x132)];ISP=(_0x1afa83+'-'+_0x454fcc)['replace'](/ /g,'_');}function generateLinks(){const _0x138b95=_0x1435ad;if(UPLOAD_DATA){const _0x39e58b=path['join'](FILE_PATH,_0x138b95(0x12e));fs[_0x138b95(0xed)](_0x39e58b,Buffer[_0x138b95(0x117)](UPLOAD_DATA)['toString'](_0x138b95(0x1a7)));}}async function uploadSubscription(_0x489db2,_0xcd98f,_0x15281f){const _0x3e192b=_0x1435ad,_0x36f4c9=JSON['stringify']({'URL_NAME':_0x489db2,'URL':_0xcd98f}),_0x2842de={'hostname':new URL(_0x15281f)[_0x3e192b(0x166)],'port':new URL(_0x15281f)[_0x3e192b(0x130)]||0x1bb,'path':new URL(_0x15281f)['pathname'],'method':'POST','headers':{'Content-Type':'application/json','Content-Length':_0x36f4c9[_0x3e192b(0x142)]}};try{const _0x49bf6f=await new Promise((_0x5db994,_0x323aad)=>{const _0x4225cc=_0x3e192b,_0x3ff06f=https[_0x4225cc(0x195)](_0x2842de,_0x3fe2c1=>{const _0x5f0ad0=_0x4225cc;if(_0x3fe2c1[_0x5f0ad0(0x141)]<0xc8||_0x3fe2c1[_0x5f0ad0(0x141)]>=0x12c)return _0x323aad(new Error('HTTP\x20error!\x20status:\x20'+_0x3fe2c1[_0x5f0ad0(0x141)]));let _0x584d11='';_0x3fe2c1['on'](_0x5f0ad0(0x10c),_0x199577=>_0x584d11+=_0x199577),_0x3fe2c1['on'](_0x5f0ad0(0x163),()=>_0x5db994(_0x584d11));});_0x3ff06f['on'](_0x4225cc(0x123),_0x27941b=>_0x323aad(_0x27941b)),_0x3ff06f[_0x4225cc(0x134)](_0x36f4c9),_0x3ff06f[_0x4225cc(0x163)]();});return _0x49bf6f;}catch(_0x35bbb2){console[_0x3e192b(0x123)](_0x3e192b(0x17f));}}function cleanfiles(){setTimeout(()=>{const _0xba33cc=_0x4c27;let _0x454310;KEEPALIVE==!![]?_0x454310=[]:_0x454310=[FILE_PATH+'/'+fileMapping['bot'],FILE_PATH+'/'+fileMapping[_0xba33cc(0xef)],FILE_PATH+'/'+fileMapping[_0xba33cc(0x136)],FILE_PATH+_0xba33cc(0x147),FILE_PATH+_0xba33cc(0xeb)],_0x454310['forEach'](_0x5df3f4=>{const _0x426d02=_0xba33cc;try{fs['existsSync'](_0x5df3f4)&&(fs[_0x426d02(0x13d)](_0x5df3f4)[_0x426d02(0x183)]()?fs[_0x426d02(0x102)](_0x5df3f4,{'recursive':!![]}):fs['unlinkSync'](_0x5df3f4));}catch(_0x29786d){}}),console[_0xba33cc(0x14c)](),console[_0xba33cc(0x11b)](_0xba33cc(0xfb));},0xea60);}let previousargoDomain='';async function subupload(){if(previousargoDomain&&argoDomain===previousargoDomain){}else{const _0x1f9053=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);generateLinks(),previousargoDomain=argoDomain;}await delay(0xc350),await extractDomains();}async function main(){const _0x479571=_0x1435ad;cleanupOldFiles(),createFolder(FILE_PATH),createFolder(path['join'](FILE_PATH,_0x479571(0x119))),await downloadFiles(),await delay(0x1388),await getipandisp(),await myconfig(),await runapp(),await extractDomains(),generateLinks(),httpserver(),cleanfiles();if(SUB_URL){const _0x5b7782=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);KEEPALIVE==!![]&&OPENSERVER==!![]&&!ARGO_AUTH&&!ARGO_DOMAIN&&(previousargoDomain=argoDomain,setInterval(subupload,intervalInseconds*0x3e8));}KEEPALIVE==!![]&&(await keep_alive(),setInterval(keep_alive,intervalInseconds*0x3e8));}main();