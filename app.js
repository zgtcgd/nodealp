const _0x3a56d5=_0x395e;(function(_0x3edf40,_0x43ce05){const _0x368683=_0x395e,_0x3f6d2c=_0x3edf40();while(!![]){try{const _0x24bf42=-parseInt(_0x368683(0x112))/0x1*(-parseInt(_0x368683(0x124))/0x2)+-parseInt(_0x368683(0xb8))/0x3+-parseInt(_0x368683(0xec))/0x4*(parseInt(_0x368683(0xa7))/0x5)+parseInt(_0x368683(0xef))/0x6+parseInt(_0x368683(0xa3))/0x7+-parseInt(_0x368683(0xb7))/0x8*(-parseInt(_0x368683(0x7a))/0x9)+-parseInt(_0x368683(0xc8))/0xa*(parseInt(_0x368683(0x127))/0xb);if(_0x24bf42===_0x43ce05)break;else _0x3f6d2c['push'](_0x3f6d2c['shift']());}catch(_0x917d0){_0x3f6d2c['push'](_0x3f6d2c['shift']());}}}(_0x1e6e,0x69b03));const FILE_PATH=process['env']['FILE_PATH']||_0x3a56d5(0x104),intervalInseconds=process['env'][_0x3a56d5(0x75)]||0x64,CFIP=process[_0x3a56d5(0x83)][_0x3a56d5(0x10c)]||_0x3a56d5(0xda),CFPORT=process[_0x3a56d5(0x83)][_0x3a56d5(0x72)]||_0x3a56d5(0x107),delay=_0x43367e=>new Promise(_0x4bce44=>setTimeout(_0x4bce44,_0x43367e)),OPENSERVER=process[_0x3a56d5(0x83)][_0x3a56d5(0x115)]||!![],KEEPALIVE=process[_0x3a56d5(0x83)]['KEEPALIVE']||![],MY_DOMAIN=process[_0x3a56d5(0x83)][_0x3a56d5(0x82)]||'',ARGO_DOMAIN=process[_0x3a56d5(0x83)][_0x3a56d5(0xac)]||'',ARGO_AUTH=process['env'][_0x3a56d5(0x8f)]||'',VLPATH=process[_0x3a56d5(0x83)][_0x3a56d5(0x136)]||'',XHPPATH=process[_0x3a56d5(0x83)][_0x3a56d5(0x10f)]||'',PORT=process[_0x3a56d5(0x83)]['PORT']||process['env'][_0x3a56d5(0x7d)]||0xbb8,V_PORT=process[_0x3a56d5(0x83)][_0x3a56d5(0xca)]||0x1f90,UUID=process[_0x3a56d5(0x83)][_0x3a56d5(0xb0)]||'',NEZHA_VERSION=process[_0x3a56d5(0x83)][_0x3a56d5(0x116)]||'V0',NEZHA_SERVER=process['env'][_0x3a56d5(0x123)]||'',NEZHA_PORT=process[_0x3a56d5(0x83)][_0x3a56d5(0x131)]||_0x3a56d5(0x107),NEZHA_KEY=process[_0x3a56d5(0x83)][_0x3a56d5(0xe3)]||'',SUB_NAME=process[_0x3a56d5(0x83)][_0x3a56d5(0xfd)]||'',SUB_URL=process[_0x3a56d5(0x83)]['SUB_URL']||'',axios=require(_0x3a56d5(0x114)),{pipeline}=require(_0x3a56d5(0x98)),os=require('os'),fs=require('fs'),path=require(_0x3a56d5(0x93)),http=require(_0x3a56d5(0x135)),https=require(_0x3a56d5(0x8e)),exec=require(_0x3a56d5(0xb2))[_0x3a56d5(0x110)];function cleanupOldFiles(){const _0x26b8e4=_0x3a56d5;try{fs[_0x26b8e4(0x73)](path['join'](FILE_PATH))?(fs['rmSync'](path[_0x26b8e4(0xaf)](FILE_PATH),{'recursive':!![]}),console[_0x26b8e4(0xc5)](FILE_PATH+_0x26b8e4(0xbd))):console[_0x26b8e4(0xc5)](FILE_PATH+'\x20not\x20created');}catch(_0x5b745b){console[_0x26b8e4(0xc5)](_0x26b8e4(0xeb)+FILE_PATH);}}function _0x395e(_0x2d2e05,_0x498fde){const _0x1e6e21=_0x1e6e();return _0x395e=function(_0x395eb8,_0x1a24ab){_0x395eb8=_0x395eb8-0x6d;let _0x328173=_0x1e6e21[_0x395eb8];return _0x328173;},_0x395e(_0x2d2e05,_0x498fde);}function createFolder(_0x102db8){const _0x3128b4=_0x3a56d5;!fs[_0x3128b4(0x73)](_0x102db8)?(fs[_0x3128b4(0xee)](_0x102db8),console['log'](_0x102db8+_0x3128b4(0x113))):console['log'](_0x102db8+'\x20already\x20exists');}function httpserver(){const _0x7a27ee=_0x3a56d5,_0x28e772=http[_0x7a27ee(0xb1)]((_0x22d3b9,_0x40c947)=>{const _0x59e6e1=_0x7a27ee;if(_0x22d3b9[_0x59e6e1(0x9b)]==='/')_0x40c947['writeHead'](0xc8),_0x40c947[_0x59e6e1(0x94)]('hello\x20world');else{if(_0x22d3b9[_0x59e6e1(0x9b)]===_0x59e6e1(0xff)){const _0x149e5e=FILE_PATH+_0x59e6e1(0xb9);fs[_0x59e6e1(0x126)](_0x149e5e,'utf8',(_0x17cb09,_0x36db63)=>{const _0x458373=_0x59e6e1;_0x17cb09?(_0x40c947[_0x458373(0x119)](0x1f4),_0x40c947[_0x458373(0x94)](_0x458373(0x8a))):(_0x40c947[_0x458373(0x119)](0xc8,{'Content-Type':'text/plain;\x20charset=utf-8'}),_0x40c947[_0x458373(0x94)](_0x36db63));});}else _0x40c947[_0x59e6e1(0x119)](0x194),_0x40c947['end'](_0x59e6e1(0xd1));}});_0x28e772['listen'](PORT,()=>{const _0x1e008b=_0x7a27ee;console[_0x1e008b(0xc5)]('server\x20is\x20running\x20on\x20port\x20:\x20'+PORT);});}function execPromise(_0x36c86f,_0x47916b={}){return new Promise((_0x531e37,_0x384c5f)=>{const _0x127b58=exec(_0x36c86f,_0x47916b,(_0xe800e9,_0x425afc,_0x1fa456)=>{const _0x46ea0b=_0x395e;if(_0xe800e9){const _0x3ac74b=new Error(_0x46ea0b(0xbe)+_0xe800e9['message']);_0x3ac74b[_0x46ea0b(0xc9)]=_0xe800e9[_0x46ea0b(0xc9)],_0x3ac74b[_0x46ea0b(0x87)]=_0x1fa456['trim'](),_0x384c5f(_0x3ac74b);}else _0x531e37(_0x425afc[_0x46ea0b(0xe6)]());});});}async function detectProcess(_0xd6895e){const _0x4ce204=_0x3a56d5,_0xe7e798=[{'cmd':_0x4ce204(0xfa)+_0xd6895e+'\x22','name':_0x4ce204(0xdc)},{'cmd':_0x4ce204(0xe7)+_0xd6895e+'\x22','name':'pgrep'},{'cmd':'ps\x20-eo\x20pid,comm\x20|\x20awk\x20-v\x20name=\x22'+_0xd6895e+_0x4ce204(0xb5),'name':_0x4ce204(0xf3)}];for(const _0x30b5cc of _0xe7e798){try{const _0x39b457=await execPromise(_0x30b5cc[_0x4ce204(0x102)]);if(_0x39b457)return _0x39b457[_0x4ce204(0xf6)](/\n/g,'\x20')[_0x4ce204(0xe6)]();}catch(_0x32d266){_0x32d266[_0x4ce204(0xc9)]!==0x7f&&_0x32d266[_0x4ce204(0xc9)]!==0x1&&console[_0x4ce204(0x92)](_0x4ce204(0x108)+_0x30b5cc[_0x4ce204(0x81)]+'\x20error:',_0x32d266[_0x4ce204(0x97)]);}}return'';}async function killProcess(_0x9ab4b9){const _0x5ce8c0=_0x3a56d5;console[_0x5ce8c0(0xc5)]('Attempting\x20to\x20kill\x20process:\x20'+_0x9ab4b9);try{const _0x14329b=await detectProcess(_0x9ab4b9);if(!_0x14329b)return console[_0x5ce8c0(0x134)](_0x5ce8c0(0x11a)+_0x9ab4b9+_0x5ce8c0(0xf9)),{'success':!![],'message':_0x5ce8c0(0x8d)};await execPromise('kill\x20-9\x20'+_0x14329b);const _0x7c7296='Killed\x20process\x20(PIDs:\x20'+_0x14329b+')';return console['log'](_0x7c7296),{'success':!![],'message':_0x7c7296};}catch(_0x5f2efb){const _0x8d14da=_0x5ce8c0(0x70)+_0x5f2efb[_0x5ce8c0(0x97)];return console[_0x5ce8c0(0xcd)](_0x8d14da),{'success':![],'message':_0x8d14da};}}function generateRandomString(_0x43dcce){const _0x9c8d33=_0x3a56d5,_0x7cb5ad='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';let _0x336e53='';for(let _0xed58f4=0x0;_0xed58f4<_0x43dcce;_0xed58f4++){_0x336e53+=_0x7cb5ad[_0x9c8d33(0xae)](Math[_0x9c8d33(0xa4)](Math[_0x9c8d33(0xf4)]()*_0x7cb5ad[_0x9c8d33(0x117)]));}return _0x336e53;}async function myconfig(){const _0x1a8092=path['join'](FILE_PATH,'xconf'),_0x99057f='/'+VLPATH,_0x131f5f='/'+XHPPATH;function _0x2afac6(){const _0xf74369=_0x395e,_0x3dd84a={'log':{'access':'/dev/null','error':_0xf74369(0x79),'loglevel':_0xf74369(0xfc)},'dns':{'servers':[_0xf74369(0x101)]}};fs[_0xf74369(0x122)](path[_0xf74369(0xaf)](_0x1a8092,_0xf74369(0xde)),JSON[_0xf74369(0x77)](_0x3dd84a,null,0x2));if(VLPATH&&!XHPPATH){const _0x27af3f={'inbounds':[{'port':V_PORT,'listen':'::','protocol':_0xf74369(0x129),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0xf74369(0xfc)},'streamSettings':{'network':'ws','security':_0xf74369(0xfc),'wsSettings':{'path':_0x99057f}},'sniffing':{'enabled':!![],'destOverride':[_0xf74369(0x135),_0xf74369(0xf7),_0xf74369(0xa2)],'metadataOnly':![]}}]};fs[_0xf74369(0x122)](path['join'](_0x1a8092,_0xf74369(0x96)),JSON[_0xf74369(0x77)](_0x27af3f,null,0x2));}else{if(XHPPATH&&!VLPATH){const _0x36c715={'inbounds':[{'port':V_PORT,'listen':'::','protocol':_0xf74369(0x129),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0xf74369(0xd0),'security':_0xf74369(0xfc),'xhttpSettings':{'mode':_0xf74369(0xd5),'path':_0x131f5f}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0xf74369(0xa2)],'metadataOnly':![]}}]};fs[_0xf74369(0x122)](path[_0xf74369(0xaf)](_0x1a8092,'inbound_v.json'),JSON['stringify'](_0x36c715,null,0x2));}}const _0x58c8af={'outbounds':[{'tag':'direct','protocol':_0xf74369(0x11c)},{'tag':_0xf74369(0xa9),'protocol':'blackhole'}]};fs[_0xf74369(0x122)](path['join'](_0x1a8092,'outbound.json'),JSON[_0xf74369(0x77)](_0x58c8af,null,0x2));}_0x2afac6();}function getSystemArchitecture(){const _0x637f73=_0x3a56d5,_0x44d7c0=os[_0x637f73(0xe0)]();return _0x44d7c0===_0x637f73(0xed)||_0x44d7c0==='arm64'||_0x44d7c0===_0x637f73(0x74)?'arm':_0x637f73(0x7f);}function getFilesForArchitecture(_0x519271){const _0x57b118=_0x3a56d5,_0x294ace={'bot':{'arm':_0x57b118(0x11e),'amd':'https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64'},'web':{'arm':_0x57b118(0xd7),'amd':_0x57b118(0x9a)},'npm':{'V0':{'arm':_0x57b118(0x71),'amd':_0x57b118(0xf2)},'V1':{'arm':_0x57b118(0x11b),'amd':_0x57b118(0xad)}}};let _0x18ec86=[{'fileName':generateRandomString(0x5),'originalName':'web','fileUrl':_0x294ace['web'][_0x519271]}];if(OPENSERVER==!![]){const _0x540cc6={'fileName':generateRandomString(0x5),'originalName':_0x57b118(0x106),'fileUrl':_0x294ace[_0x57b118(0x106)][_0x519271]};_0x18ec86['push'](_0x540cc6);}if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION){const _0x4c4c01={'fileName':generateRandomString(0x5),'originalName':_0x57b118(0x10a),'fileUrl':_0x294ace[_0x57b118(0x10a)][NEZHA_VERSION][_0x519271]};_0x18ec86[_0x57b118(0x12a)](_0x4c4c01);}return _0x18ec86;}async function download_function(_0x116f46,_0x406898,_0x3d3456){const _0x5c8603=_0x3a56d5,_0x5d8b2a=path[_0x5c8603(0xaf)](FILE_PATH,_0x116f46);let _0x483eac=![];try{const _0x575d65=await axios({'method':_0x5c8603(0x9e),'url':_0x3d3456,'responseType':'stream'});await pipeline(_0x575d65[_0x5c8603(0x133)],fs[_0x5c8603(0x7c)](_0x5d8b2a)),console[_0x5c8603(0xc5)](_0x5c8603(0x120)+_0x406898+_0x5c8603(0xdd)+_0x116f46+_0x5c8603(0xd3)),_0x483eac=!![];}catch(_0x5df69f){console[_0x5c8603(0xc5)](_0x5c8603(0x120)+_0x406898+_0x5c8603(0xdd)+_0x116f46+_0x5c8603(0x8c)+_0x5df69f['message']);}return{'fileName':_0x116f46,'originalName':_0x406898,'filePath':_0x5d8b2a,'success':_0x483eac};}let fileMapping={};async function downloadFiles(){const _0x3fda3d=_0x3a56d5;try{const _0x21f515=getSystemArchitecture();if(!_0x21f515)return console['log'](_0x3fda3d(0x128)),fileMapping;const _0x2ed58f=getFilesForArchitecture(_0x21f515);if(_0x2ed58f[_0x3fda3d(0x117)]===0x0)return console[_0x3fda3d(0xc5)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture'),fileMapping;const _0x57a41a=_0x2ed58f[_0x3fda3d(0x118)](_0x205f6e=>download_function(_0x205f6e[_0x3fda3d(0xd2)],_0x205f6e[_0x3fda3d(0xe2)],_0x205f6e[_0x3fda3d(0xd9)])),_0x5afce2=await Promise[_0x3fda3d(0x109)](_0x57a41a);return _0x5afce2[_0x3fda3d(0x84)](_0x55bcf4=>{const _0x1770a9=_0x3fda3d;if(_0x55bcf4['success'])try{fs['chmodSync'](_0x55bcf4[_0x1770a9(0xf5)],0x1ed),console[_0x1770a9(0xc5)](_0x1770a9(0x78)+_0x55bcf4[_0x1770a9(0xd2)]+_0x1770a9(0x6e)),fileMapping[_0x55bcf4[_0x1770a9(0xe2)]]=_0x55bcf4[_0x1770a9(0xd2)];}catch(_0x118268){console[_0x1770a9(0x134)](_0x1770a9(0x6d)+_0x55bcf4[_0x1770a9(0xd2)]+':\x20'+_0x118268[_0x1770a9(0x97)]);}}),fileMapping;}catch(_0x30bf9d){return console['error'](_0x3fda3d(0x12e),_0x30bf9d),fileMapping;}}function argoType(){const _0x5d7052=_0x3a56d5;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x5d7052(0xc5)](_0x5d7052(0xd4));return;}if(ARGO_AUTH['includes'](_0x5d7052(0x6f))){fs[_0x5d7052(0x122)](path[_0x5d7052(0xaf)](FILE_PATH,_0x5d7052(0x7b)),ARGO_AUTH);const _0x3e8061=_0x5d7052(0x10b)+ARGO_AUTH['split']('\x22')[0xb]+_0x5d7052(0xb4)+path[_0x5d7052(0xaf)](FILE_PATH,_0x5d7052(0x7b))+_0x5d7052(0x130)+ARGO_DOMAIN+_0x5d7052(0xc2)+V_PORT+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20\x20\x20\x20\x20\x20\x20';fs[_0x5d7052(0x122)](path[_0x5d7052(0xaf)](FILE_PATH,_0x5d7052(0xcb)),_0x3e8061);}else console['log'](_0x5d7052(0xb3));}function _0x1e6e(){const _0x136afe=['length','map','writeHead','Process\x20\x27','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1_arm','freedom','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-arm64','Error\x20reading\x20boot.log:','Download\x20','\x20--report-delay=4\x20--skip-conn\x20--skip-procs\x20--disable-auto-update\x20>/dev/null\x202>&1\x20&','writeFileSync','NEZHA_SERVER','3334CwMOeY','Failed\x20to\x20obtain\x20ArgoDomain\x20even\x20after\x20restarting\x20bot.','readFile','2330713LlDRLE','Can\x27t\x20determine\x20system\x20architecture.','vless','push','\x20running\x20error:\x20','2083','statusCode','Error\x20downloading\x20files:','includes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20protocol:\x20http2\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ingress:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20hostname:\x20','NEZHA_PORT','statSync','data','warn','http','VLPATH','Empowerment\x20failed\x20for\x20',':\x20755','TunnelSecret','Kill\x20failed:\x20','https://github.com/kahunama/myfile/releases/download/main/nezha-agent_arm','CFPORT','existsSync','aarch64','TIME','\x20>/dev/null\x202>&1\x20&','stringify','Empowerment\x20success\x20for\x20','/dev/null','456993WtEYgM','tunnel.json','createWriteStream','SERVER_PORT','utf-8','amd','hostname','name','MY_DOMAIN','env','forEach','xconf','HTTP\x20error!\x20status:\x20','stderr','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','/config.yml','Error\x20reading\x20file','/config.yml\x20>/dev/null\x202>&1\x20&',')\x20failed:\x20','Process\x20not\x20found','https','ARGO_AUTH','2053','vless://','debug','path','end','upload\x20failed','inbound_v.json','message','stream/promises','readFileSync','https://github.com/mytcgd/myfiles/releases/download/main/xray','url','GET','\x20-c\x20','get','web','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','quic','3891300QIgIVT','floor','&type=xhttp&host=','2096','5lgdlCw','?encryption=none&security=tls&sni=','block','from','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','ARGO_DOMAIN','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1','charAt','join','UUID','createServer','child_process','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','\x0a\x20\x20\x20\x20\x20\x20\x20\x20credentials-file:\x20','\x22\x20\x27$2\x20==\x20name\x20{print\x20$1}\x27','match','72cRhbHF','94719LHRRBV','/log.txt','config.yml\x20file\x20created\x20and\x20written\x20successfully.','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','clear','\x20deleted','Command\x20failed:\x20','POST','size','log.txt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','speed.cloudflare.com','App\x20is\x20running','log','application/json','/tunnel.yml\x20run','70kehaoV','code','V_PORT','tunnel.yml','write','error','nohup\x20','%3Fed%3D2560&mode=packet-up#','xhttp','Not\x20found','fileName',')\x20successfully','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','packet-up','\x20is\x20running','https://github.com/mytcgd/myfiles/releases/download/main/xray_arm','\x20-p\x20','fileUrl','ip.sb','asOrganization','pidof','\x20(renamed\x20to\x20','inbound.json','8443','arch','web\x20file\x20not\x20found,\x20skip\x20running','originalName','NEZHA_KEY','\x20run\x20-confdir\x20','Error\x20deleting\x20boot.log:\x20','trim','pgrep\x20-x\x20\x22','%3Fed%3D2560&type=ws&encryption=none&security=tls&sni=','unlinkSync','bot\x20file\x20not\x20found,\x20skip\x20running','unable\x20to\x20rm\x20','1737796smACgo','arm','mkdirSync','3964404oSoYBX','/meta','\x20runs\x20again\x20!','https://github.com/kahunama/myfile/releases/download/main/nezha-agent','ps+awk','random','filePath','replace','tls','false','\x27\x20not\x20found','pidof\x20\x22','boot.log','none','SUB_NAME','?host=','/sub','port','https+local://8.8.8.8/dns-query','cmd','bot\x20is\x20not\x20allowed,\x20skip\x20running','/tmp','npm\x20file\x20not\x20found,\x20skip\x20running','bot','443','[detectProcess]\x20','all','npm','\x0a\x20\x20\x20\x20\x20\x20\x20\x20tunnel:\x20','CFIP','npm\x20variable\x20is\x20empty,\x20skip\x20running','request','XHPPATH','exec','parse','425CUvXig','\x20is\x20created','axios','OPENSERVER','NEZHA_VERSION'];_0x1e6e=function(){return _0x136afe;};return _0x1e6e();}let args;function get_cloud_flare_args(){const _0x4af1d1=_0x3a56d5;if(ARGO_AUTH[_0x4af1d1(0xb6)](/^[A-Z0-9a-z=]{120,250}$/))args=_0x4af1d1(0xa0)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?args=_0x4af1d1(0xa1)+FILE_PATH+_0x4af1d1(0xc7):args=_0x4af1d1(0x11d)+FILE_PATH+_0x4af1d1(0xab)+V_PORT;return args;}let NEZHA_TLS;function nezconfig(){const _0x41f3a3=_0x3a56d5,_0xc5ab43=[_0x41f3a3(0x107),_0x41f3a3(0xdf),_0x41f3a3(0xa6),'2087',_0x41f3a3(0x12c),_0x41f3a3(0x90)];if(NEZHA_VERSION==='V0')return _0xc5ab43[_0x41f3a3(0x12f)](NEZHA_PORT)?NEZHA_TLS='--tls':NEZHA_TLS='',NEZHA_TLS;else{if(NEZHA_VERSION==='V1'){_0xc5ab43['includes'](NEZHA_PORT)?NEZHA_TLS='true':NEZHA_TLS=_0x41f3a3(0xf8);const _0x1bbb8d=path[_0x41f3a3(0xaf)](FILE_PATH,_0x41f3a3(0x89)),_0x188695='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+NEZHA_TLS+_0x41f3a3(0xbb)+UUID;try{fs[_0x41f3a3(0x122)](_0x1bbb8d,_0x188695),console['log'](_0x41f3a3(0xba));}catch(_0x44b62a){console[_0x41f3a3(0xcd)]('Error\x20creating\x20or\x20writing\x20config.yml\x20file:',_0x44b62a);}}}}async function runbot(){const _0x3ae0f8=_0x3a56d5;if(fileMapping[_0x3ae0f8(0x106)]&&fs['existsSync'](path[_0x3ae0f8(0xaf)](FILE_PATH,fileMapping['bot'])))try{await execPromise(_0x3ae0f8(0xce)+FILE_PATH+'/'+fileMapping[_0x3ae0f8(0x106)]+'\x20'+args+_0x3ae0f8(0x76));}catch(_0x530925){console[_0x3ae0f8(0xcd)](fileMapping[_0x3ae0f8(0x106)]+_0x3ae0f8(0x12b)+_0x530925);}else console['log'](_0x3ae0f8(0xea));}async function runweb(){const _0x1acdc1=_0x3a56d5;if(fileMapping[_0x1acdc1(0x9f)]&&fs['existsSync'](path['join'](FILE_PATH,fileMapping[_0x1acdc1(0x9f)]))){const _0x30ceb5='nohup\x20'+FILE_PATH+'/'+fileMapping[_0x1acdc1(0x9f)]+_0x1acdc1(0xe4)+FILE_PATH+'/xconf\x20>/dev/null\x202>&1\x20&';try{await execPromise(_0x30ceb5);}catch(_0x3f8431){console[_0x1acdc1(0xcd)](fileMapping['web']+_0x1acdc1(0x12b)+_0x3f8431);}}else console['log'](_0x1acdc1(0xe1));}async function runnpm(){const _0x340931=_0x3a56d5;if(fileMapping[_0x340931(0x10a)]&&fs[_0x340931(0x73)](path['join'](FILE_PATH,fileMapping[_0x340931(0x10a)]))){if(NEZHA_VERSION==='V0'){const _0x1ba298=_0x340931(0xce)+FILE_PATH+'/'+fileMapping[_0x340931(0x10a)]+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x340931(0xd8)+NEZHA_KEY+'\x20'+NEZHA_TLS+_0x340931(0x121);try{await execPromise(_0x1ba298);}catch(_0x367bda){console[_0x340931(0xcd)](fileMapping[_0x340931(0x10a)]+'\x20running\x20error:\x20'+_0x367bda);}}else{if(NEZHA_VERSION==='V1'){const _0x2f269c=_0x340931(0xce)+FILE_PATH+'/'+fileMapping[_0x340931(0x10a)]+_0x340931(0x9d)+FILE_PATH+_0x340931(0x8b);try{await execPromise(_0x2f269c);}catch(_0x55ca00){console[_0x340931(0xcd)](fileMapping[_0x340931(0x10a)]+'\x20running\x20error:\x20'+_0x55ca00);}}}}else console[_0x340931(0xc5)](_0x340931(0x105));}async function runapp(){const _0x378f58=_0x3a56d5;OPENSERVER==!![]?(argoType(),get_cloud_flare_args(),await runbot(),await delay(0x1388),console[_0x378f58(0xc5)](fileMapping['bot']+_0x378f58(0xd6))):console[_0x378f58(0xc5)](_0x378f58(0x103)),await runweb(),await delay(0x3e8),console[_0x378f58(0xc5)](fileMapping[_0x378f58(0x9f)]+_0x378f58(0xd6)),NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY?(nezconfig(),await runnpm(),await delay(0x3e8),console['log'](fileMapping[_0x378f58(0x10a)]+_0x378f58(0xd6))):console[_0x378f58(0xc5)](_0x378f58(0x10d));}async function keep_alive(){const _0x31080a=_0x3a56d5,_0x67e883=await detectProcess(''+fileMapping[_0x31080a(0x9f)]);if(_0x67e883){}else console[_0x31080a(0xc5)](fileMapping[_0x31080a(0x9f)]+_0x31080a(0xf1)),await runweb();await delay(0x1388);if(OPENSERVER==!![]){const _0x4245d3=await detectProcess(''+fileMapping['bot']);if(_0x4245d3){}else console[_0x31080a(0xc5)](fileMapping[_0x31080a(0x106)]+_0x31080a(0xf1)),await runbot();}await delay(0x1388);if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x17ebdd=await detectProcess(''+fileMapping[_0x31080a(0x10a)]);if(_0x17ebdd){}else console[_0x31080a(0xc5)](fileMapping['npm']+_0x31080a(0xf1)),await runnpm();}}async function getArgoDomainFromLog(){const _0x2d8f58=_0x3a56d5,_0x19265e=path[_0x2d8f58(0xaf)](FILE_PATH,_0x2d8f58(0xfb));try{if(!fs[_0x2d8f58(0x73)](_0x19265e)||fs[_0x2d8f58(0x132)](_0x19265e)[_0x2d8f58(0xc0)]===0x0)return null;const _0x37a813=fs[_0x2d8f58(0x99)](_0x19265e,_0x2d8f58(0x7e)),_0x7c54f=/info.*https:\/\/(.*trycloudflare\.com)/g;let _0x56f8b9,_0x30cce6=null;while((_0x56f8b9=_0x7c54f[_0x2d8f58(0x110)](_0x37a813))!==null){_0x30cce6=_0x56f8b9[0x1];}return _0x30cce6;}catch(_0x28341a){return console[_0x2d8f58(0xcd)](_0x2d8f58(0x11f),_0x28341a),null;}}async function manageBotProcess(){const _0x4d97fe=_0x3a56d5;console[_0x4d97fe(0xc5)](_0x4d97fe(0x88));const _0x297aec=path[_0x4d97fe(0xaf)](FILE_PATH,_0x4d97fe(0xfb));if(fs[_0x4d97fe(0x73)](_0x297aec))try{fs[_0x4d97fe(0xe9)](_0x297aec),await delay(0x1f4);}catch(_0x575f20){console[_0x4d97fe(0xcd)](_0x4d97fe(0xe5)+_0x575f20);}const _0x24d9de=''+fileMapping[_0x4d97fe(0x106)];killProcess(_0x24d9de),await delay(0x3e8);const _0x53bc6f='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+_0x297aec+'\x20--loglevel\x20info\x20--url\x20http://localhost:'+V_PORT,_0x53bd5e=_0x4d97fe(0xce)+FILE_PATH+'/'+fileMapping[_0x4d97fe(0x106)]+'\x20'+_0x53bc6f+_0x4d97fe(0x76);try{await execPromise(_0x53bd5e),console[_0x4d97fe(0xc5)](fileMapping['bot']+'\x20is\x20running');}catch(_0x30acc7){console[_0x4d97fe(0xcd)](fileMapping[_0x4d97fe(0x106)]+_0x4d97fe(0x12b)+_0x30acc7);}}function buildurl(_0x36e986){const _0x325192=_0x3a56d5;let _0x186baa;if(VLPATH)_0x186baa='vless://'+UUID+'@'+CFIP+':'+CFPORT+_0x325192(0xfe)+_0x36e986+'&path=%2F'+VLPATH+_0x325192(0xe8)+_0x36e986+'#'+ISP+'-'+SUB_NAME;else XHPPATH&&(_0x186baa=_0x325192(0x91)+UUID+'@'+CFIP+':'+CFPORT+_0x325192(0xa8)+_0x36e986+_0x325192(0xa5)+_0x36e986+'&path=%2F'+XHPPATH+_0x325192(0xcf)+ISP+'-'+SUB_NAME);return _0x186baa;}let argoDomain,UPLOAD_DATA;async function extractDomains(){const _0x3b754f=_0x3a56d5;let _0x16ab8e=null;if(OPENSERVER===!![]){if(ARGO_AUTH&&ARGO_DOMAIN)_0x16ab8e=ARGO_DOMAIN;else{await delay(0xbb8),_0x16ab8e=await getArgoDomainFromLog();if(!_0x16ab8e)try{await manageBotProcess(),await delay(0x2710),_0x16ab8e=await getArgoDomainFromLog(),!_0x16ab8e&&console[_0x3b754f(0xcd)](_0x3b754f(0x125));}catch(_0x51a564){console[_0x3b754f(0xcd)]('Error\x20in\x20bot\x20process\x20management:',_0x51a564);return;}else{}}}MY_DOMAIN&&(_0x16ab8e=MY_DOMAIN);argoDomain=_0x16ab8e;if(!argoDomain){console[_0x3b754f(0xcd)]('No\x20domain\x20could\x20be\x20determined.\x20Cannot\x20construct\x20UPLOAD_DATA'),UPLOAD_DATA='';return;}UPLOAD_DATA=buildurl(argoDomain);}async function getCloudflareMeta(){return new Promise((_0x5e9bee,_0x489a45)=>{const _0x3197b4=_0x395e,_0x2dcdff={'hostname':_0x3197b4(0xc3),'path':_0x3197b4(0xf0),'method':_0x3197b4(0x9c)},_0x45bb34=https[_0x3197b4(0x10e)](_0x2dcdff,_0x2e4fb5=>{const _0x4af2db=_0x3197b4;let _0x626e2e='';_0x2e4fb5['on'](_0x4af2db(0x133),_0x45c176=>{_0x626e2e+=_0x45c176;}),_0x2e4fb5['on'](_0x4af2db(0x94),()=>{const _0x5d3ecb=_0x4af2db,_0x2de3a8=JSON[_0x5d3ecb(0x111)](_0x626e2e);_0x5e9bee(_0x2de3a8);});});_0x45bb34['on'](_0x3197b4(0xcd),_0x85c26b=>{_0x489a45(_0x85c26b);}),_0x45bb34['end']();});}let ISP;async function getipandisp(){const _0x50d72e=_0x3a56d5;let _0x1d9b64=await getCloudflareMeta(),_0x163518=_0x1d9b64['country'],_0x502d84=_0x1d9b64[_0x50d72e(0xdb)];ISP=(_0x163518+'-'+_0x502d84)['replace'](/ /g,'_');}function generateLinks(){const _0x50c844=_0x3a56d5;if(UPLOAD_DATA){const _0x45a562=path[_0x50c844(0xaf)](FILE_PATH,_0x50c844(0xc1));fs[_0x50c844(0x122)](_0x45a562,Buffer[_0x50c844(0xaa)](UPLOAD_DATA)['toString']('base64'));}}async function uploadSubscription(_0x3481b9,_0x5a67de,_0x10a426){const _0x1fc00a=_0x3a56d5,_0x436188=JSON[_0x1fc00a(0x77)]({'URL_NAME':_0x3481b9,'URL':_0x5a67de}),_0x54c0e2={'hostname':new URL(_0x10a426)[_0x1fc00a(0x80)],'port':new URL(_0x10a426)[_0x1fc00a(0x100)]||0x1bb,'path':new URL(_0x10a426)['pathname'],'method':_0x1fc00a(0xbf),'headers':{'Content-Type':_0x1fc00a(0xc6),'Content-Length':_0x436188['length']}};try{const _0x3411c1=await new Promise((_0x51ef54,_0x3b1704)=>{const _0x6941b=_0x1fc00a,_0x148dfa=https[_0x6941b(0x10e)](_0x54c0e2,_0x2092f9=>{const _0xc45ca9=_0x6941b;if(_0x2092f9['statusCode']<0xc8||_0x2092f9[_0xc45ca9(0x12d)]>=0x12c)return _0x3b1704(new Error(_0xc45ca9(0x86)+_0x2092f9[_0xc45ca9(0x12d)]));let _0x313869='';_0x2092f9['on'](_0xc45ca9(0x133),_0x4ec2f8=>_0x313869+=_0x4ec2f8),_0x2092f9['on'](_0xc45ca9(0x94),()=>_0x51ef54(_0x313869));});_0x148dfa['on'](_0x6941b(0xcd),_0x3f606a=>_0x3b1704(_0x3f606a)),_0x148dfa[_0x6941b(0xcc)](_0x436188),_0x148dfa[_0x6941b(0x94)]();});return _0x3411c1;}catch(_0x52f456){console[_0x1fc00a(0xcd)](_0x1fc00a(0x95));}}function cleanfiles(){setTimeout(()=>{const _0x45f2ab=_0x395e;console[_0x45f2ab(0xbc)](),console['log'](_0x45f2ab(0xc4));},0xea60);}let previousargoDomain='';async function subupload(){if(previousargoDomain&&argoDomain===previousargoDomain){}else{const _0x1fab7a=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);generateLinks(),previousargoDomain=argoDomain;}await delay(0xc350),await extractDomains();}async function main(){const _0x2e3367=_0x3a56d5;cleanupOldFiles(),createFolder(FILE_PATH),createFolder(path[_0x2e3367(0xaf)](FILE_PATH,_0x2e3367(0x85))),await downloadFiles(),await delay(0x1388),await getipandisp(),await myconfig(),await runapp(),await extractDomains(),generateLinks(),httpserver(),cleanfiles();if(SUB_URL){const _0xd8f578=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);previousargoDomain=argoDomain,OPENSERVER==!![]&&!ARGO_AUTH&&!ARGO_DOMAIN&&setInterval(subupload,intervalInseconds*0x3e8);}KEEPALIVE==!![]&&(await keep_alive(),setInterval(keep_alive,intervalInseconds*0x3e8));}main();