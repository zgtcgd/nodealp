const _0x55126a=_0x1c61;(function(_0x3365f1,_0x2ed849){const _0x219bbf=_0x1c61,_0x15a3c7=_0x3365f1();while(!![]){try{const _0x44a4a9=-parseInt(_0x219bbf(0x106))/0x1*(-parseInt(_0x219bbf(0x1b6))/0x2)+-parseInt(_0x219bbf(0xf3))/0x3*(parseInt(_0x219bbf(0x157))/0x4)+parseInt(_0x219bbf(0x1ac))/0x5*(-parseInt(_0x219bbf(0x12e))/0x6)+parseInt(_0x219bbf(0x164))/0x7*(parseInt(_0x219bbf(0x1b4))/0x8)+parseInt(_0x219bbf(0x132))/0x9+parseInt(_0x219bbf(0x1b2))/0xa*(parseInt(_0x219bbf(0x1b7))/0xb)+parseInt(_0x219bbf(0x12c))/0xc*(-parseInt(_0x219bbf(0x136))/0xd);if(_0x44a4a9===_0x2ed849)break;else _0x15a3c7['push'](_0x15a3c7['shift']());}catch(_0x289f77){_0x15a3c7['push'](_0x15a3c7['shift']());}}}(_0x10b8,0xb6f2b));const FILE_PATH=process['env'][_0x55126a(0x143)]||_0x55126a(0x12f),AUTO_ACCESS=process[_0x55126a(0x113)][_0x55126a(0x13b)]||![],DOMAIN=process[_0x55126a(0x113)][_0x55126a(0xff)]||'',BAOHUO_URL=process['env'][_0x55126a(0x110)]||'',intervalInseconds=process[_0x55126a(0x113)][_0x55126a(0x183)]||0x64,CFIP=process['env'][_0x55126a(0x18a)]||_0x55126a(0xee),CFPORT=process['env'][_0x55126a(0x137)]||_0x55126a(0x10f),delay=_0x1182f6=>new Promise(_0x125d56=>setTimeout(_0x125d56,_0x1182f6)),OPENSERVER=process['env'][_0x55126a(0x13e)]||!![],KEEPALIVE=process[_0x55126a(0x113)][_0x55126a(0xfe)]||![],MY_DOMAIN=process[_0x55126a(0x113)]['MY_DOMAIN']||'',ARGO_DOMAIN=process[_0x55126a(0x113)][_0x55126a(0x180)]||'',ARGO_AUTH=process[_0x55126a(0x113)][_0x55126a(0x123)]||'',VLPATH=process['env'][_0x55126a(0x130)]||'',XHPPATH=process[_0x55126a(0x113)][_0x55126a(0x11e)]||'',PORT=process[_0x55126a(0x113)]['PORT']||process[_0x55126a(0x113)][_0x55126a(0x10b)]||0xbb8,V_PORT=process[_0x55126a(0x113)][_0x55126a(0x18e)]||0x1f90,UUID=process[_0x55126a(0x113)]['UUID']||'',NEZHA_VERSION=process[_0x55126a(0x113)][_0x55126a(0x107)]||'V0',NEZHA_SERVER=process[_0x55126a(0x113)][_0x55126a(0x148)]||'',NEZHA_PORT=process[_0x55126a(0x113)]['NEZHA_PORT']||_0x55126a(0x10f),NEZHA_KEY=process[_0x55126a(0x113)][_0x55126a(0x15f)]||'',SUB_NAME=process[_0x55126a(0x113)][_0x55126a(0x127)]||'',SUB_URL=process[_0x55126a(0x113)][_0x55126a(0x16d)]||'',axios=require('axios'),os=require('os'),fs=require('fs'),path=require('path'),http=require(_0x55126a(0x156)),https=require(_0x55126a(0x1a1)),exec=require(_0x55126a(0x146))[_0x55126a(0x105)];function cleanupOldFiles(){const _0x29ab93=_0x55126a;if(fs[_0x29ab93(0x1b3)](path[_0x29ab93(0x15e)](FILE_PATH)))fs['rmSync'](path[_0x29ab93(0x15e)](FILE_PATH),{'recursive':!![]});else{}}function createFolder(_0x1356f1){const _0x242486=_0x55126a;if(!fs['existsSync'](_0x1356f1))fs[_0x242486(0x104)](_0x1356f1);else{}}function httpserver(){const _0x1369c0=_0x55126a,_0x183759=http[_0x1369c0(0x188)]((_0x5e87b4,_0x5a8fe2)=>{const _0x31ec44=_0x1369c0;if(_0x5e87b4[_0x31ec44(0x15a)]==='/')_0x5a8fe2[_0x31ec44(0x17a)](0xc8),_0x5a8fe2[_0x31ec44(0x19b)](_0x31ec44(0x18f));else{if(_0x5e87b4['url']===_0x31ec44(0x13c)){const _0x5803fb=FILE_PATH+_0x31ec44(0x117);fs['readFile'](_0x5803fb,_0x31ec44(0x173),(_0x460314,_0x358ff7)=>{const _0x6d31e9=_0x31ec44;_0x460314?(_0x5a8fe2[_0x6d31e9(0x17a)](0x1f4),_0x5a8fe2[_0x6d31e9(0x19b)]('Error\x20reading\x20file')):(_0x5a8fe2['writeHead'](0xc8,{'Content-Type':'text/plain;\x20charset=utf-8'}),_0x5a8fe2[_0x6d31e9(0x19b)](_0x358ff7));});}else _0x5a8fe2[_0x31ec44(0x17a)](0x194),_0x5a8fe2[_0x31ec44(0x19b)](_0x31ec44(0x195));}});_0x183759[_0x1369c0(0x15c)](PORT,()=>{const _0x53ee5c=_0x1369c0;console['log'](_0x53ee5c(0x14c)+PORT);});}function execPromise(_0x420828,_0x438415={}){return new Promise((_0xea9926,_0x52e2fa)=>{const _0x3e5ac6=exec(_0x420828,_0x438415,(_0x37937e,_0x5d6d4f,_0xfec9d)=>{const _0xeb6c86=_0x1c61;if(_0x37937e){const _0x3187f6=new Error(_0xeb6c86(0x109)+_0x37937e[_0xeb6c86(0x135)]);_0x3187f6[_0xeb6c86(0x11c)]=_0x37937e[_0xeb6c86(0x11c)],_0x3187f6[_0xeb6c86(0x129)]=_0xfec9d[_0xeb6c86(0x196)](),_0x52e2fa(_0x3187f6);}else _0xea9926(_0x5d6d4f[_0xeb6c86(0x196)]());});});}async function addAccessTask(){const _0x3bac76=_0x55126a;if(AUTO_ACCESS!==!![])return;if(!DOMAIN)return;try{const _0x1bcb05=_0x3bac76(0x14e)+DOMAIN,_0x1b5697=_0x3bac76(0x119)+BAOHUO_URL+'/add-url\x22\x20-H\x20\x22Content-Type:\x20application/json\x22\x20-d\x20\x27{\x22url\x22:\x20\x22'+_0x1bcb05+_0x3bac76(0x14d),_0xc34c7c=await execPromise(_0x1b5697);console['log'](_0x3bac76(0x16b),_0xc34c7c);}catch(_0x3aa951){console[_0x3bac76(0x11d)](_0x3bac76(0x11a),_0x3aa951[_0x3bac76(0x135)]);}}function _0x10b8(){const _0x583c2f=['TIME','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','outbound.json','2083','2087','createServer','--tls','CFIP','speed.cloudflare.com','get','https://github.com/mytcgd/myfiles/releases/download/main/xray_arm','V_PORT','hello\x20world','App\x20is\x20running','\x20>/dev/null\x202>&1\x20&','Can\x27t\x20determine\x20system\x20architecture.','warn','quic','Not\x20found','trim','xconf','2053','/config.yml','Killed\x20process\x20(PIDs:\x20','end','/tunnel.yml\x20run','includes','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','clear','https','\x22\x20\x27$2\x20==\x20name\x20{print\x20$1}\x27','inbound_v.json','npm\x20file\x20not\x20found,\x20skip\x20running','/meta','\x20is\x20running','none','[detectProcess]\x20','web','ps+awk','tunnel.yml','5nGWYTI','pidof','nohup\x20','push','\x20(renamed\x20to\x20','application/json','1900eQpiyv','existsSync','576zEQSgM','packet-up','1076926KUksOs','86438tlKKfn','Error\x20downloading\x20files:','pidof\x20\x22','ip.sb','):\x20','fileName','random','2096','295941EphWGh','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','pgrep','Empowerment\x20success\x20for\x20','chmod','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','\x20runs\x20again\x20!','Kill\x20failed:\x20','createWriteStream','/config.yml\x20>/dev/null\x202>&1\x20&','block','KEEPALIVE','DOMAIN','\x20running\x20error:\x20','utf-8','true','/dev/null','mkdirSync','exec','2Ifepte','NEZHA_VERSION','unlink','Command\x20failed:\x20','from','SERVER_PORT','&path=%2F','boot.log','forEach','443','BAOHUO_URL','Process\x20\x27','finish','env','tunnel.json','close','stringify','/log.txt','ps\x20-eo\x20pid,comm\x20|\x20awk\x20-v\x20name=\x22','curl\x20-X\x20POST\x20\x22https://','Error\x20added\x20Task:','client_secret:\x20','code','error','XHPPATH','hostname','port','\x0a\x20\x20\x20\x20\x20\x20\x20\x20tunnel:\x20','data','ARGO_AUTH','catch','&type=xhttp&host=','web\x20file\x20not\x20found,\x20skip\x20running','SUB_NAME','freedom','stderr','log','arm','988296RIILGZ','statusCode','8149746nrVPEw','/tmp','VLPATH',')\x20failed:\x20','5903982YfeMdG',')\x20successfully','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1','message','156JlWggg','CFPORT','then','https://github.com/mytcgd/myfiles/releases/download/main/xray','replace','AUTO_ACCESS','/sub','write','OPENSERVER','floor','bot\x20is\x20not\x20allowed,\x20skip\x20running','GET','pgrep\x20-x\x20\x22','FILE_PATH','request','npm','child_process','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','NEZHA_SERVER','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20\x20\x20\x20\x20\x20\x20','POST','server\x20is\x20running\x20on\x20port\x20:\x20','\x22}\x27','https://','vless://','unlinkSync','fileUrl','match','log.txt','name','charAt','http','24eIcpFv','\x20-s\x20','size','url','Attempting\x20to\x20kill\x20process:\x20','listen','Upload\x20failed:\x20','join','NEZHA_KEY','npm\x20variable\x20is\x20empty,\x20skip\x20running','%3Fed%3D2560&mode=packet-up#','pathname','writeFileSync','44905fKGcJN','lstatSync','\x20-c\x20','bot','Download\x20','originalName','\x0a\x20\x20\x20\x20\x20\x20\x20\x20protocol:\x20http2\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ingress:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20hostname:\x20','Automatic\x20Access\x20Task\x20added\x20successfully:','8443','SUB_URL','\x20run\x20-confdir\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','\x0a\x20\x20\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','blackhole','https+local://8.8.8.8/dns-query','utf8','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','TunnelSecret','HTTP\x20error!\x20status:\x20','toString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20credentials-file:\x20','Empowerment\x20failed\x20for\x20','writeHead','bot\x20file\x20not\x20found,\x20skip\x20running','?host=','map','length','xhttp','ARGO_DOMAIN','vless','direct'];_0x10b8=function(){return _0x583c2f;};return _0x10b8();}async function detectProcess(_0x38a572){const _0xed3cfe=_0x55126a,_0x288411=[{'cmd':_0xed3cfe(0xed)+_0x38a572+'\x22','name':_0xed3cfe(0x1ad)},{'cmd':_0xed3cfe(0x142)+_0x38a572+'\x22','name':_0xed3cfe(0xf5)},{'cmd':_0xed3cfe(0x118)+_0x38a572+_0xed3cfe(0x1a2),'name':_0xed3cfe(0x1aa)}];for(const _0x182e31 of _0x288411){try{const _0x56de76=await execPromise(_0x182e31['cmd']);if(_0x56de76)return _0x56de76[_0xed3cfe(0x13a)](/\n/g,'\x20')[_0xed3cfe(0x196)]();}catch(_0x3c52dd){_0x3c52dd['code']!==0x7f&&_0x3c52dd['code']!==0x1&&console['debug'](_0xed3cfe(0x1a8)+_0x182e31[_0xed3cfe(0x154)]+'\x20error:',_0x3c52dd[_0xed3cfe(0x135)]);}}return'';}async function killProcess(_0x2270a4){const _0x5de205=_0x55126a;console['log'](_0x5de205(0x15b)+_0x2270a4);try{const _0x175b3b=await detectProcess(_0x2270a4);if(!_0x175b3b)return console[_0x5de205(0x193)](_0x5de205(0x111)+_0x2270a4+'\x27\x20not\x20found'),{'success':!![],'message':'Process\x20not\x20found'};await execPromise('kill\x20-9\x20'+_0x175b3b);const _0x14d75c=_0x5de205(0x19a)+_0x175b3b+')';return console[_0x5de205(0x12a)](_0x14d75c),{'success':!![],'message':_0x14d75c};}catch(_0x24aea2){const _0x77bba8=_0x5de205(0xfa)+_0x24aea2['message'];return console[_0x5de205(0x11d)](_0x77bba8),{'success':![],'message':_0x77bba8};}}function generateRandomString(_0x314dd1){const _0x5eba97=_0x55126a,_0x5919db=_0x5eba97(0xf8);let _0x120e51='';for(let _0x15863f=0x0;_0x15863f<_0x314dd1;_0x15863f++){_0x120e51+=_0x5919db[_0x5eba97(0x155)](Math[_0x5eba97(0x13f)](Math[_0x5eba97(0xf1)]()*_0x5919db['length']));}return _0x120e51;}async function myconfig(){const _0x1ce9b3=_0x55126a,_0x3009e8=path[_0x1ce9b3(0x15e)](FILE_PATH,_0x1ce9b3(0x197)),_0x3d3938='/'+VLPATH,_0x5db9c5='/'+XHPPATH;function _0x14aa99(){const _0x63c621=_0x1ce9b3,_0xb454b9={'log':{'access':_0x63c621(0x103),'error':_0x63c621(0x103),'loglevel':_0x63c621(0x1a7)},'dns':{'servers':[_0x63c621(0x172)]}};fs[_0x63c621(0x163)](path[_0x63c621(0x15e)](_0x3009e8,'inbound.json'),JSON[_0x63c621(0x116)](_0xb454b9,null,0x2));if(VLPATH&&!XHPPATH){const _0x383a56={'inbounds':[{'port':V_PORT,'listen':'::','protocol':_0x63c621(0x181),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x63c621(0x1a7)},'streamSettings':{'network':'ws','security':_0x63c621(0x1a7),'wsSettings':{'path':_0x3d3938}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x63c621(0x194)],'metadataOnly':![]}}]};fs[_0x63c621(0x163)](path[_0x63c621(0x15e)](_0x3009e8,_0x63c621(0x1a3)),JSON[_0x63c621(0x116)](_0x383a56,null,0x2));}else{if(XHPPATH&&!VLPATH){const _0x291d91={'inbounds':[{'port':V_PORT,'listen':'::','protocol':_0x63c621(0x181),'settings':{'clients':[{'id':UUID}],'decryption':_0x63c621(0x1a7)},'streamSettings':{'network':_0x63c621(0x17f),'security':_0x63c621(0x1a7),'xhttpSettings':{'mode':_0x63c621(0x1b5),'path':_0x5db9c5}},'sniffing':{'enabled':!![],'destOverride':[_0x63c621(0x156),'tls',_0x63c621(0x194)],'metadataOnly':![]}}]};fs[_0x63c621(0x163)](path[_0x63c621(0x15e)](_0x3009e8,_0x63c621(0x1a3)),JSON[_0x63c621(0x116)](_0x291d91,null,0x2));}}const _0x38192d={'outbounds':[{'tag':_0x63c621(0x182),'protocol':_0x63c621(0x128)},{'tag':_0x63c621(0xfd),'protocol':_0x63c621(0x171)}]};fs[_0x63c621(0x163)](path[_0x63c621(0x15e)](_0x3009e8,_0x63c621(0x185)),JSON[_0x63c621(0x116)](_0x38192d,null,0x2));}_0x14aa99();}function getSystemArchitecture(){const _0x43e1ad=_0x55126a,_0x149ae8=os['arch']();return _0x149ae8===_0x43e1ad(0x12b)||_0x149ae8==='arm64'||_0x149ae8==='aarch64'?_0x43e1ad(0x12b):'amd';}function getFilesForArchitecture(_0x337f9d){const _0x384903=_0x55126a,_0x2ea986={'bot':{'arm':'https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-arm64','amd':'https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64'},'web':{'arm':_0x384903(0x18d),'amd':_0x384903(0x139)},'npm':{'V0':{'arm':'https://github.com/kahunama/myfile/releases/download/main/nezha-agent_arm','amd':'https://github.com/kahunama/myfile/releases/download/main/nezha-agent'},'V1':{'arm':'https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1_arm','amd':_0x384903(0x134)}}};let _0x2d4085=[{'fileName':generateRandomString(0x5),'originalName':_0x384903(0x1a9),'fileUrl':_0x2ea986['web'][_0x337f9d]}];if(OPENSERVER==!![]){const _0x45bc45={'fileName':generateRandomString(0x5),'originalName':_0x384903(0x167),'fileUrl':_0x2ea986[_0x384903(0x167)][_0x337f9d]};_0x2d4085[_0x384903(0x1af)](_0x45bc45);}if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION){const _0x117a83={'fileName':generateRandomString(0x5),'originalName':_0x384903(0x145),'fileUrl':_0x2ea986[_0x384903(0x145)][NEZHA_VERSION][_0x337f9d]};_0x2d4085[_0x384903(0x1af)](_0x117a83);}return _0x2d4085;}function authorizeFiles(_0x1f70f2){const _0x17f9eb=_0x55126a,_0x53b1f0=0x1fd;_0x1f70f2[_0x17f9eb(0x10e)](_0x21370f=>{const _0x43e6fe=_0x17f9eb,_0x172345=path[_0x43e6fe(0x15e)](FILE_PATH,_0x21370f[_0x43e6fe(0xf0)]);fs[_0x43e6fe(0xf7)](_0x172345,_0x53b1f0,_0x15b125=>{const _0x44cea3=_0x43e6fe;_0x15b125?console[_0x44cea3(0x11d)](_0x44cea3(0x179)+_0x172345+'\x20('+_0x21370f[_0x44cea3(0x169)]+_0x44cea3(0xef)+_0x15b125):console[_0x44cea3(0x12a)](_0x44cea3(0xf6)+_0x172345+'\x20('+_0x21370f[_0x44cea3(0x169)]+_0x44cea3(0xef)+_0x53b1f0['toString'](0x8));});});}function download_function(_0x38b109,_0x21c09b,_0x39080a,_0x33f8ce){const _0x4bb348=_0x55126a,_0x43da5b=path['join'](FILE_PATH,_0x38b109),_0x51d836=fs[_0x4bb348(0xfb)](_0x43da5b);axios({'method':_0x4bb348(0x18c),'url':_0x39080a,'responseType':'stream'})[_0x4bb348(0x138)](_0x5c3e14=>{const _0x47c944=_0x4bb348;_0x5c3e14['data']['pipe'](_0x51d836),_0x51d836['on'](_0x47c944(0x112),()=>{const _0x180a5c=_0x47c944;_0x51d836[_0x180a5c(0x115)](),console[_0x180a5c(0x12a)](_0x180a5c(0x168)+_0x21c09b+_0x180a5c(0x1b0)+_0x38b109+_0x180a5c(0x133)),_0x33f8ce(null,{'fileName':_0x38b109,'originalName':_0x21c09b});}),_0x51d836['on'](_0x47c944(0x11d),_0x4c0f22=>{const _0x2ea1a9=_0x47c944;fs[_0x2ea1a9(0x108)](_0x43da5b,()=>{});const _0x524bc8=_0x2ea1a9(0x168)+_0x21c09b+_0x2ea1a9(0x1b0)+_0x38b109+')\x20failed:\x20'+_0x4c0f22['message'];console[_0x2ea1a9(0x11d)](_0x524bc8),_0x33f8ce(_0x524bc8);});})[_0x4bb348(0x124)](_0x5d78e6=>{const _0x517f3e=_0x4bb348,_0x239416='Download\x20'+_0x21c09b+_0x517f3e(0x1b0)+_0x38b109+_0x517f3e(0x131)+_0x5d78e6[_0x517f3e(0x135)];console[_0x517f3e(0x11d)](_0x239416),_0x33f8ce(_0x239416);});}let fileMapping={};async function downloadFiles(){const _0x12a4ba=_0x55126a;try{const _0x42d958=getSystemArchitecture();if(!_0x42d958){console['log'](_0x12a4ba(0x192));return;}const _0x5454e2=getFilesForArchitecture(_0x42d958);if(_0x5454e2[_0x12a4ba(0x17e)]===0x0){console[_0x12a4ba(0x12a)](_0x12a4ba(0x19e));return;}const _0x18c428=_0x5454e2[_0x12a4ba(0x17d)](_0x2e015b=>new Promise((_0x141d70,_0x5160f7)=>{const _0x3c182b=_0x12a4ba;download_function(_0x2e015b[_0x3c182b(0xf0)],_0x2e015b[_0x3c182b(0x169)],_0x2e015b[_0x3c182b(0x151)],(_0x5a03e9,_0x240ceb)=>{if(_0x5a03e9)_0x5160f7(_0x5a03e9);else _0x141d70(_0x240ceb);});})),_0x58b0ce=await Promise['all'](_0x18c428);return await authorizeFiles(_0x58b0ce),_0x58b0ce[_0x12a4ba(0x10e)](_0x1dc073=>{const _0x2131dd=_0x12a4ba;fileMapping[_0x1dc073[_0x2131dd(0x169)]]=_0x1dc073[_0x2131dd(0xf0)];}),fileMapping;}catch(_0x55a55){return console[_0x12a4ba(0x11d)](_0x12a4ba(0xec),_0x55a55),fileMapping;}}function argoType(){const _0x5f047e=_0x55126a;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x5f047e(0x12a)](_0x5f047e(0x174));return;}if(ARGO_AUTH[_0x5f047e(0x19d)](_0x5f047e(0x175))){fs[_0x5f047e(0x163)](path[_0x5f047e(0x15e)](FILE_PATH,_0x5f047e(0x114)),ARGO_AUTH);const _0x278505=_0x5f047e(0x121)+ARGO_AUTH['split']('\x22')[0xb]+_0x5f047e(0x178)+path['join'](FILE_PATH,_0x5f047e(0x114))+_0x5f047e(0x16a)+ARGO_DOMAIN+_0x5f047e(0x170)+ARGO_PORT+_0x5f047e(0x14a);fs[_0x5f047e(0x163)](path['join'](FILE_PATH,_0x5f047e(0x1ab)),_0x278505);}else console[_0x5f047e(0x12a)](_0x5f047e(0x147));}let args;function get_cloud_flare_args(){const _0x460d7e=_0x55126a;if(ARGO_AUTH[_0x460d7e(0x152)](/^[A-Z0-9a-z=]{120,250}$/))args=_0x460d7e(0xf4)+ARGO_AUTH;else ARGO_AUTH[_0x460d7e(0x152)](/TunnelSecret/)?args='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x460d7e(0x19c):args=_0x460d7e(0x19f)+FILE_PATH+_0x460d7e(0x184)+V_PORT;return args;}let NEZHA_TLS;function _0x1c61(_0x50152d,_0x5b67f7){const _0x10b803=_0x10b8();return _0x1c61=function(_0x1c6164,_0x2ff27a){_0x1c6164=_0x1c6164-0xec;let _0x5edf6f=_0x10b803[_0x1c6164];return _0x5edf6f;},_0x1c61(_0x50152d,_0x5b67f7);}function nezconfig(){const _0x3f4d78=_0x55126a,_0x4c2f89=[_0x3f4d78(0x10f),_0x3f4d78(0x16c),_0x3f4d78(0xf2),_0x3f4d78(0x187),_0x3f4d78(0x186),_0x3f4d78(0x198)];if(NEZHA_VERSION==='V0')return _0x4c2f89[_0x3f4d78(0x19d)](NEZHA_PORT)?NEZHA_TLS=_0x3f4d78(0x189):NEZHA_TLS='',NEZHA_TLS;else{if(NEZHA_VERSION==='V1'){_0x4c2f89['includes'](NEZHA_PORT)?NEZHA_TLS=_0x3f4d78(0x102):NEZHA_TLS='false';const _0x14a1e6=path['join'](FILE_PATH,_0x3f4d78(0x199)),_0x1c655f=_0x3f4d78(0x11b)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x3f4d78(0x149)+NEZHA_TLS+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;try{fs[_0x3f4d78(0x163)](_0x14a1e6,_0x1c655f),console[_0x3f4d78(0x12a)]('config.yml\x20file\x20created\x20and\x20written\x20successfully.');}catch(_0x22521f){console['error']('Error\x20creating\x20or\x20writing\x20config.yml\x20file:',_0x22521f);}}}}async function runbot(){const _0x3d3cc7=_0x55126a;if(fileMapping[_0x3d3cc7(0x167)]&&fs['existsSync'](path[_0x3d3cc7(0x15e)](FILE_PATH,fileMapping[_0x3d3cc7(0x167)])))try{await execPromise('nohup\x20'+FILE_PATH+'/'+fileMapping[_0x3d3cc7(0x167)]+'\x20'+args+'\x20>/dev/null\x202>&1\x20&');}catch(_0x449f62){console[_0x3d3cc7(0x11d)](fileMapping[_0x3d3cc7(0x167)]+_0x3d3cc7(0x100)+_0x449f62);}else console['log'](_0x3d3cc7(0x17b));}async function runweb(){const _0x4c45fa=_0x55126a;if(fileMapping[_0x4c45fa(0x1a9)]&&fs[_0x4c45fa(0x1b3)](path[_0x4c45fa(0x15e)](FILE_PATH,fileMapping[_0x4c45fa(0x1a9)]))){const _0x3d35c9='nohup\x20'+FILE_PATH+'/'+fileMapping[_0x4c45fa(0x1a9)]+_0x4c45fa(0x16e)+FILE_PATH+'/xconf\x20>/dev/null\x202>&1\x20&';try{await execPromise(_0x3d35c9);}catch(_0xc22f69){console[_0x4c45fa(0x11d)](fileMapping[_0x4c45fa(0x1a9)]+_0x4c45fa(0x100)+_0xc22f69);}}else console['log'](_0x4c45fa(0x126));}async function runnpm(){const _0x214f2a=_0x55126a;if(fileMapping[_0x214f2a(0x145)]&&fs[_0x214f2a(0x1b3)](path[_0x214f2a(0x15e)](FILE_PATH,fileMapping['npm']))){if(NEZHA_VERSION==='V0'){const _0x1abdb9=_0x214f2a(0x1ae)+FILE_PATH+'/'+fileMapping[_0x214f2a(0x145)]+_0x214f2a(0x158)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+NEZHA_TLS+'\x20--report-delay=4\x20--skip-conn\x20--skip-procs\x20--disable-auto-update\x20>/dev/null\x202>&1\x20&';try{await execPromise(_0x1abdb9);}catch(_0x4801f9){console[_0x214f2a(0x11d)](fileMapping[_0x214f2a(0x145)]+_0x214f2a(0x100)+_0x4801f9);}}else{if(NEZHA_VERSION==='V1'){const _0x2d787e='nohup\x20'+FILE_PATH+'/'+fileMapping[_0x214f2a(0x145)]+_0x214f2a(0x166)+FILE_PATH+_0x214f2a(0xfc);try{await execPromise(_0x2d787e);}catch(_0x3b7e2c){console['error'](fileMapping[_0x214f2a(0x145)]+_0x214f2a(0x100)+_0x3b7e2c);}}}}else console[_0x214f2a(0x12a)](_0x214f2a(0x1a4));}async function runapp(){const _0x5bc963=_0x55126a;OPENSERVER==!![]?(argoType(),get_cloud_flare_args(),await runbot(),await delay(0x1388),console[_0x5bc963(0x12a)](fileMapping['bot']+_0x5bc963(0x1a6))):console['log'](_0x5bc963(0x140)),await runweb(),await delay(0x3e8),console['log'](fileMapping[_0x5bc963(0x1a9)]+_0x5bc963(0x1a6)),NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY?(nezconfig(),await runnpm(),await delay(0x3e8),console['log'](fileMapping[_0x5bc963(0x145)]+_0x5bc963(0x1a6))):console[_0x5bc963(0x12a)](_0x5bc963(0x160));}async function keep_alive(){const _0x53f280=_0x55126a,_0x13f16e=await detectProcess(''+fileMapping['web']);if(_0x13f16e){}else console[_0x53f280(0x12a)](fileMapping[_0x53f280(0x1a9)]+_0x53f280(0xf9)),await runweb();await delay(0x1388);if(OPENSERVER==!![]){const _0x23f30a=await detectProcess(''+fileMapping[_0x53f280(0x167)]);if(_0x23f30a){}else console[_0x53f280(0x12a)](fileMapping['bot']+_0x53f280(0xf9)),await runbot();}await delay(0x1388);if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x245113=await detectProcess(''+fileMapping['npm']);if(_0x245113){}else console[_0x53f280(0x12a)](fileMapping[_0x53f280(0x145)]+_0x53f280(0xf9)),await runnpm();}}let argoDomain;async function extractDomains(){const _0x27fbce=_0x55126a;if(ARGO_AUTH&&ARGO_DOMAIN)argoDomain=ARGO_DOMAIN;else try{await delay(0x2710);const _0x418746=path[_0x27fbce(0x15e)](FILE_PATH,'boot.log');if(fs['existsSync'](_0x418746)&&fs['statSync'](_0x418746)[_0x27fbce(0x159)]>0x0){const _0x5c4b38=fs['readFileSync'](_0x418746,_0x27fbce(0x101)),_0x1ee632=/info.*https:\/\/(.*trycloudflare\.com)/g;let _0x3c880d,_0x112996=null;while((_0x3c880d=_0x1ee632[_0x27fbce(0x105)](_0x5c4b38))!==null){_0x112996=_0x3c880d[0x1];}_0x112996&&(argoDomain=_0x112996);}else{console[_0x27fbce(0x12a)](_0x27fbce(0x16f));fs[_0x27fbce(0x1b3)](path[_0x27fbce(0x15e)](FILE_PATH,'boot.log'))&&(fs[_0x27fbce(0x150)](path['join'](FILE_PATH,_0x27fbce(0x10d))),await delay(0x3e8));const _0x3dcc9f=''+fileMapping[_0x27fbce(0x167)];killProcess(_0x3dcc9f),await delay(0x3e8);const _0x554470='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+V_PORT,_0x5c7be7=_0x27fbce(0x1ae)+FILE_PATH+'/'+fileMapping[_0x27fbce(0x167)]+'\x20'+_0x554470+_0x27fbce(0x191);try{await execPromise(_0x5c7be7),console['log'](fileMapping[_0x27fbce(0x167)]+'\x20is\x20running'),await delay(0x1388);}catch(_0xdec1eb){console[_0x27fbce(0x11d)](fileMapping[_0x27fbce(0x167)]+_0x27fbce(0x100)+_0xdec1eb);}await extractDomains();}}catch(_0x18b3e0){}}async function getCloudflareMeta(){return new Promise((_0x4e1372,_0x27f53a)=>{const _0x4ec8b3=_0x1c61,_0x53e51a={'hostname':_0x4ec8b3(0x18b),'path':_0x4ec8b3(0x1a5),'method':_0x4ec8b3(0x141)},_0x43fbbc=https[_0x4ec8b3(0x144)](_0x53e51a,_0xb7cf8=>{const _0x5ae9ac=_0x4ec8b3;let _0x394ef6='';_0xb7cf8['on'](_0x5ae9ac(0x122),_0x31159f=>{_0x394ef6+=_0x31159f;}),_0xb7cf8['on']('end',()=>{const _0x5ebeda=JSON['parse'](_0x394ef6);_0x4e1372(_0x5ebeda);});});_0x43fbbc['on'](_0x4ec8b3(0x11d),_0x382561=>{_0x27f53a(_0x382561);}),_0x43fbbc[_0x4ec8b3(0x19b)]();});}let ISP;async function getipandisp(){const _0x342c3c=_0x55126a;let _0x4ffdc6=await getCloudflareMeta(),_0xc5052b=_0x4ffdc6['country'],_0x5e16e8=_0x4ffdc6['asOrganization'];ISP=(_0xc5052b+'-'+_0x5e16e8)[_0x342c3c(0x13a)](/ /g,'_');}let UPLOAD_DATA,previousargoDomain='';async function generateLinks(){const _0x37abd5=_0x55126a;let _0xc31058,_0x2ec55b;if(previousargoDomain&&argoDomain===previousargoDomain)return;try{MY_DOMAIN&&(argoDomain=MY_DOMAIN);if(VLPATH)_0xc31058=_0x37abd5(0x14f)+UUID+'@'+CFIP+':'+CFPORT+_0x37abd5(0x17c)+argoDomain+_0x37abd5(0x10c)+VLPATH+'%3Fed%3D2560&type=ws&encryption=none&security=tls&sni='+argoDomain+'#'+ISP+'-'+SUB_NAME;else XHPPATH&&(_0xc31058='vless://'+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+argoDomain+_0x37abd5(0x125)+argoDomain+_0x37abd5(0x10c)+XHPPATH+_0x37abd5(0x161)+ISP+'-'+SUB_NAME);_0x2ec55b=''+_0xc31058;SUB_URL&&(UPLOAD_DATA=_0x2ec55b);const _0x15f949=path[_0x37abd5(0x15e)](FILE_PATH,_0x37abd5(0x153));fs[_0x37abd5(0x163)](_0x15f949,Buffer[_0x37abd5(0x10a)](_0x2ec55b)[_0x37abd5(0x177)]('base64')),previousargoDomain=argoDomain;}catch(_0x46e36d){}}async function uploadSubscription(_0xf36293,_0x3bc40f,_0x5e1de1){const _0x1d1d03=_0x55126a,_0x50d689=JSON['stringify']({'URL_NAME':_0xf36293,'URL':_0x3bc40f}),_0x201988={'hostname':new URL(_0x5e1de1)[_0x1d1d03(0x11f)],'port':new URL(_0x5e1de1)[_0x1d1d03(0x120)]||0x1bb,'path':new URL(_0x5e1de1)[_0x1d1d03(0x162)],'method':_0x1d1d03(0x14b),'headers':{'Content-Type':_0x1d1d03(0x1b1),'Content-Length':_0x50d689[_0x1d1d03(0x17e)]}};try{const _0x2eba95=await new Promise((_0x432240,_0x1153a2)=>{const _0x2b30ba=_0x1d1d03,_0x30d691=https[_0x2b30ba(0x144)](_0x201988,_0x4b2dcc=>{const _0x4f01d0=_0x2b30ba;if(_0x4b2dcc[_0x4f01d0(0x12d)]<0xc8||_0x4b2dcc[_0x4f01d0(0x12d)]>=0x12c)return _0x1153a2(new Error(_0x4f01d0(0x176)+_0x4b2dcc[_0x4f01d0(0x12d)]));let _0x4ebfd3='';_0x4b2dcc['on'](_0x4f01d0(0x122),_0x429dda=>_0x4ebfd3+=_0x429dda),_0x4b2dcc['on'](_0x4f01d0(0x19b),()=>_0x432240(_0x4ebfd3));});_0x30d691['on'](_0x2b30ba(0x11d),_0xabeb6b=>_0x1153a2(_0xabeb6b)),_0x30d691[_0x2b30ba(0x13d)](_0x50d689),_0x30d691[_0x2b30ba(0x19b)]();});return _0x2eba95;}catch(_0x1d6d21){throw new Error(_0x1d1d03(0x15d)+_0x1d6d21[_0x1d1d03(0x135)]);}}async function subupload(){try{const _0x411734=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);OPENSERVER==!![]&&!ARGO_AUTH&&!ARGO_DOMAIN&&(await extractDomains(),generateLinks());}catch(_0x26f2d0){}}function cleanfiles(){setTimeout(()=>{const _0x26395c=_0x1c61,_0x3e2d44=[];_0x3e2d44[_0x26395c(0x10e)](_0x15dbe7=>{const _0x1863ca=_0x26395c;try{fs[_0x1863ca(0x1b3)](_0x15dbe7)&&(fs[_0x1863ca(0x165)](_0x15dbe7)['isDirectory']()?fs['rmSync'](_0x15dbe7,{'recursive':!![]}):fs[_0x1863ca(0x150)](_0x15dbe7));}catch(_0xc31285){}}),console[_0x26395c(0x1a0)](),console[_0x26395c(0x12a)](_0x26395c(0x190));},0xea60);}async function main(){const _0x57a1b2=_0x55126a;cleanupOldFiles(),createFolder(FILE_PATH),createFolder(path[_0x57a1b2(0x15e)](FILE_PATH,_0x57a1b2(0x197))),await downloadFiles(),await delay(0x1388),await getipandisp(),await myconfig(),await runapp(),OPENSERVER==!![]&&await extractDomains(),generateLinks(),httpserver(),addAccessTask(),cleanfiles(),SUB_URL&&(await subupload(),OPENSERVER==!![]&&!ARGO_AUTH&&!ARGO_DOMAIN&&setInterval(subupload,intervalInseconds*0x3e8)),KEEPALIVE==!![]&&(await keep_alive(),setInterval(keep_alive,0x186a0));}main();