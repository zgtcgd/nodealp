const _0x36ab0b=_0x3f55;(function(_0x16dafd,_0x309a00){const _0x1beecf=_0x3f55,_0x2a9c63=_0x16dafd();while(!![]){try{const _0x4ee37c=parseInt(_0x1beecf(0x251))/0x1+-parseInt(_0x1beecf(0x1da))/0x2+parseInt(_0x1beecf(0x1d2))/0x3+-parseInt(_0x1beecf(0x26a))/0x4+parseInt(_0x1beecf(0x233))/0x5+-parseInt(_0x1beecf(0x218))/0x6*(parseInt(_0x1beecf(0x241))/0x7)+parseInt(_0x1beecf(0x22b))/0x8;if(_0x4ee37c===_0x309a00)break;else _0x2a9c63['push'](_0x2a9c63['shift']());}catch(_0x267349){_0x2a9c63['push'](_0x2a9c63['shift']());}}}(_0x13d8,0x3e38e));const FILE_PATH=process[_0x36ab0b(0x22d)]['FILE_PATH']||_0x36ab0b(0x1ee),intervalInseconds=process[_0x36ab0b(0x22d)][_0x36ab0b(0x1fe)]||0x64,CFIP=process['env'][_0x36ab0b(0x221)]||'ip.sb',CFPORT=process['env'][_0x36ab0b(0x1d0)]||_0x36ab0b(0x24a),delay=_0x2074f0=>new Promise(_0x5bd7d2=>setTimeout(_0x5bd7d2,_0x2074f0)),OPENSERVER=process[_0x36ab0b(0x22d)]['OPENSERVER']||!![],KEEPALIVE=process[_0x36ab0b(0x22d)][_0x36ab0b(0x1d9)]||![],MY_DOMAIN=process[_0x36ab0b(0x22d)][_0x36ab0b(0x205)]||'',ARGO_DOMAIN=process[_0x36ab0b(0x22d)][_0x36ab0b(0x25b)]||'',ARGO_AUTH=process['env']['ARGO_AUTH']||'',VLPATH=process[_0x36ab0b(0x22d)][_0x36ab0b(0x238)]||'',XHPPATH=process[_0x36ab0b(0x22d)][_0x36ab0b(0x26c)]||'',PORT=process['env'][_0x36ab0b(0x224)]||process['env'][_0x36ab0b(0x20d)]||0xbb8,V_PORT=process['env']['V_PORT']||0x1f90,UUID=process[_0x36ab0b(0x22d)][_0x36ab0b(0x213)]||'',NEZHA_VERSION=process[_0x36ab0b(0x22d)][_0x36ab0b(0x234)]||'V0',NEZHA_SERVER=process['env'][_0x36ab0b(0x214)]||'',NEZHA_PORT=process[_0x36ab0b(0x22d)][_0x36ab0b(0x26b)]||_0x36ab0b(0x24a),NEZHA_KEY=process[_0x36ab0b(0x22d)]['NEZHA_KEY']||'',SUB_NAME=process[_0x36ab0b(0x22d)]['SUB_NAME']||'',SUB_URL=process[_0x36ab0b(0x22d)]['SUB_URL']||'',axios=require('axios'),{pipeline}=require(_0x36ab0b(0x1f6)),os=require('os'),fs=require('fs'),path=require(_0x36ab0b(0x26f)),http=require(_0x36ab0b(0x1eb)),https=require('https'),exec=require(_0x36ab0b(0x207))[_0x36ab0b(0x20b)];function cleanupOldFiles(){const _0x373a57=_0x36ab0b;try{fs[_0x373a57(0x245)](path['join'](FILE_PATH))?(fs['rmSync'](path['join'](FILE_PATH),{'recursive':!![]}),console[_0x373a57(0x1df)](FILE_PATH+_0x373a57(0x22f))):console[_0x373a57(0x1df)](FILE_PATH+_0x373a57(0x1bf));}catch(_0x5477e7){console[_0x373a57(0x1df)]('unable\x20to\x20rm\x20'+FILE_PATH);}}function createFolder(_0x3058ed){const _0x4400eb=_0x36ab0b;!fs[_0x4400eb(0x245)](_0x3058ed)?(fs[_0x4400eb(0x1b9)](_0x3058ed),console[_0x4400eb(0x1df)](_0x3058ed+_0x4400eb(0x1e6))):console[_0x4400eb(0x1df)](_0x3058ed+'\x20already\x20exists');}function httpserver(){const _0x42f6c9=http['createServer']((_0x89df57,_0x5c3765)=>{const _0x2a2e8a=_0x3f55;if(_0x89df57[_0x2a2e8a(0x1ed)]==='/')_0x5c3765[_0x2a2e8a(0x27d)](0xc8),_0x5c3765[_0x2a2e8a(0x21e)]('hello\x20world');else{if(_0x89df57[_0x2a2e8a(0x1ed)]===_0x2a2e8a(0x219)){const _0x4f67d4=FILE_PATH+_0x2a2e8a(0x246);fs[_0x2a2e8a(0x206)](_0x4f67d4,_0x2a2e8a(0x227),(_0x294270,_0x164142)=>{const _0x39d092=_0x2a2e8a;_0x294270?(_0x5c3765[_0x39d092(0x27d)](0x1f4),_0x5c3765[_0x39d092(0x21e)](_0x39d092(0x258))):(_0x5c3765[_0x39d092(0x27d)](0xc8,{'Content-Type':'text/plain;\x20charset=utf-8'}),_0x5c3765[_0x39d092(0x21e)](_0x164142));});}else _0x5c3765[_0x2a2e8a(0x27d)](0x194),_0x5c3765['end'](_0x2a2e8a(0x259));}});_0x42f6c9['listen'](PORT,()=>{const _0x3b0ca6=_0x3f55;console[_0x3b0ca6(0x1df)](_0x3b0ca6(0x1f0)+PORT);});}function execPromise(_0x294d04,_0x57f015={}){return new Promise((_0x2c86f9,_0x487198)=>{const _0x3e84c8=exec(_0x294d04,_0x57f015,(_0x5c7df9,_0x123b7a,_0x3d1a12)=>{const _0x55dac3=_0x3f55;if(_0x5c7df9){const _0x2e5aec=new Error('Command\x20failed:\x20'+_0x5c7df9['message']);_0x2e5aec[_0x55dac3(0x1d3)]=_0x5c7df9['code'],_0x2e5aec[_0x55dac3(0x1c3)]=_0x3d1a12['trim'](),_0x487198(_0x2e5aec);}else _0x2c86f9(_0x123b7a[_0x55dac3(0x273)]());});});}async function detectProcess(_0x123a4a){const _0xf697cb=_0x36ab0b,_0x193e61=[{'cmd':_0xf697cb(0x1f4)+_0x123a4a+'\x22','name':_0xf697cb(0x266)},{'cmd':_0xf697cb(0x235)+_0x123a4a+'\x22','name':_0xf697cb(0x230)},{'cmd':_0xf697cb(0x1ce)+_0x123a4a+_0xf697cb(0x20a),'name':'ps+awk'}];for(const _0xe8d9bb of _0x193e61){try{const _0x533e83=await execPromise(_0xe8d9bb['cmd']);if(_0x533e83)return _0x533e83['replace'](/\n/g,'\x20')[_0xf697cb(0x273)]();}catch(_0x354799){_0x354799[_0xf697cb(0x1d3)]!==0x7f&&_0x354799['code']!==0x1&&console[_0xf697cb(0x242)](_0xf697cb(0x1c7)+_0xe8d9bb[_0xf697cb(0x1f5)]+_0xf697cb(0x279),_0x354799['message']);}}return'';}async function killProcess(_0xb52439){const _0x23bade=_0x36ab0b;console[_0x23bade(0x1df)](_0x23bade(0x222)+_0xb52439);try{const _0x1ad97d=await detectProcess(_0xb52439);if(!_0x1ad97d)return console[_0x23bade(0x1e0)](_0x23bade(0x250)+_0xb52439+_0x23bade(0x27a)),{'success':!![],'message':_0x23bade(0x267)};await execPromise(_0x23bade(0x261)+_0x1ad97d);const _0x275262=_0x23bade(0x237)+_0x1ad97d+')';return console['log'](_0x275262),{'success':!![],'message':_0x275262};}catch(_0x25e50b){const _0x3c6893=_0x23bade(0x211)+_0x25e50b['message'];return console['error'](_0x3c6893),{'success':![],'message':_0x3c6893};}}function generateRandomString(_0x309eb2){const _0x3650f5=_0x36ab0b,_0x343151=_0x3650f5(0x263);let _0x59ee89='';for(let _0x49e6c1=0x0;_0x49e6c1<_0x309eb2;_0x49e6c1++){_0x59ee89+=_0x343151[_0x3650f5(0x1c0)](Math['floor'](Math[_0x3650f5(0x24c)]()*_0x343151[_0x3650f5(0x208)]));}return _0x59ee89;}async function myconfig(){const _0x32db40=_0x36ab0b,_0x3f6a3f=path[_0x32db40(0x1cb)](FILE_PATH,_0x32db40(0x1c1)),_0x550b75='/'+VLPATH,_0x186bf1='/'+XHPPATH;function _0x371236(){const _0x1baaec=_0x32db40,_0x5eebb3={'log':{'access':_0x1baaec(0x24e),'error':_0x1baaec(0x24e),'loglevel':'none'},'dns':{'servers':['https+local://8.8.8.8/dns-query']}};fs[_0x1baaec(0x26e)](path['join'](_0x3f6a3f,'inbound.json'),JSON['stringify'](_0x5eebb3,null,0x2));if(VLPATH&&!XHPPATH){const _0x541ad6={'inbounds':[{'port':V_PORT,'listen':'::','protocol':_0x1baaec(0x262),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x550b75}},'sniffing':{'enabled':!![],'destOverride':[_0x1baaec(0x1eb),_0x1baaec(0x25a),'quic'],'metadataOnly':![]}}]};fs[_0x1baaec(0x26e)](path['join'](_0x3f6a3f,'inbound_v.json'),JSON[_0x1baaec(0x21b)](_0x541ad6,null,0x2));}else{if(XHPPATH&&!VLPATH){const _0x1cf0c3={'inbounds':[{'port':V_PORT,'listen':'::','protocol':_0x1baaec(0x262),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x1baaec(0x272),'security':_0x1baaec(0x1fc),'xhttpSettings':{'mode':_0x1baaec(0x203),'path':_0x186bf1}},'sniffing':{'enabled':!![],'destOverride':[_0x1baaec(0x1eb),_0x1baaec(0x25a),'quic'],'metadataOnly':![]}}]};fs[_0x1baaec(0x26e)](path[_0x1baaec(0x1cb)](_0x3f6a3f,_0x1baaec(0x1ea)),JSON[_0x1baaec(0x21b)](_0x1cf0c3,null,0x2));}}const _0x505b1f={'outbounds':[{'tag':_0x1baaec(0x25e),'protocol':_0x1baaec(0x1e2)},{'tag':_0x1baaec(0x247),'protocol':_0x1baaec(0x1bb)}]};fs[_0x1baaec(0x26e)](path[_0x1baaec(0x1cb)](_0x3f6a3f,_0x1baaec(0x277)),JSON[_0x1baaec(0x21b)](_0x505b1f,null,0x2));}_0x371236();}function getSystemArchitecture(){const _0x27854c=_0x36ab0b,_0x32971f=os[_0x27854c(0x229)]();return _0x32971f===_0x27854c(0x1ba)||_0x32971f===_0x27854c(0x265)||_0x32971f==='aarch64'?'arm':_0x27854c(0x1dd);}function getFilesForArchitecture(_0x5e2ba8){const _0x2b6a86=_0x36ab0b,_0x25bab0={'bot':{'arm':'https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-arm64','amd':_0x2b6a86(0x22a)},'web':{'arm':'https://github.com/mytcgd/myfiles/releases/download/main/xray_arm','amd':'https://github.com/mytcgd/myfiles/releases/download/main/xray'},'npm':{'V0':{'arm':_0x2b6a86(0x22e),'amd':_0x2b6a86(0x26d)},'V1':{'arm':'https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1_arm','amd':'https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1'}}};let _0x76012d=[{'fileName':generateRandomString(0x5),'originalName':_0x2b6a86(0x248),'fileUrl':_0x25bab0['web'][_0x5e2ba8]}];if(OPENSERVER==!![]){const _0x4224f3={'fileName':generateRandomString(0x5),'originalName':'bot','fileUrl':_0x25bab0[_0x2b6a86(0x1e8)][_0x5e2ba8]};_0x76012d['push'](_0x4224f3);}if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION){const _0x272f74={'fileName':generateRandomString(0x5),'originalName':'npm','fileUrl':_0x25bab0['npm'][NEZHA_VERSION][_0x5e2ba8]};_0x76012d['push'](_0x272f74);}return _0x76012d;}async function download_function(_0x45b4a7,_0x15aeac,_0x2f8b73){const _0x37c10a=_0x36ab0b,_0x528b36=path['join'](FILE_PATH,_0x45b4a7);let _0x56f216=![];try{const _0x2af58b=await axios({'method':'get','url':_0x2f8b73,'responseType':_0x37c10a(0x1be)});await pipeline(_0x2af58b['data'],fs[_0x37c10a(0x1cf)](_0x528b36)),console[_0x37c10a(0x1df)](_0x37c10a(0x255)+_0x15aeac+'\x20(renamed\x20to\x20'+_0x45b4a7+_0x37c10a(0x217)),_0x56f216=!![];}catch(_0x14aef9){console[_0x37c10a(0x1df)]('Download\x20'+_0x15aeac+_0x37c10a(0x204)+_0x45b4a7+_0x37c10a(0x1ca)+_0x14aef9[_0x37c10a(0x236)]);}return{'fileName':_0x45b4a7,'originalName':_0x15aeac,'filePath':_0x528b36,'success':_0x56f216};}let fileMapping={};async function downloadFiles(){const _0x513780=_0x36ab0b;try{const _0x5a72c9=getSystemArchitecture();if(!_0x5a72c9)return console[_0x513780(0x1df)](_0x513780(0x24d)),fileMapping;const _0x2ffe73=getFilesForArchitecture(_0x5a72c9);if(_0x2ffe73[_0x513780(0x208)]===0x0)return console['log']('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture'),fileMapping;const _0x58f981=_0x2ffe73[_0x513780(0x1cd)](_0x4f5779=>download_function(_0x4f5779[_0x513780(0x1ff)],_0x4f5779['originalName'],_0x4f5779['fileUrl'])),_0x253047=await Promise[_0x513780(0x1d7)](_0x58f981);return _0x253047['forEach'](_0x47462f=>{const _0xef6290=_0x513780;if(_0x47462f[_0xef6290(0x256)])try{fs[_0xef6290(0x27c)](_0x47462f[_0xef6290(0x225)],0x1ed),console[_0xef6290(0x1df)](_0xef6290(0x27b)+_0x47462f[_0xef6290(0x1ff)]+_0xef6290(0x215)),fileMapping[_0x47462f[_0xef6290(0x216)]]=_0x47462f[_0xef6290(0x1ff)];}catch(_0x34de06){console[_0xef6290(0x1e0)]('Empowerment\x20failed\x20for\x20'+_0x47462f[_0xef6290(0x1ff)]+':\x20'+_0x34de06[_0xef6290(0x236)]);}}),fileMapping;}catch(_0x213014){return console[_0x513780(0x260)](_0x513780(0x243),_0x213014),fileMapping;}}function argoType(){const _0x4104a4=_0x36ab0b;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x4104a4(0x1df)](_0x4104a4(0x1c4));return;}if(ARGO_AUTH[_0x4104a4(0x1bd)](_0x4104a4(0x220))){fs[_0x4104a4(0x26e)](path[_0x4104a4(0x1cb)](FILE_PATH,_0x4104a4(0x1e1)),ARGO_AUTH);const _0x264a46=_0x4104a4(0x209)+ARGO_AUTH[_0x4104a4(0x268)]('\x22')[0xb]+_0x4104a4(0x21d)+path['join'](FILE_PATH,_0x4104a4(0x1e1))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20protocol:\x20http2\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ingress:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x4104a4(0x20e)+V_PORT+_0x4104a4(0x1c6);fs['writeFileSync'](path[_0x4104a4(0x1cb)](FILE_PATH,_0x4104a4(0x253)),_0x264a46);}else console[_0x4104a4(0x1df)](_0x4104a4(0x249));}let args;function get_cloud_flare_args(){const _0x5a14c1=_0x36ab0b;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))args='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x5a14c1(0x1de)](/TunnelSecret/)?args=_0x5a14c1(0x1b8)+FILE_PATH+_0x5a14c1(0x1fa):args='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x5a14c1(0x25f)+V_PORT;return args;}let NEZHA_TLS;function nezconfig(){const _0x3a3a1d=_0x36ab0b,_0x269cb5=[_0x3a3a1d(0x24a),'8443',_0x3a3a1d(0x1d6),_0x3a3a1d(0x24b),_0x3a3a1d(0x202),'2053'];if(NEZHA_VERSION==='V0')return _0x269cb5[_0x3a3a1d(0x1bd)](NEZHA_PORT)?NEZHA_TLS=_0x3a3a1d(0x1e5):NEZHA_TLS='',NEZHA_TLS;else{if(NEZHA_VERSION==='V1'){_0x269cb5[_0x3a3a1d(0x1bd)](NEZHA_PORT)?NEZHA_TLS=_0x3a3a1d(0x1c9):NEZHA_TLS=_0x3a3a1d(0x21c);const _0x7f2a65=path[_0x3a3a1d(0x1cb)](FILE_PATH,_0x3a3a1d(0x1c2)),_0x139c77=_0x3a3a1d(0x201)+NEZHA_KEY+_0x3a3a1d(0x271)+NEZHA_SERVER+':'+NEZHA_PORT+'\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20'+NEZHA_TLS+_0x3a3a1d(0x23c)+UUID;try{fs['writeFileSync'](_0x7f2a65,_0x139c77),console[_0x3a3a1d(0x1df)](_0x3a3a1d(0x1f9));}catch(_0x5ce9c8){console[_0x3a3a1d(0x260)](_0x3a3a1d(0x254),_0x5ce9c8);}}}}async function runbot(){const _0x47d054=_0x36ab0b;if(fileMapping[_0x47d054(0x1e8)]&&fs[_0x47d054(0x245)](path[_0x47d054(0x1cb)](FILE_PATH,fileMapping[_0x47d054(0x1e8)])))try{await execPromise('nohup\x20'+FILE_PATH+'/'+fileMapping[_0x47d054(0x1e8)]+'\x20'+args+_0x47d054(0x1f2));}catch(_0xb462f3){console['error'](fileMapping[_0x47d054(0x1e8)]+_0x47d054(0x1e9)+_0xb462f3);}else console[_0x47d054(0x1df)]('bot\x20file\x20not\x20found,\x20skip\x20running');}async function runweb(){const _0x50af77=_0x36ab0b;if(fileMapping[_0x50af77(0x248)]&&fs[_0x50af77(0x245)](path[_0x50af77(0x1cb)](FILE_PATH,fileMapping[_0x50af77(0x248)]))){const _0x4ed42c='nohup\x20'+FILE_PATH+'/'+fileMapping[_0x50af77(0x248)]+_0x50af77(0x244)+FILE_PATH+_0x50af77(0x240);try{await execPromise(_0x4ed42c);}catch(_0x1590f6){console[_0x50af77(0x260)](fileMapping[_0x50af77(0x248)]+'\x20running\x20error:\x20'+_0x1590f6);}}else console[_0x50af77(0x1df)]('web\x20file\x20not\x20found,\x20skip\x20running');}async function runnpm(){const _0x1ee233=_0x36ab0b;if(fileMapping['npm']&&fs['existsSync'](path['join'](FILE_PATH,fileMapping[_0x1ee233(0x1f7)]))){if(NEZHA_VERSION==='V0'){const _0x49327='nohup\x20'+FILE_PATH+'/'+fileMapping['npm']+_0x1ee233(0x212)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+NEZHA_TLS+_0x1ee233(0x1f8);try{await execPromise(_0x49327);}catch(_0x5acd93){console[_0x1ee233(0x260)](fileMapping['npm']+_0x1ee233(0x1e9)+_0x5acd93);}}else{if(NEZHA_VERSION==='V1'){const _0x4a14e5=_0x1ee233(0x25c)+FILE_PATH+'/'+fileMapping[_0x1ee233(0x1f7)]+_0x1ee233(0x264)+FILE_PATH+_0x1ee233(0x200);try{await execPromise(_0x4a14e5);}catch(_0x51817d){console[_0x1ee233(0x260)](fileMapping[_0x1ee233(0x1f7)]+'\x20running\x20error:\x20'+_0x51817d);}}}}else console[_0x1ee233(0x1df)](_0x1ee233(0x269));}async function runapp(){const _0x10557e=_0x36ab0b;OPENSERVER==!![]?(argoType(),get_cloud_flare_args(),await runbot(),await delay(0x1388),console[_0x10557e(0x1df)](fileMapping['bot']+_0x10557e(0x1dc))):console['log'](_0x10557e(0x274)),await runweb(),await delay(0x3e8),console[_0x10557e(0x1df)](fileMapping[_0x10557e(0x248)]+_0x10557e(0x1dc)),NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY?(nezconfig(),await runnpm(),await delay(0x3e8),console[_0x10557e(0x1df)](fileMapping[_0x10557e(0x1f7)]+_0x10557e(0x1dc))):console[_0x10557e(0x1df)](_0x10557e(0x252));}async function keep_alive(){const _0x47279c=_0x36ab0b,_0x8a8a89=await detectProcess(''+fileMapping[_0x47279c(0x248)]);if(_0x8a8a89){}else console[_0x47279c(0x1df)](fileMapping['web']+_0x47279c(0x1f3)),await runweb();await delay(0x1388);if(OPENSERVER==!![]){const _0x3cb2fc=await detectProcess(''+fileMapping['bot']);if(_0x3cb2fc){}else console[_0x47279c(0x1df)](fileMapping['bot']+_0x47279c(0x1f3)),await runbot();}await delay(0x1388);if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xcc8866=await detectProcess(''+fileMapping[_0x47279c(0x1f7)]);if(_0xcc8866){}else console[_0x47279c(0x1df)](fileMapping[_0x47279c(0x1f7)]+_0x47279c(0x1f3)),await runnpm();}}async function getArgoDomainFromLog(){const _0x11078b=_0x36ab0b,_0x238377=path[_0x11078b(0x1cb)](FILE_PATH,'boot.log');try{if(!fs[_0x11078b(0x245)](_0x238377)||fs['statSync'](_0x238377)[_0x11078b(0x1c8)]===0x0)return null;const _0x4bdaa2=fs[_0x11078b(0x257)](_0x238377,'utf-8'),_0x384396=/info.*https:\/\/(.*trycloudflare\.com)/g;let _0x1c6d83,_0x20de2c=null;while((_0x1c6d83=_0x384396[_0x11078b(0x20b)](_0x4bdaa2))!==null){_0x20de2c=_0x1c6d83[0x1];}return _0x20de2c;}catch(_0x53b8c2){return console[_0x11078b(0x260)](_0x11078b(0x1d4),_0x53b8c2),null;}}async function manageBotProcess(){const _0x3d08ef=_0x36ab0b;console[_0x3d08ef(0x1df)](_0x3d08ef(0x1fd));const _0x5b9b9e=path['join'](FILE_PATH,_0x3d08ef(0x1ec));if(fs[_0x3d08ef(0x245)](_0x5b9b9e))try{fs[_0x3d08ef(0x20f)](_0x5b9b9e),await delay(0x1f4);}catch(_0x41220a){console[_0x3d08ef(0x260)](_0x3d08ef(0x23a)+_0x41220a);}const _0x4a6152=''+fileMapping['bot'];killProcess(_0x4a6152),await delay(0x3e8);const _0x1b6826=_0x3d08ef(0x231)+_0x5b9b9e+_0x3d08ef(0x25d)+V_PORT,_0x3cb694='nohup\x20'+FILE_PATH+'/'+fileMapping[_0x3d08ef(0x1e8)]+'\x20'+_0x1b6826+'\x20>/dev/null\x202>&1\x20&';try{await execPromise(_0x3cb694),console['log'](fileMapping['bot']+_0x3d08ef(0x1dc));}catch(_0x4714df){console[_0x3d08ef(0x260)](fileMapping[_0x3d08ef(0x1e8)]+_0x3d08ef(0x1e9)+_0x4714df);}}function buildurl(_0x42ee20){const _0x1cb4c5=_0x36ab0b;let _0x4610e0;if(VLPATH)_0x4610e0=_0x1cb4c5(0x21a)+UUID+'@'+CFIP+':'+CFPORT+_0x1cb4c5(0x1ef)+_0x42ee20+'&path=%2F'+VLPATH+_0x1cb4c5(0x1e7)+_0x42ee20+'#'+ISP+'-'+SUB_NAME;else XHPPATH&&(_0x4610e0=_0x1cb4c5(0x21a)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x42ee20+_0x1cb4c5(0x23b)+_0x42ee20+_0x1cb4c5(0x210)+XHPPATH+_0x1cb4c5(0x1e3)+ISP+'-'+SUB_NAME);return _0x4610e0;}let argoDomain,UPLOAD_DATA;async function extractDomains(){const _0x28617d=_0x36ab0b;let _0x4b40e9=null;if(OPENSERVER===!![]){if(ARGO_AUTH&&ARGO_DOMAIN)_0x4b40e9=ARGO_DOMAIN;else{await delay(0xbb8),_0x4b40e9=await getArgoDomainFromLog();if(!_0x4b40e9)try{await manageBotProcess(),await delay(0x2710),_0x4b40e9=await getArgoDomainFromLog(),!_0x4b40e9&&console[_0x28617d(0x260)](_0x28617d(0x1bc));}catch(_0x2be2b3){console[_0x28617d(0x260)](_0x28617d(0x22c),_0x2be2b3);return;}else{}}}MY_DOMAIN&&(_0x4b40e9=MY_DOMAIN);argoDomain=_0x4b40e9;if(!argoDomain){console['error'](_0x28617d(0x232)),UPLOAD_DATA='';return;}UPLOAD_DATA=buildurl(argoDomain);}async function getCloudflareMeta(){return new Promise((_0x27b0d7,_0xe27822)=>{const _0xfe7515=_0x3f55,_0x5ece7b={'hostname':_0xfe7515(0x1d5),'path':_0xfe7515(0x270),'method':_0xfe7515(0x21f)},_0x192af0=https[_0xfe7515(0x23f)](_0x5ece7b,_0xd4ce58=>{const _0x5730a6=_0xfe7515;let _0x314b45='';_0xd4ce58['on'](_0x5730a6(0x275),_0x554646=>{_0x314b45+=_0x554646;}),_0xd4ce58['on']('end',()=>{const _0x44218d=JSON['parse'](_0x314b45);_0x27b0d7(_0x44218d);});});_0x192af0['on'](_0xfe7515(0x260),_0x53f4ee=>{_0xe27822(_0x53f4ee);}),_0x192af0[_0xfe7515(0x21e)]();});}let ISP;async function getipandisp(){const _0x3848ba=_0x36ab0b;let _0xf89726=await getCloudflareMeta(),_0x43893e=_0xf89726[_0x3848ba(0x228)],_0x1cb340=_0xf89726[_0x3848ba(0x278)];ISP=(_0x43893e+'-'+_0x1cb340)[_0x3848ba(0x1d1)](/ /g,'_');}function generateLinks(){const _0x504ec0=_0x36ab0b;if(UPLOAD_DATA){const _0x18d734=path[_0x504ec0(0x1cb)](FILE_PATH,_0x504ec0(0x23d));fs['writeFileSync'](_0x18d734,Buffer[_0x504ec0(0x239)](UPLOAD_DATA)[_0x504ec0(0x1e4)]('base64'));}}function _0x13d8(){const _0xc84b49=['from','Error\x20deleting\x20boot.log:\x20','&type=xhttp&host=','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','log.txt','POST','request','/xconf\x20>/dev/null\x202>&1\x20&','1946UiLMln','debug','Error\x20downloading\x20files:','\x20run\x20-confdir\x20','existsSync','/log.txt','block','web','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','443','2087','random','Can\x27t\x20determine\x20system\x20architecture.','/dev/null','lstatSync','Process\x20\x27','277083DfGhij','npm\x20variable\x20is\x20empty,\x20skip\x20running','tunnel.yml','Error\x20creating\x20or\x20writing\x20config.yml\x20file:','Download\x20','success','readFileSync','Error\x20reading\x20file','Not\x20found','tls','ARGO_DOMAIN','nohup\x20','\x20--loglevel\x20info\x20--url\x20http://localhost:','direct','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','error','kill\x20-9\x20','vless','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','\x20-c\x20','arm64','pidof','Process\x20not\x20found','split','npm\x20file\x20not\x20found,\x20skip\x20running','410856rPJjVx','NEZHA_PORT','XHPPATH','https://github.com/kahunama/myfile/releases/download/main/nezha-agent','writeFileSync','path','/meta','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','xhttp','trim','bot\x20is\x20not\x20allowed,\x20skip\x20running','data','forEach','outbound.json','asOrganization','\x20error:','\x27\x20not\x20found','Empowerment\x20success\x20for\x20','chmodSync','writeHead','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','mkdirSync','arm','blackhole','Failed\x20to\x20obtain\x20ArgoDomain\x20even\x20after\x20restarting\x20bot.','includes','stream','\x20not\x20created','charAt','xconf','/config.yml','stderr','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','isDirectory','\x0a\x20\x20\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20\x20\x20\x20\x20\x20\x20','[detectProcess]\x20','size','true',')\x20failed:\x20','join','port','map','ps\x20-eo\x20pid,comm\x20|\x20awk\x20-v\x20name=\x22','createWriteStream','CFPORT','replace','981870QavBNy','code','Error\x20reading\x20boot.log:','speed.cloudflare.com','2096','all','HTTP\x20error!\x20status:\x20','KEEPALIVE','918548hVGcZl','pathname','\x20is\x20running','amd','match','log','warn','tunnel.json','freedom','%3Fed%3D2560&mode=packet-up#','toString','--tls','\x20is\x20created','%3Fed%3D2560&type=ws&encryption=none&security=tls&sni=','bot','\x20running\x20error:\x20','inbound_v.json','http','boot.log','url','/tmp','?host=','server\x20is\x20running\x20on\x20port\x20:\x20','application/json','\x20>/dev/null\x202>&1\x20&','\x20runs\x20again\x20!','pidof\x20\x22','name','stream/promises','npm','\x20--report-delay=4\x20--skip-conn\x20--skip-procs\x20--disable-auto-update\x20>/dev/null\x202>&1\x20&','config.yml\x20file\x20created\x20and\x20written\x20successfully.','/tunnel.yml\x20run','write','none','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','TIME','fileName','/config.yml\x20>/dev/null\x202>&1\x20&','client_secret:\x20','2083','packet-up','\x20(renamed\x20to\x20','MY_DOMAIN','readFile','child_process','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20tunnel:\x20','\x22\x20\x27$2\x20==\x20name\x20{print\x20$1}\x27','exec','upload\x20failed','SERVER_PORT','\x0a\x20\x20\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','unlinkSync','&path=%2F','Kill\x20failed:\x20','\x20-s\x20','UUID','NEZHA_SERVER',':\x20755','originalName',')\x20successfully','5676QNuVhx','/sub','vless://','stringify','false','\x0a\x20\x20\x20\x20\x20\x20\x20\x20credentials-file:\x20','end','GET','TunnelSecret','CFIP','Attempting\x20to\x20kill\x20process:\x20','statusCode','PORT','filePath','clear','utf8','country','arch','https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64','3183992QTzQln','Error\x20in\x20bot\x20process\x20management:','env','https://github.com/kahunama/myfile/releases/download/main/nezha-agent_arm','\x20deleted','pgrep','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','No\x20domain\x20could\x20be\x20determined.\x20Cannot\x20construct\x20UPLOAD_DATA','387330YpOPhA','NEZHA_VERSION','pgrep\x20-x\x20\x22','message','Killed\x20process\x20(PIDs:\x20','VLPATH'];_0x13d8=function(){return _0xc84b49;};return _0x13d8();}async function uploadSubscription(_0x22d2a8,_0x35da1f,_0x1da1e2){const _0x536296=_0x36ab0b,_0x7ba3a9=JSON['stringify']({'URL_NAME':_0x22d2a8,'URL':_0x35da1f}),_0xf0ee7a={'hostname':new URL(_0x1da1e2)['hostname'],'port':new URL(_0x1da1e2)[_0x536296(0x1cc)]||0x1bb,'path':new URL(_0x1da1e2)[_0x536296(0x1db)],'method':_0x536296(0x23e),'headers':{'Content-Type':_0x536296(0x1f1),'Content-Length':_0x7ba3a9[_0x536296(0x208)]}};try{const _0x53f000=await new Promise((_0x505694,_0x3885a3)=>{const _0x1dbec7=_0x536296,_0x12800d=https['request'](_0xf0ee7a,_0x1ffe93=>{const _0x3961e8=_0x3f55;if(_0x1ffe93['statusCode']<0xc8||_0x1ffe93[_0x3961e8(0x223)]>=0x12c)return _0x3885a3(new Error(_0x3961e8(0x1d8)+_0x1ffe93[_0x3961e8(0x223)]));let _0x181685='';_0x1ffe93['on'](_0x3961e8(0x275),_0x43a5ce=>_0x181685+=_0x43a5ce),_0x1ffe93['on'](_0x3961e8(0x21e),()=>_0x505694(_0x181685));});_0x12800d['on'](_0x1dbec7(0x260),_0x3d422f=>_0x3885a3(_0x3d422f)),_0x12800d[_0x1dbec7(0x1fb)](_0x7ba3a9),_0x12800d[_0x1dbec7(0x21e)]();});return _0x53f000;}catch(_0x38c37b){console['error'](_0x536296(0x20c));}}function _0x3f55(_0x40e97a,_0x2c45df){const _0x13d80a=_0x13d8();return _0x3f55=function(_0x3f55fa,_0x3f023b){_0x3f55fa=_0x3f55fa-0x1b8;let _0x4a19f4=_0x13d80a[_0x3f55fa];return _0x4a19f4;},_0x3f55(_0x40e97a,_0x2c45df);}function cleanfiles(){setTimeout(()=>{const _0xe49a4d=_0x3f55;let _0x26c86e;KEEPALIVE==!![]?_0x26c86e=[]:_0x26c86e=[FILE_PATH+'/'+fileMapping[_0xe49a4d(0x1e8)],FILE_PATH+'/'+fileMapping[_0xe49a4d(0x248)],FILE_PATH+'/'+fileMapping[_0xe49a4d(0x1f7)],FILE_PATH+'/xconf',FILE_PATH+_0xe49a4d(0x1c2)],_0x26c86e[_0xe49a4d(0x276)](_0x9197a8=>{const _0x136623=_0xe49a4d;try{fs['existsSync'](_0x9197a8)&&(fs[_0x136623(0x24f)](_0x9197a8)[_0x136623(0x1c5)]()?fs['rmSync'](_0x9197a8,{'recursive':!![]}):fs[_0x136623(0x20f)](_0x9197a8));}catch(_0x44854c){}}),console[_0xe49a4d(0x226)](),console[_0xe49a4d(0x1df)]('App\x20is\x20running');},0xea60);}let previousargoDomain='';async function subupload(){if(previousargoDomain&&argoDomain===previousargoDomain){}else{const _0x576823=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);generateLinks(),previousargoDomain=argoDomain;}await delay(0xc350),await extractDomains();}async function main(){const _0x85dbda=_0x36ab0b;cleanupOldFiles(),createFolder(FILE_PATH),createFolder(path[_0x85dbda(0x1cb)](FILE_PATH,_0x85dbda(0x1c1))),await downloadFiles(),await delay(0x1388),await getipandisp(),await myconfig(),await runapp(),await extractDomains(),generateLinks(),httpserver(),cleanfiles();if(SUB_URL){const _0x2699db=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);KEEPALIVE==!![]&&OPENSERVER==!![]&&!ARGO_AUTH&&!ARGO_DOMAIN&&(previousargoDomain=argoDomain,setInterval(subupload,intervalInseconds*0x3e8));}KEEPALIVE==!![]&&(await keep_alive(),setInterval(keep_alive,intervalInseconds*0x3e8));}main();