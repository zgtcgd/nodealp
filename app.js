const _0x585cc2=_0x15de;(function(_0x2700ae,_0x43e720){const _0x598d7a=_0x15de,_0x336fce=_0x2700ae();while(!![]){try{const _0x255e55=-parseInt(_0x598d7a(0x1df))/0x1*(parseInt(_0x598d7a(0x260))/0x2)+-parseInt(_0x598d7a(0x270))/0x3+-parseInt(_0x598d7a(0x24b))/0x4*(parseInt(_0x598d7a(0x1f5))/0x5)+-parseInt(_0x598d7a(0x1d2))/0x6*(parseInt(_0x598d7a(0x234))/0x7)+parseInt(_0x598d7a(0x1c8))/0x8*(-parseInt(_0x598d7a(0x219))/0x9)+-parseInt(_0x598d7a(0x1cc))/0xa+-parseInt(_0x598d7a(0x1e0))/0xb*(-parseInt(_0x598d7a(0x1f8))/0xc);if(_0x255e55===_0x43e720)break;else _0x336fce['push'](_0x336fce['shift']());}catch(_0x429c06){_0x336fce['push'](_0x336fce['shift']());}}}(_0x39d7,0x795c6));const FILE_PATH=process[_0x585cc2(0x26b)][_0x585cc2(0x212)]||_0x585cc2(0x1f9),intervalInseconds=process[_0x585cc2(0x26b)][_0x585cc2(0x246)]||0x64,CFIP=process[_0x585cc2(0x26b)][_0x585cc2(0x20c)]||'ip.sb',CFPORT=process[_0x585cc2(0x26b)][_0x585cc2(0x221)]||_0x585cc2(0x206),delay=_0x4c30a6=>new Promise(_0x5a9f09=>setTimeout(_0x5a9f09,_0x4c30a6)),OPENSERVER=process[_0x585cc2(0x26b)][_0x585cc2(0x232)]||!![],KEEPALIVE=process[_0x585cc2(0x26b)][_0x585cc2(0x241)]||![],MY_DOMAIN=process[_0x585cc2(0x26b)][_0x585cc2(0x272)]||'',ARGO_DOMAIN=process[_0x585cc2(0x26b)]['ARGO_DOMAIN']||'',ARGO_AUTH=process[_0x585cc2(0x26b)][_0x585cc2(0x1eb)]||'',VLPATH=process[_0x585cc2(0x26b)]['VLPATH']||'',XHPPATH=process[_0x585cc2(0x26b)][_0x585cc2(0x26c)]||'',PORT=process['env'][_0x585cc2(0x266)]||process[_0x585cc2(0x26b)][_0x585cc2(0x1c6)]||0xbb8,V_PORT=process[_0x585cc2(0x26b)][_0x585cc2(0x1ed)]||0x1f90,UUID=process['env'][_0x585cc2(0x1d0)]||'',NEZHA_VERSION=process[_0x585cc2(0x26b)][_0x585cc2(0x26d)]||'V0',NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process['env']['NEZHA_PORT']||_0x585cc2(0x206),NEZHA_KEY=process[_0x585cc2(0x26b)][_0x585cc2(0x23a)]||'',SUB_NAME=process[_0x585cc2(0x26b)][_0x585cc2(0x248)]||'',SUB_URL=process['env']['SUB_URL']||'',axios=require(_0x585cc2(0x1de)),{pipeline}=require('stream/promises'),os=require('os'),fs=require('fs'),path=require(_0x585cc2(0x23f)),http=require(_0x585cc2(0x1c9)),https=require('https'),exec=require('child_process')[_0x585cc2(0x24d)];function cleanupOldFiles(){const _0x44fc84=_0x585cc2;try{fs[_0x44fc84(0x1ca)](path['join'](FILE_PATH))?(fs[_0x44fc84(0x252)](path['join'](FILE_PATH),{'recursive':!![]}),console[_0x44fc84(0x1e2)](FILE_PATH+_0x44fc84(0x24c))):console[_0x44fc84(0x1e2)](FILE_PATH+_0x44fc84(0x239));}catch(_0x38a4d7){console[_0x44fc84(0x1e2)](_0x44fc84(0x25f)+FILE_PATH);}}function createFolder(_0x3977af){const _0xe6b58d=_0x585cc2;!fs[_0xe6b58d(0x1ca)](_0x3977af)?(fs[_0xe6b58d(0x1c5)](_0x3977af),console[_0xe6b58d(0x1e2)](_0x3977af+_0xe6b58d(0x256))):console[_0xe6b58d(0x1e2)](_0x3977af+_0xe6b58d(0x207));}function httpserver(){const _0x58e5fb=_0x585cc2,_0x1af470=http[_0x58e5fb(0x1e6)]((_0x522d1c,_0xd164ab)=>{const _0x772f26=_0x58e5fb;if(_0x522d1c[_0x772f26(0x228)]==='/')_0xd164ab[_0x772f26(0x1fc)](0xc8),_0xd164ab[_0x772f26(0x1cf)](_0x772f26(0x269));else{if(_0x522d1c[_0x772f26(0x228)]===_0x772f26(0x22f)){const _0x2e827d=FILE_PATH+_0x772f26(0x24a);fs[_0x772f26(0x223)](_0x2e827d,_0x772f26(0x210),(_0x370c66,_0xb114a4)=>{const _0x40f9fc=_0x772f26;_0x370c66?(_0xd164ab[_0x40f9fc(0x1fc)](0x1f4),_0xd164ab[_0x40f9fc(0x1cf)](_0x40f9fc(0x216))):(_0xd164ab[_0x40f9fc(0x1fc)](0xc8,{'Content-Type':'text/plain;\x20charset=utf-8'}),_0xd164ab[_0x40f9fc(0x1cf)](_0xb114a4));});}else _0xd164ab[_0x772f26(0x1fc)](0x194),_0xd164ab[_0x772f26(0x1cf)](_0x772f26(0x1c0));}});_0x1af470[_0x58e5fb(0x1fb)](PORT,()=>{const _0x20775a=_0x58e5fb;console[_0x20775a(0x1e2)](_0x20775a(0x1be)+PORT);});}function execPromise(_0x501f75,_0x1becd1={}){return new Promise((_0x2a343d,_0x24931a)=>{const _0xa4c13d=exec(_0x501f75,_0x1becd1,(_0x51ba59,_0xc05dc7,_0x5a1f13)=>{const _0x4fc761=_0x15de;if(_0x51ba59){const _0x441f54=new Error('Command\x20failed:\x20'+_0x51ba59[_0x4fc761(0x27d)]);_0x441f54[_0x4fc761(0x231)]=_0x51ba59['code'],_0x441f54['stderr']=_0x5a1f13[_0x4fc761(0x245)](),_0x24931a(_0x441f54);}else _0x2a343d(_0xc05dc7[_0x4fc761(0x245)]());});});}async function detectProcess(_0x231366){const _0x34aa78=_0x585cc2,_0x14b5b5=[{'cmd':'pidof\x20\x22'+_0x231366+'\x22','name':'pidof'},{'cmd':_0x34aa78(0x25a)+_0x231366+'\x22','name':'pgrep'},{'cmd':_0x34aa78(0x27c)+_0x231366+_0x34aa78(0x227),'name':'ps+awk'}];for(const _0x537da4 of _0x14b5b5){try{const _0x56d316=await execPromise(_0x537da4['cmd']);if(_0x56d316)return _0x56d316[_0x34aa78(0x27a)](/\n/g,'\x20')['trim']();}catch(_0x8ddd5b){_0x8ddd5b['code']!==0x7f&&_0x8ddd5b['code']!==0x1&&console[_0x34aa78(0x225)](_0x34aa78(0x233)+_0x537da4[_0x34aa78(0x1f1)]+_0x34aa78(0x1cd),_0x8ddd5b['message']);}}return'';}async function killProcess(_0x10b4d0){const _0x4e1372=_0x585cc2;console[_0x4e1372(0x1e2)](_0x4e1372(0x1d1)+_0x10b4d0);try{const _0x17fe81=await detectProcess(_0x10b4d0);if(!_0x17fe81)return console[_0x4e1372(0x215)](_0x4e1372(0x21c)+_0x10b4d0+_0x4e1372(0x1dc)),{'success':!![],'message':_0x4e1372(0x261)};await execPromise(_0x4e1372(0x262)+_0x17fe81);const _0x3cf44f='Killed\x20process\x20(PIDs:\x20'+_0x17fe81+')';return console['log'](_0x3cf44f),{'success':!![],'message':_0x3cf44f};}catch(_0x2a652c){const _0x1e6f13=_0x4e1372(0x263)+_0x2a652c['message'];return console[_0x4e1372(0x26a)](_0x1e6f13),{'success':![],'message':_0x1e6f13};}}function generateRandomString(_0x109d87){const _0x3130bf=_0x585cc2,_0x26ec4e=_0x3130bf(0x1d9);let _0x399c2d='';for(let _0x5e13fd=0x0;_0x5e13fd<_0x109d87;_0x5e13fd++){_0x399c2d+=_0x26ec4e['charAt'](Math['floor'](Math[_0x3130bf(0x249)]()*_0x26ec4e[_0x3130bf(0x1ec)]));}return _0x399c2d;}async function myconfig(){const _0x411b78=_0x585cc2,_0x4e6a0b=path[_0x411b78(0x242)](FILE_PATH,_0x411b78(0x26f)),_0x2170b7='/'+VLPATH,_0x2b6785='/'+XHPPATH;function _0x5d12fa(){const _0x15ab37=_0x411b78,_0x4043d4={'log':{'access':_0x15ab37(0x1e7),'error':_0x15ab37(0x1e7),'loglevel':'none'},'dns':{'servers':[_0x15ab37(0x20e)]}};fs['writeFileSync'](path['join'](_0x4e6a0b,_0x15ab37(0x213)),JSON[_0x15ab37(0x1f2)](_0x4043d4,null,0x2));if(VLPATH&&!XHPPATH){const _0x4b0b28={'inbounds':[{'port':V_PORT,'listen':'::','protocol':_0x15ab37(0x222),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x15ab37(0x22a),'wsSettings':{'path':_0x2170b7}},'sniffing':{'enabled':!![],'destOverride':[_0x15ab37(0x1c9),_0x15ab37(0x253),_0x15ab37(0x208)],'metadataOnly':![]}}]};fs[_0x15ab37(0x25b)](path['join'](_0x4e6a0b,_0x15ab37(0x1d4)),JSON[_0x15ab37(0x1f2)](_0x4b0b28,null,0x2));}else{if(XHPPATH&&!VLPATH){const _0x1181e2={'inbounds':[{'port':V_PORT,'listen':'::','protocol':_0x15ab37(0x222),'settings':{'clients':[{'id':UUID}],'decryption':_0x15ab37(0x22a)},'streamSettings':{'network':_0x15ab37(0x203),'security':_0x15ab37(0x22a),'xhttpSettings':{'mode':_0x15ab37(0x1ef),'path':_0x2b6785}},'sniffing':{'enabled':!![],'destOverride':[_0x15ab37(0x1c9),_0x15ab37(0x253),_0x15ab37(0x208)],'metadataOnly':![]}}]};fs[_0x15ab37(0x25b)](path[_0x15ab37(0x242)](_0x4e6a0b,'inbound_v.json'),JSON['stringify'](_0x1181e2,null,0x2));}}const _0x35f68a={'outbounds':[{'tag':_0x15ab37(0x200),'protocol':'freedom'},{'tag':_0x15ab37(0x1fe),'protocol':_0x15ab37(0x1d6)}]};fs[_0x15ab37(0x25b)](path[_0x15ab37(0x242)](_0x4e6a0b,'outbound.json'),JSON[_0x15ab37(0x1f2)](_0x35f68a,null,0x2));}_0x5d12fa();}function getSystemArchitecture(){const _0x526fcd=_0x585cc2,_0x2ec69e=os['arch']();return _0x2ec69e==='arm'||_0x2ec69e===_0x526fcd(0x1f7)||_0x2ec69e==='aarch64'?_0x526fcd(0x255):_0x526fcd(0x268);}function getFilesForArchitecture(_0x25e3ac){const _0x1b87ef=_0x585cc2,_0x38323c={'bot':{'arm':_0x1b87ef(0x202),'amd':'https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64'},'web':{'arm':'https://github.com/mytcgd/myfiles/releases/download/main/xray_arm','amd':_0x1b87ef(0x23d)},'npm':{'V0':{'arm':_0x1b87ef(0x279),'amd':'https://github.com/kahunama/myfile/releases/download/main/nezha-agent'},'V1':{'arm':_0x1b87ef(0x1e5),'amd':_0x1b87ef(0x237)}}};let _0x4c8ef9=[{'fileName':generateRandomString(0x5),'originalName':_0x1b87ef(0x214),'fileUrl':_0x38323c[_0x1b87ef(0x214)][_0x25e3ac]}];if(OPENSERVER==!![]){const _0x27e4b8={'fileName':generateRandomString(0x5),'originalName':_0x1b87ef(0x26e),'fileUrl':_0x38323c['bot'][_0x25e3ac]};_0x4c8ef9[_0x1b87ef(0x276)](_0x27e4b8);}if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION){const _0x67ee83={'fileName':generateRandomString(0x5),'originalName':_0x1b87ef(0x205),'fileUrl':_0x38323c[_0x1b87ef(0x205)][NEZHA_VERSION][_0x25e3ac]};_0x4c8ef9[_0x1b87ef(0x276)](_0x67ee83);}return _0x4c8ef9;}async function download_function(_0x44e468,_0x5e839b,_0x5a895a){const _0x1a83a0=_0x585cc2,_0x5a1522=path[_0x1a83a0(0x242)](FILE_PATH,_0x44e468);let _0x49013f=![];try{const _0x3bcd05=await axios({'method':'get','url':_0x5a895a,'responseType':'stream'});await pipeline(_0x3bcd05[_0x1a83a0(0x220)],fs[_0x1a83a0(0x271)](_0x5a1522)),console[_0x1a83a0(0x1e2)](_0x1a83a0(0x204)+_0x5e839b+_0x1a83a0(0x1e3)+_0x44e468+')\x20successfully'),_0x49013f=!![];}catch(_0x1e150e){console[_0x1a83a0(0x1e2)](_0x1a83a0(0x204)+_0x5e839b+_0x1a83a0(0x1e3)+_0x44e468+_0x1a83a0(0x1db)+_0x1e150e[_0x1a83a0(0x27d)]);}return{'fileName':_0x44e468,'originalName':_0x5e839b,'filePath':_0x5a1522,'success':_0x49013f};}let fileMapping={};async function downloadFiles(){const _0x447cb3=_0x585cc2;try{const _0x1e8cb0=getSystemArchitecture();if(!_0x1e8cb0)return console[_0x447cb3(0x1e2)](_0x447cb3(0x229)),fileMapping;const _0x1886f8=getFilesForArchitecture(_0x1e8cb0);if(_0x1886f8[_0x447cb3(0x1ec)]===0x0)return console[_0x447cb3(0x1e2)](_0x447cb3(0x1e4)),fileMapping;const _0x2127d7=_0x1886f8[_0x447cb3(0x243)](_0x3626e4=>download_function(_0x3626e4[_0x447cb3(0x250)],_0x3626e4['originalName'],_0x3626e4[_0x447cb3(0x1ea)])),_0x58904e=await Promise[_0x447cb3(0x1c3)](_0x2127d7);return _0x58904e['forEach'](_0x1e5029=>{const _0x49157e=_0x447cb3;if(_0x1e5029[_0x49157e(0x22c)])try{fs[_0x49157e(0x1f4)](_0x1e5029['filePath'],0x1ed),console[_0x49157e(0x1e2)]('Empowerment\x20success\x20for\x20'+_0x1e5029[_0x49157e(0x250)]+':\x20755'),fileMapping[_0x1e5029[_0x49157e(0x22e)]]=_0x1e5029[_0x49157e(0x250)];}catch(_0x1d7d44){console[_0x49157e(0x215)](_0x49157e(0x236)+_0x1e5029['fileName']+':\x20'+_0x1d7d44[_0x49157e(0x27d)]);}}),fileMapping;}catch(_0x5581b0){return console[_0x447cb3(0x26a)](_0x447cb3(0x247),_0x5581b0),fileMapping;}}function argoType(){const _0x3aea21=_0x585cc2;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x3aea21(0x1e2)](_0x3aea21(0x23b));return;}if(ARGO_AUTH['includes'](_0x3aea21(0x1ee))){fs[_0x3aea21(0x25b)](path[_0x3aea21(0x242)](FILE_PATH,_0x3aea21(0x1ce)),ARGO_AUTH);const _0x323924=_0x3aea21(0x20f)+ARGO_AUTH['split']('\x22')[0xb]+_0x3aea21(0x1dd)+path[_0x3aea21(0x242)](FILE_PATH,_0x3aea21(0x1ce))+_0x3aea21(0x224)+ARGO_DOMAIN+_0x3aea21(0x273)+V_PORT+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20\x20\x20\x20\x20\x20\x20';fs['writeFileSync'](path[_0x3aea21(0x242)](FILE_PATH,'tunnel.yml'),_0x323924);}else console[_0x3aea21(0x1e2)](_0x3aea21(0x21b));}let args;function get_cloud_flare_args(){const _0x4a94a0=_0x585cc2;if(ARGO_AUTH[_0x4a94a0(0x1d5)](/^[A-Z0-9a-z=]{120,250}$/))args='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x4a94a0(0x1d5)](/TunnelSecret/)?args=_0x4a94a0(0x1c1)+FILE_PATH+_0x4a94a0(0x27e):args=_0x4a94a0(0x230)+FILE_PATH+_0x4a94a0(0x21f)+V_PORT;return args;}let NEZHA_TLS;function nezconfig(){const _0x2ae586=_0x585cc2,_0x1c7bc0=[_0x2ae586(0x206),_0x2ae586(0x254),_0x2ae586(0x1e9),'2087',_0x2ae586(0x1fd),'2053'];if(NEZHA_VERSION==='V0')return _0x1c7bc0[_0x2ae586(0x1da)](NEZHA_PORT)?NEZHA_TLS=_0x2ae586(0x1fa):NEZHA_TLS='',NEZHA_TLS;else{if(NEZHA_VERSION==='V1'){_0x1c7bc0['includes'](NEZHA_PORT)?NEZHA_TLS='true':NEZHA_TLS=_0x2ae586(0x20d);const _0xa4216e=path[_0x2ae586(0x242)](FILE_PATH,'/config.yml'),_0x4814ee=_0x2ae586(0x251)+NEZHA_KEY+_0x2ae586(0x25d)+NEZHA_SERVER+':'+NEZHA_PORT+'\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20'+NEZHA_TLS+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;try{fs[_0x2ae586(0x25b)](_0xa4216e,_0x4814ee),console[_0x2ae586(0x1e2)](_0x2ae586(0x1f3));}catch(_0x2606d4){console[_0x2ae586(0x26a)]('Error\x20creating\x20or\x20writing\x20config.yml\x20file:',_0x2606d4);}}}}function _0x15de(_0x584fac,_0x2b7c0d){const _0x39d76e=_0x39d7();return _0x15de=function(_0x15de1b,_0x395ef6){_0x15de1b=_0x15de1b-0x1bd;let _0x35f11e=_0x39d76e[_0x15de1b];return _0x35f11e;},_0x15de(_0x584fac,_0x2b7c0d);}async function runbot(){const _0x544a25=_0x585cc2;if(fileMapping[_0x544a25(0x26e)]&&fs[_0x544a25(0x1ca)](path[_0x544a25(0x242)](FILE_PATH,fileMapping[_0x544a25(0x26e)])))try{await execPromise(_0x544a25(0x20b)+FILE_PATH+'/'+fileMapping[_0x544a25(0x26e)]+'\x20'+args+'\x20>/dev/null\x202>&1\x20&');}catch(_0x55374c){console['error'](fileMapping[_0x544a25(0x26e)]+'\x20running\x20error:\x20'+_0x55374c);}else console[_0x544a25(0x1e2)](_0x544a25(0x211));}async function runweb(){const _0x4b0145=_0x585cc2;if(fileMapping['web']&&fs[_0x4b0145(0x1ca)](path[_0x4b0145(0x242)](FILE_PATH,fileMapping[_0x4b0145(0x214)]))){const _0x2cad41=_0x4b0145(0x20b)+FILE_PATH+'/'+fileMapping[_0x4b0145(0x214)]+_0x4b0145(0x22b)+FILE_PATH+_0x4b0145(0x265);try{await execPromise(_0x2cad41);}catch(_0x2db691){console['error'](fileMapping[_0x4b0145(0x214)]+'\x20running\x20error:\x20'+_0x2db691);}}else console[_0x4b0145(0x1e2)](_0x4b0145(0x1cb));}async function runnpm(){const _0x4d55ad=_0x585cc2;if(fileMapping['npm']&&fs['existsSync'](path['join'](FILE_PATH,fileMapping[_0x4d55ad(0x205)]))){if(NEZHA_VERSION==='V0'){const _0x48d852=_0x4d55ad(0x20b)+FILE_PATH+'/'+fileMapping[_0x4d55ad(0x205)]+_0x4d55ad(0x1e8)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4d55ad(0x277)+NEZHA_KEY+'\x20'+NEZHA_TLS+_0x4d55ad(0x1c4);try{await execPromise(_0x48d852);}catch(_0x3f367b){console[_0x4d55ad(0x26a)](fileMapping['npm']+'\x20running\x20error:\x20'+_0x3f367b);}}else{if(NEZHA_VERSION==='V1'){const _0x1a573f=_0x4d55ad(0x20b)+FILE_PATH+'/'+fileMapping[_0x4d55ad(0x205)]+_0x4d55ad(0x1c7)+FILE_PATH+_0x4d55ad(0x1f6);try{await execPromise(_0x1a573f);}catch(_0xdc0df3){console['error'](fileMapping[_0x4d55ad(0x205)]+_0x4d55ad(0x21a)+_0xdc0df3);}}}}else console['log']('npm\x20file\x20not\x20found,\x20skip\x20running');}async function runapp(){const _0xae6b10=_0x585cc2;OPENSERVER==!![]?(argoType(),get_cloud_flare_args(),await runbot(),await delay(0x1388),console[_0xae6b10(0x1e2)](fileMapping['bot']+_0xae6b10(0x1d7))):console[_0xae6b10(0x1e2)](_0xae6b10(0x1bf)),await runweb(),await delay(0x3e8),console[_0xae6b10(0x1e2)](fileMapping[_0xae6b10(0x214)]+_0xae6b10(0x1d7)),NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY?(nezconfig(),await runnpm(),await delay(0x3e8),console[_0xae6b10(0x1e2)](fileMapping[_0xae6b10(0x205)]+_0xae6b10(0x1d7))):console[_0xae6b10(0x1e2)]('npm\x20variable\x20is\x20empty,\x20skip\x20running');}async function keep_alive(){const _0x3c1809=_0x585cc2,_0x1855a9=await detectProcess(''+fileMapping[_0x3c1809(0x214)]);if(_0x1855a9){}else console[_0x3c1809(0x1e2)](fileMapping[_0x3c1809(0x214)]+'\x20runs\x20again\x20!'),await runweb();await delay(0x1388);if(OPENSERVER==!![]){const _0x19104f=await detectProcess(''+fileMapping[_0x3c1809(0x26e)]);if(_0x19104f){}else console[_0x3c1809(0x1e2)](fileMapping['bot']+_0x3c1809(0x1c2)),await runbot();}await delay(0x1388);if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xdff867=await detectProcess(''+fileMapping[_0x3c1809(0x205)]);if(_0xdff867){}else console[_0x3c1809(0x1e2)](fileMapping['npm']+_0x3c1809(0x1c2)),await runnpm();}}async function getArgoDomainFromLog(){const _0x124879=_0x585cc2,_0x2da2c2=path[_0x124879(0x242)](FILE_PATH,_0x124879(0x264));try{if(!fs[_0x124879(0x1ca)](_0x2da2c2)||fs[_0x124879(0x22d)](_0x2da2c2)['size']===0x0)return null;const _0x21fd7b=fs[_0x124879(0x21e)](_0x2da2c2,'utf-8'),_0x4b1c50=/info.*https:\/\/(.*trycloudflare\.com)/g;let _0x5887a5,_0x4268c8=null;while((_0x5887a5=_0x4b1c50[_0x124879(0x24d)](_0x21fd7b))!==null){_0x4268c8=_0x5887a5[0x1];}return _0x4268c8;}catch(_0x31e88a){return console[_0x124879(0x26a)](_0x124879(0x24e),_0x31e88a),null;}}async function manageBotProcess(){const _0x1e5a29=_0x585cc2;console['log'](_0x1e5a29(0x278));const _0x5a7fc1=path[_0x1e5a29(0x242)](FILE_PATH,'boot.log');if(fs[_0x1e5a29(0x1ca)](_0x5a7fc1))try{fs[_0x1e5a29(0x201)](_0x5a7fc1),await delay(0x1f4);}catch(_0xad0fd5){console[_0x1e5a29(0x26a)](_0x1e5a29(0x25e)+_0xad0fd5);}const _0x4ad9b6=''+fileMapping[_0x1e5a29(0x26e)];killProcess(_0x4ad9b6),await delay(0x3e8);const _0x35b009=_0x1e5a29(0x230)+_0x5a7fc1+_0x1e5a29(0x209)+V_PORT,_0x2f374c='nohup\x20'+FILE_PATH+'/'+fileMapping[_0x1e5a29(0x26e)]+'\x20'+_0x35b009+'\x20>/dev/null\x202>&1\x20&';try{await execPromise(_0x2f374c),console[_0x1e5a29(0x1e2)](fileMapping[_0x1e5a29(0x26e)]+_0x1e5a29(0x1d7));}catch(_0x1e38d7){console[_0x1e5a29(0x26a)](fileMapping[_0x1e5a29(0x26e)]+'\x20running\x20error:\x20'+_0x1e38d7);}}function buildurl(_0x12bef6){const _0x300ff7=_0x585cc2;let _0x521d44;if(VLPATH)_0x521d44='vless://'+UUID+'@'+CFIP+':'+CFPORT+_0x300ff7(0x20a)+_0x12bef6+_0x300ff7(0x1ff)+VLPATH+_0x300ff7(0x218)+_0x12bef6+'#'+ISP+'-'+SUB_NAME;else XHPPATH&&(_0x521d44='vless://'+UUID+'@'+CFIP+':'+CFPORT+_0x300ff7(0x1e1)+_0x12bef6+_0x300ff7(0x240)+_0x12bef6+_0x300ff7(0x1ff)+XHPPATH+_0x300ff7(0x259)+ISP+'-'+SUB_NAME);return _0x521d44;}let argoDomain,UPLOAD_DATA;async function extractDomains(){const _0x7cf15c=_0x585cc2;let _0x143f70=null;if(OPENSERVER===!![]){if(ARGO_AUTH&&ARGO_DOMAIN)_0x143f70=ARGO_DOMAIN;else{await delay(0xbb8),_0x143f70=await getArgoDomainFromLog();if(!_0x143f70)try{await manageBotProcess(),await delay(0x2710),_0x143f70=await getArgoDomainFromLog(),!_0x143f70&&console['error']('Failed\x20to\x20obtain\x20ArgoDomain\x20even\x20after\x20restarting\x20bot.');}catch(_0x58e6ee){console[_0x7cf15c(0x26a)]('Error\x20in\x20bot\x20process\x20management:',_0x58e6ee);return;}else{}}}MY_DOMAIN&&(_0x143f70=MY_DOMAIN);argoDomain=_0x143f70;if(!argoDomain){console[_0x7cf15c(0x26a)](_0x7cf15c(0x226)),UPLOAD_DATA='';return;}UPLOAD_DATA=buildurl(argoDomain);}async function getCloudflareMeta(){return new Promise((_0x5dda33,_0x11beed)=>{const _0x1946a9=_0x15de,_0x49982f={'hostname':_0x1946a9(0x257),'path':_0x1946a9(0x267),'method':_0x1946a9(0x217)},_0x1682da=https[_0x1946a9(0x1d3)](_0x49982f,_0x967b25=>{const _0x2504d3=_0x1946a9;let _0x22f235='';_0x967b25['on'](_0x2504d3(0x220),_0x2752e7=>{_0x22f235+=_0x2752e7;}),_0x967b25['on']('end',()=>{const _0x4ecb28=_0x2504d3,_0x4579a7=JSON[_0x4ecb28(0x275)](_0x22f235);_0x5dda33(_0x4579a7);});});_0x1682da['on'](_0x1946a9(0x26a),_0x22b854=>{_0x11beed(_0x22b854);}),_0x1682da[_0x1946a9(0x1cf)]();});}let ISP;function _0x39d7(){const _0x1dc802=['ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','hostname','https://github.com/mytcgd/myfiles/releases/download/main/xray','POST','path','&type=xhttp&host=','KEEPALIVE','join','map','base64','trim','TIME','Error\x20downloading\x20files:','SUB_NAME','random','/log.txt','53412BODsjq','\x20deleted','exec','Error\x20reading\x20boot.log:','upload\x20failed','fileName','client_secret:\x20','rmSync','tls','8443','arm','\x20is\x20created','speed.cloudflare.com','pathname','%3Fed%3D2560&mode=packet-up#','pgrep\x20-x\x20\x22','writeFileSync','toString','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','Error\x20deleting\x20boot.log:\x20','unable\x20to\x20rm\x20','1520278makayH','Process\x20not\x20found','kill\x20-9\x20','Kill\x20failed:\x20','boot.log','/xconf\x20>/dev/null\x202>&1\x20&','PORT','/meta','amd','hello\x20world','error','env','XHPPATH','NEZHA_VERSION','bot','xconf','435120ioxFKA','createWriteStream','MY_DOMAIN','\x0a\x20\x20\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','port','parse','push','\x20-p\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','https://github.com/kahunama/myfile/releases/download/main/nezha-agent_arm','replace','log.txt','ps\x20-eo\x20pid,comm\x20|\x20awk\x20-v\x20name=\x22','message','/tunnel.yml\x20run','asOrganization','server\x20is\x20running\x20on\x20port\x20:\x20','bot\x20is\x20not\x20allowed,\x20skip\x20running','Not\x20found','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','\x20runs\x20again\x20!','all','\x20--report-delay=4\x20--skip-conn\x20--skip-procs\x20--disable-auto-update\x20>/dev/null\x202>&1\x20&','mkdirSync','SERVER_PORT','\x20-c\x20','1944368ifIrZM','http','existsSync','web\x20file\x20not\x20found,\x20skip\x20running','5515070ESygpz','\x20error:','tunnel.json','end','UUID','Attempting\x20to\x20kill\x20process:\x20','6ENeGyI','request','inbound_v.json','match','blackhole','\x20is\x20running','App\x20is\x20running','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','includes',')\x20failed:\x20','\x27\x20not\x20found','\x0a\x20\x20\x20\x20\x20\x20\x20\x20credentials-file:\x20','axios','1YpEtXC','28909287RPhcqB','?encryption=none&security=tls&sni=','log','\x20(renamed\x20to\x20','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1_arm','createServer','/dev/null','\x20-s\x20','2096','fileUrl','ARGO_AUTH','length','V_PORT','TunnelSecret','packet-up','country','name','stringify','config.yml\x20file\x20created\x20and\x20written\x20successfully.','chmodSync','60YrgxbR','/config.yml\x20>/dev/null\x202>&1\x20&','arm64','12ZRUWrM','/tmp','--tls','listen','writeHead','2083','block','&path=%2F','direct','unlinkSync','https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-arm64','xhttp','Download\x20','npm','443','\x20already\x20exists','quic','\x20--loglevel\x20info\x20--url\x20http://localhost:','?host=','nohup\x20','CFIP','false','https+local://8.8.8.8/dns-query','\x0a\x20\x20\x20\x20\x20\x20\x20\x20tunnel:\x20','utf8','bot\x20file\x20not\x20found,\x20skip\x20running','FILE_PATH','inbound.json','web','warn','Error\x20reading\x20file','GET','%3Fed%3D2560&type=ws&encryption=none&security=tls&sni=','18RgdMxv','\x20running\x20error:\x20','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','Process\x20\x27','write','readFileSync','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','data','CFPORT','vless','readFile','\x0a\x20\x20\x20\x20\x20\x20\x20\x20protocol:\x20http2\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ingress:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20hostname:\x20','debug','No\x20domain\x20could\x20be\x20determined.\x20Cannot\x20construct\x20UPLOAD_DATA','\x22\x20\x27$2\x20==\x20name\x20{print\x20$1}\x27','url','Can\x27t\x20determine\x20system\x20architecture.','none','\x20run\x20-confdir\x20','success','statSync','originalName','/sub','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','code','OPENSERVER','[detectProcess]\x20','196063WCDEDG','statusCode','Empowerment\x20failed\x20for\x20','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1','application/json','\x20not\x20created','NEZHA_KEY'];_0x39d7=function(){return _0x1dc802;};return _0x39d7();}async function getipandisp(){const _0x19edd0=_0x585cc2;let _0x7869d=await getCloudflareMeta(),_0x511037=_0x7869d[_0x19edd0(0x1f0)],_0x49483c=_0x7869d[_0x19edd0(0x1bd)];ISP=(_0x511037+'-'+_0x49483c)['replace'](/ /g,'_');}function generateLinks(){const _0x474285=_0x585cc2;if(UPLOAD_DATA){const _0x25f133=path[_0x474285(0x242)](FILE_PATH,_0x474285(0x27b));fs['writeFileSync'](_0x25f133,Buffer['from'](UPLOAD_DATA)[_0x474285(0x25c)](_0x474285(0x244)));}}async function uploadSubscription(_0x5529b4,_0x51d4ae,_0x5b3cd9){const _0x574b16=_0x585cc2,_0x23e26c=JSON['stringify']({'URL_NAME':_0x5529b4,'URL':_0x51d4ae}),_0x1df8a5={'hostname':new URL(_0x5b3cd9)[_0x574b16(0x23c)],'port':new URL(_0x5b3cd9)[_0x574b16(0x274)]||0x1bb,'path':new URL(_0x5b3cd9)[_0x574b16(0x258)],'method':_0x574b16(0x23e),'headers':{'Content-Type':_0x574b16(0x238),'Content-Length':_0x23e26c['length']}};try{const _0x91deda=await new Promise((_0x65661,_0x11c9fb)=>{const _0x1b81f6=_0x574b16,_0x11c27d=https[_0x1b81f6(0x1d3)](_0x1df8a5,_0x234cfd=>{const _0x32cdf1=_0x1b81f6;if(_0x234cfd[_0x32cdf1(0x235)]<0xc8||_0x234cfd['statusCode']>=0x12c)return _0x11c9fb(new Error('HTTP\x20error!\x20status:\x20'+_0x234cfd['statusCode']));let _0x35f8f8='';_0x234cfd['on']('data',_0x49280e=>_0x35f8f8+=_0x49280e),_0x234cfd['on'](_0x32cdf1(0x1cf),()=>_0x65661(_0x35f8f8));});_0x11c27d['on'](_0x1b81f6(0x26a),_0x4b6270=>_0x11c9fb(_0x4b6270)),_0x11c27d[_0x1b81f6(0x21d)](_0x23e26c),_0x11c27d[_0x1b81f6(0x1cf)]();});return _0x91deda;}catch(_0x286892){console['error'](_0x574b16(0x24f));}}function cleanfiles(){setTimeout(()=>{const _0x5816fb=_0x15de;console['clear'](),console[_0x5816fb(0x1e2)](_0x5816fb(0x1d8));},0xea60);}let previousargoDomain='';async function subupload(){if(previousargoDomain&&argoDomain===previousargoDomain){}else{const _0x3cc3ea=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);generateLinks(),previousargoDomain=argoDomain;}await delay(0xc350),await extractDomains();}async function main(){const _0x12d930=_0x585cc2;cleanupOldFiles(),createFolder(FILE_PATH),createFolder(path[_0x12d930(0x242)](FILE_PATH,_0x12d930(0x26f))),await downloadFiles(),await delay(0x1388),await getipandisp(),await myconfig(),await runapp(),await extractDomains(),generateLinks(),httpserver(),cleanfiles();if(SUB_URL){const _0x50ac3c=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);previousargoDomain=argoDomain,OPENSERVER==!![]&&!ARGO_AUTH&&!ARGO_DOMAIN&&setInterval(subupload,intervalInseconds*0x3e8);}KEEPALIVE==!![]&&(await keep_alive(),setInterval(keep_alive,intervalInseconds*0x3e8));}main();